/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";const t=[{value:65504,name:"jfif"},{value:65498,name:"sos"},{value:65505,subvalue:17784,name:"exif"},{value:65505,subvalue:26740,name:"xmp"},{value:65506,subvalue:19792,name:"mpf"}];var e=e=>{if(65496!==e.getUint16(0))return;const o=e.byteLength;let n,i,r=2;for(;r<o&&255===e.getUint8(r);){n=e.getUint16(r);const o=t.find((t=>t.value===n&&(!t.subvalue||t.subvalue===e.getUint16(r+2+2))));if(o){const{name:t}=o;i||(i={}),i[t]||(i[t]={offset:r,size:e.getUint16(r+2)})}if(65498===n)break;r+=2+e.getUint16(r+2)}return i},o=(t,o,n)=>{if(!t)return;const i=new DataView(t),r=e(i);if(!r||!r.exif)return;const a=((t,e)=>{if(65505!==t.getUint16(e))return;const o=t.getUint16(e+2);if(e+=4,1165519206!==t.getUint32(e))return;e+=6;const n=t.getUint16(e);if(18761!==n&&19789!==n)return;const i=18761===n;if(e+=2,42!==t.getUint16(e,i))return;e+=t.getUint32(e+2,i);const r=n=>{const r=[];let a=e;const s=e+o-16;for(;a<s;a+=12){const e=a;t.getUint16(e,i)===n&&r.push(e)}return r};return{read:e=>{const o=r(e);if(o.length)return t.getUint16(o[0]+8,i)},write:(e,o)=>{const n=r(e);return!!n.length&&(n.forEach((e=>t.setUint16(e+8,o,i))),!0)}}})(i,r.exif.offset);return a?void 0===n?a.read(o):a.write(o,n):void 0};const n="__pqina_webapi__";var i=t=>window[n]?window[n][t]:window[t],r=(...t)=>{};const a={ArrayBuffer:"readAsArrayBuffer"};let s=null;var l=()=>(null===s&&(s="undefined"!=typeof window&&void 0!==window.document),s);let c=null;var d=()=>new Promise((t=>{if(null===c){const e="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";let o=l()?new Image:{};return o.onload=()=>{c=1===o.naturalWidth,o=void 0,t(c)},void(o.src=e)}return t(c)})),u=t=>t.getContext("2d").getImageData(0,0,t.width,t.height),h=(t,e,o=[])=>{const n=document.createElement(t),i=Object.getOwnPropertyDescriptors(n.__proto__);for(const t in e)"style"===t?n.style.cssText=e[t]:i[t]&&i[t].set||/textContent|innerHTML/.test(t)||"function"==typeof e[t]?n[t]=e[t]:n.setAttribute(t,e[t]);return o.forEach((t=>n.appendChild(t))),n};const p={1:()=>[1,0,0,1,0,0],2:t=>[-1,0,0,1,t,0],3:(t,e)=>[-1,0,0,-1,t,e],4:(t,e)=>[1,0,0,-1,0,e],5:()=>[0,1,1,0,0,0],6:(t,e)=>[0,1,-1,0,e,0],7:(t,e)=>[0,-1,-1,0,e,t],8:t=>[0,-1,1,0,0,t]};var m=t=>{t.width=1,t.height=1;const e=t.getContext("2d");e&&e.clearRect(0,0,1,1)},g=t=>"data"in t,f=async(t,e=1)=>{const[o,n]=await d()||e<5?[t.width,t.height]:[t.height,t.width],i=h("canvas",{width:o,height:n}),r=i.getContext("2d");if(g(t)&&!await d()&&e>1){const e=h("canvas",{width:t.width,height:t.height});e.getContext("2d").putImageData(t,0,0),t=e}return!await d()&&e>1&&r.transform.apply(r,((t,e,o=-1)=>(-1===o&&(o=1),p[o](t,e)))(t.width,t.height,e)),g(t)?r.putImageData(t,0,0):r.drawImage(t,0,0),t instanceof HTMLCanvasElement&&m(t),i},$=async(t,e=1)=>1===e||await d()?t:u(await f(t,e)),y=t=>"object"==typeof t;const b=t=>y(t)?x(t):t,x=t=>{let e;return Array.isArray(t)?(e=[],t.forEach(((t,o)=>{e[o]=b(t)}))):(e={},Object.keys(t).forEach((o=>{const n=t[o];e[o]=b(n)}))),e};var v=t=>"string"==typeof t,w=t=>"function"==typeof t,C=()=>"createImageBitmap"in window,M=t=>/svg/.test(t.type),k=()=>Math.random().toString(36).substr(2,9);const S=new Map;var P=(t,e,o)=>new Promise(((n,i)=>{const r=t.toString();let a=S.get(r);if(!a){const e=(t=>`function () {self.onmessage = function (message) {(${t.toString()}).apply(null, message.data.content.concat([function (err, response) {\n    response = response || {};\n    const transfer = 'data' in response ? [response.data.buffer] : 'width' in response ? [response] : [];\n    return self.postMessage({ id: message.data.id, content: response, error: err }, transfer);\n}]))}}`)(t),o=URL.createObjectURL((t=>new Blob(["(","function"==typeof t?t.toString():t,")()"],{type:"application/javascript"}))(e)),n=new Map,i=new Worker(o);a={url:o,worker:i,messages:n,terminationTimeout:void 0,terminate:()=>{clearTimeout(a.terminationTimeout),a.worker.terminate(),URL.revokeObjectURL(o),S.delete(r)}},i.onmessage=function(t){const{id:e,content:o,error:i}=t.data;if(clearTimeout(a.terminationTimeout),a.terminationTimeout=setTimeout((()=>{n.size>0||a.terminate()}),500),!n.has(e))return;const r=n.get(e);n.delete(e),null!=i?r.reject(i):r.resolve(o)},S.set(r,a)}const s=k();a.messages.set(s,{resolve:n,reject:i}),a.worker.postMessage({id:s,content:e},o)})),R=async(t,e)=>{let o;if(C()&&!M(t)&&"OffscreenCanvas"in window)try{o=await P(((t,e,o)=>{createImageBitmap(t).then((t=>{let n=t.width,i=t.height;const r=n*i;if(e&&r>e){const t=Math.sqrt(e)/Math.sqrt(r);n=Math.floor(n*t),i=Math.floor(i*t)}const a=new OffscreenCanvas(n,i),s=a.getContext("2d");s.drawImage(t,0,0,n,i);const l=s.getImageData(0,0,a.width,a.height);o(null,l)})).catch((t=>{o(t)}))}),[t,e])}catch(t){}if(!o||!o.width){const n=await(async(t,e)=>{const o=h("img",{src:URL.createObjectURL(t)}),n=await(i=o,r={canvasMemoryLimit:e},new Promise(((t,e)=>{const o=()=>t(((t,{width:e,height:o,canvasMemoryLimit:n})=>{let i=e||t.naturalWidth,r=o||t.naturalHeight;i||r||(i=300,r=150);const a=i*r;if(n&&a>n){const t=Math.sqrt(n)/Math.sqrt(a);i=Math.floor(i*t),r=Math.floor(r*t)}const s=h("canvas");return s.width=i,s.height=r,s.getContext("2d").drawImage(t,0,0,i,r),s})(i,r));i.complete&&i.width?o():(i.onload=o,i.onerror=e)})));var i,r;return URL.revokeObjectURL(o.src),n})(t,e);o=u(n),m(n)}return o},A=(t,e,o)=>new Promise(((n,i)=>{try{t.toBlob((t=>{n(t)}),e,o)}catch(t){i(t)}})),T=async(t,e,o)=>{const n=await f(t),i=await A(n,e,o);return m(n),i};const I={matroska:"mkv"};var E=t=>{const e=(t.match(/\/([a-z0-9]+)/)||[])[1];if(/^x/.test(e)){const[,e=""]=t.split("/x-");return I[e]}return e};const L=/avif|bmp|gif|jpg|jpeg|jpe|jif|jfif|png|svg|tiff|webp/;var z=t=>{return t&&(e=(o=t,o.split(".").pop()).toLowerCase(),L.test(e)?"image/"+(/jfif|jif|jpe|jpg/.test(e)?"jpeg":"svg"===e?"svg+xml":e):"");var e,o},F=(t,e,o)=>{const n=(new Date).getTime(),r=t.type.length&&!/null|text/.test(t.type),a=r?t.type:o,s=((t,e)=>{const o=z(t);if(o===e)return t;const n=E(e)||o;return`${(t=>t.substr(0,t.lastIndexOf("."))||t)(t)}.${n}`})(e,a);try{return new(i("File"))([t],s,{lastModified:n,type:r?t.type:a})}catch(e){const o=r?t.slice():t.slice(0,t.size,a);return o.lastModified=n,o.name=s,o}},B=(t,e)=>t/e,O=t=>t;Math.PI;const D=Math.PI/2,_=D/2;var W=t=>{const e=Math.abs(t)%Math.PI;return e>_&&e<Math.PI-_};const j={Top:"t",Right:"r",Bottom:"b",Left:"l",TopLeft:"tl",TopRight:"tr",BottomRight:"br",BottomLeft:"bl"},{Top:N,Right:H,Bottom:U,Left:V,TopLeft:Z,TopRight:G,BottomRight:q,BottomLeft:X}=j;var Y={[N]:[.5,0],[H]:[1,.5],[U]:[.5,1],[V]:[0,.5],[Z]:[0,0],[G]:[1,0],[q]:[1,1],[X]:[0,1]},K=(t,e=12)=>parseFloat(t.toFixed(e));const J=(t,e,o)=>o+(t-o)*e,Q=()=>tt(0,0),tt=(t,e)=>({x:t,y:e}),et=t=>tt(t.x,t.y),ot=t=>tt(t.pageX,t.pageY),nt=t=>tt(t.x,t.y),it=t=>(t.x=-t.x,t.y=-t.y,t),rt=(t,e,o=Q())=>{const n=Math.cos(e),i=Math.sin(e),r=t.x-o.x,a=t.y-o.y;return t.x=o.x+n*r-i*a,t.y=o.y+i*r+n*a,t},at=t=>Math.sqrt(t.x*t.x+t.y*t.y),st=t=>{const e=Math.sqrt(t.x*t.x+t.y*t.y);return 0===e?Q():(t.x/=e,t.y/=e,t)},lt=(t,e)=>t.x===e.x&&t.y===e.y,ct=(t,e)=>(t.x=e(t.x),t.y=e(t.y),t),dt=(t,e)=>(t.x+=e.x,t.y+=e.y,t),ut=(t,e)=>(t.x-=e.x,t.y-=e.y,t),ht=(t,e)=>(t.x*=e,t.y*=e,t),pt=(t,e)=>t.x*e.y-t.y*e.x,mt=(t,e=Q())=>{const o=t.x-e.x,n=t.y-e.y;return o*o+n*n},gt=(t,e=Q())=>Math.sqrt(mt(t,e)),ft=(t,e,o)=>(t.x=J(t.x,e,o.x),t.y=J(t.y,e,o.y),t),$t=t=>{let e=0,o=0;return t.forEach((t=>{e+=t.x,o+=t.y})),tt(e/t.length,o/t.length)},yt=(t,e,o,n,i)=>(t.forEach((t=>{t.x=e?n-(t.x-n):t.x,t.y=o?i-(t.y-i):t.y})),t),bt=(t,e,o,n)=>{const i=Math.sin(e),r=Math.cos(e);return t.forEach((t=>{t.x-=o,t.y-=n;const e=t.x*r-t.y*i,a=t.x*i+t.y*r;t.x=o+e,t.y=n+a})),t},xt=(t,e)=>({width:t,height:e}),vt=t=>xt(t.width,t.height),wt=t=>xt(t.width,t.height),Ct=t=>xt(t.width,t.height),Mt=t=>{return/img/i.test(t.nodeName)?xt((e=t).naturalWidth,e.naturalHeight):wt(t);var e},kt=(t,e)=>xt(t,e),St=(t,e,o=O)=>o(t.width)===o(e.width)&&o(t.height)===o(e.height),Pt=(t,e)=>(t.width*=e,t.height*=e,t),Rt=t=>tt(.5*t.width,.5*t.height),At=(t,e)=>{const o=Math.abs(e),n=Math.cos(o),i=Math.sin(o),r=n*t.width+i*t.height,a=i*t.width+n*t.height;return t.width=r,t.height=a,t},Tt=(t,e)=>t.width>=e.width&&t.height>=e.height,It=(t,e)=>(t.width=e(t.width),t.height=e(t.height),t),Et=(t,e)=>({start:t,end:e}),Lt=t=>Et(nt(t.start),nt(t.end)),zt=(t,e)=>{if(0===e)return t;const o=tt(t.start.x-t.end.x,t.start.y-t.end.y),n=st(o),i=ht(n,e);return t.start.x+=i.x,t.start.y+=i.y,t.end.x-=i.x,t.end.y-=i.y,t},Ft=[tt(-1,-1),tt(-1,1),tt(1,1),tt(1,-1)],Bt=(t,e,o,n)=>({x:t,y:e,width:o,height:n}),Ot=t=>Bt(t.x,t.y,t.width,t.height),Dt=()=>Bt(0,0,0,0),_t=t=>Bt(0,0,t.width,t.height),Wt=t=>Bt(t.x||0,t.y||0,t.width||0,t.height||0),jt=t=>{let e=t[0].x,o=t[0].x,n=t[0].y,i=t[0].y;return t.forEach((t=>{e=Math.min(e,t.x),o=Math.max(o,t.x),n=Math.min(n,t.y),i=Math.max(i,t.y)})),Bt(e,n,o-e,i-n)},Nt=(t,e)=>Bt(t.x-.5*e.width,t.y-.5*e.height,e.width,e.height),Ht=(t,e,o,n)=>Bt(t,e,o,n),Ut=t=>tt(t.x+.5*t.width,t.y+.5*t.height),Vt=(t,e)=>(t.x+=e.x,t.y+=e.y,t),Zt=(t,e,o)=>(o=o||Ut(t),t.x=e*(t.x-o.x)+o.x,t.y=e*(t.y-o.y)+o.y,t.width=e*t.width,t.height=e*t.height,t),Gt=(t,e,o,n)=>{const i=(n.x-t.x)/t.width,r=(n.y-t.y)/t.height;let a=Math.max(e.width,t.width),s=Math.max(e.height,t.height);return a=Math.min(o.width,a),s=Math.min(o.height,s),t.x=n.x-i*a,t.y=n.y-r*s,t.width=a,t.height=s,t},qt=(t,e)=>{const[o,n]=Y[e],i=o*t.width,r=n*t.height;return tt(t.x+i,t.y+r)},Xt=(t,e)=>(t.x*=e,t.y*=e,t.width*=e,t.height*=e,t),Yt=(t,e)=>(t.x/=e,t.y/=e,t.width/=e,t.height/=e,t),Kt=(t,e,o=O)=>o(t.x)===o(e.x)&&o(t.y)===o(e.y)&&o(t.width)===o(e.width)&&o(t.height)===o(e.height),Jt=t=>B(t.width,t.height),Qt=(t,e,o,n,i)=>(t.x=e,t.y=o,t.width=n,t.height=i,t),te=(t,e)=>(t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t),ee=(t,e,o)=>(o||(o=Ut(t)),se(t).map((t=>rt(t,e,o)))),oe=(t,e)=>Bt(.5*t.width-.5*e.width,.5*t.height-.5*e.height,e.width,e.height),ne=(t,e)=>!(e.x<t.x||e.y<t.y||e.x>t.x+t.width||e.y>t.y+t.height),ie=(t,e,o=Q())=>{if(0===t.width||0===t.height)return Dt();const n=Jt(t);e||(e=n);let i=t.width,r=t.height;return e>n?i=r*e:r=i/e,Bt(o.x+.5*(t.width-i),o.y+.5*(t.height-r),i,r)},re=(t,e=Jt(t),o=Q())=>{if(0===t.width||0===t.height)return Dt();let n=t.width,i=n/e;return i>t.height&&(i=t.height,n=i*e),Bt(o.x+.5*(t.width-n),o.y+.5*(t.height-i),n,i)},ae=t=>[Math.min(t.y,t.y+t.height),Math.max(t.x,t.x+t.width),Math.max(t.y,t.y+t.height),Math.min(t.x,t.x+t.width)],se=t=>[tt(t.x,t.y),tt(t.x+t.width,t.y),tt(t.x+t.width,t.y+t.height),tt(t.x,t.y+t.height)],le=(t,e)=>{if(t)return t.x=e(t.x),t.y=e(t.y),t.width=e(t.width),t.height=e(t.height),t},ce=(t,e,o=Ut(t))=>se(t).map(((t,n)=>{const i=Ft[n];return tt(J(t.x,1+i.x*e.x,o.x),J(t.y,1+i.y*e.y,o.y))})),de=t=>(t.x=0,t.y=0,t),ue=t=>{const e=t[0],o=t[t.length-1];t=lt(e,o)?t:[...t,e];const n=e.x,i=e.y;let r,a,s,l=0,c=0,d=0,u=0;const h=t.length;for(;c<h;c++)r=t[c],a=t[c+1>h-1?0:c+1],s=(r.y-i)*(a.x-n)-(a.y-i)*(r.x-n),l+=s,d+=(r.x+a.x-2*n)*s,u+=(r.y+a.y-2*i)*s;return s=3*l,tt(n+d/s,i+u/s)},he=(t,e)=>pe(t.start,t.end,e.start,e.end),pe=(t,e,o,n)=>{const i=(n.y-o.y)*(e.x-t.x)-(n.x-o.x)*(e.y-t.y);if(0===i)return;const r=((n.x-o.x)*(t.y-o.y)-(n.y-o.y)*(t.x-o.x))/i,a=((e.x-t.x)*(t.y-o.y)-(e.y-t.y)*(t.x-o.x))/i;return r<0||r>1||a<0||a>1?void 0:tt(t.x+r*(e.x-t.x),t.y+r*(e.y-t.y))},me=(t,e,{ignoreIdenticalLines:o=!1,breakOnIntersection:n=!1}={})=>{const i=e.length,r=[];for(let a=0;a<i-1;a++){if(o&&(lt(t.start,e[a])||lt(t.start,e[a+1])||lt(t.end,e[a])||lt(t.end,e[a+1])))continue;const i=pe(t.start,t.end,e[a],e[a+1]);if(i){if(n)return[i];r.push(i)}}return r.length?r:void 0},ge=t=>{const e=[];for(let o=0;o<t.length;o++){let n=o+1;n===t.length&&(n=0),e.push(Et(nt(t[o]),nt(t[n])))}return e},fe=(t,e=0)=>ge(t).map((t=>zt(t,e)));var $e=(t,e)=>t instanceof HTMLElement&&(!e||new RegExp(`^${e}$`,"i").test(t.nodeName)),ye=t=>t instanceof File,be=async(t,e,o)=>{const n=await A(t,e,o);return F(n,"canvas")},xe=t=>t.split("/").pop().split(/\?|\#/).shift();const ve=l()&&Node.prototype.replaceChildren?(t,e)=>t.replaceChildren(e):(t,e)=>{for(;t.lastChild;)t.removeChild(t.lastChild);void 0!==e&&t.append(e)},we=l()&&h("div",{class:"PinturaMeasure",style:"position:absolute;left:0;top:0;width:99999px;height:0;pointer-events:none;contain:strict;margin:0;padding:0;"});let Ce;var Me=t=>(ve(we,t),we.parentNode||document.body.append(we),clearTimeout(Ce),Ce=setTimeout((()=>{we.remove()}),500),t);let ke=null;var Se=()=>(null===ke&&(ke=l()&&/^((?!chrome|android).)*(safari|iphone|ipad)/i.test(navigator.userAgent)),ke),Pe=t=>new Promise(((e,o)=>{let n=!1;!t.parentNode&&Se()&&(n=!0,t.style.cssText="position:absolute;visibility:hidden;pointer-events:none;left:0;top:0;width:0;height:0;",Me(t));const i=()=>{const o=t.naturalWidth,i=t.naturalHeight;o&&i&&(n&&t.remove(),clearInterval(r),e({width:o,height:i}))};t.onerror=t=>{clearInterval(r),o(t)};const r=setInterval(i,1);i()})),Re=t=>new Promise(((e,o)=>{const n=()=>{e({width:t.videoWidth,height:t.videoHeight})};if(t.readyState>=1)return n();t.onloadedmetadata=n,t.onerror=o})),Ae=t=>/^image/.test(t.type),Te=t=>new Promise((e=>{const o=v(t)?t:URL.createObjectURL(t),n=()=>{const t=new Image;t.src=o,e(t)};if(t instanceof Blob&&Ae(t))return n();const i=document.createElement("video");i.preload="metadata",i.onloadedmetadata=()=>e(i),i.onerror=n,i.src=o})),Ie=t=>"VIDEO"===t.nodeName,Ee=async t=>{let e,o;e=t.src?t:await Te(t);try{o=Ie(e)?await Re(e):await Pe(e)}finally{ye(t)&&URL.revokeObjectURL(e.src)}return o},Le=(t=0,e=!0)=>new(i("ProgressEvent"))("progress",{loaded:100*t,total:100,lengthComputable:e}),ze=(t,e,o=(t=>t))=>t.getAllResponseHeaders().indexOf(e)>=0?o(t.getResponseHeader(e)):void 0,Fe=t=>{if(!t)return null;const e=t.split(/filename=|filename\*=.+''/).splice(1).map((t=>t.trim().replace(/^["']|[;"']{0,2}$/g,""))).filter((t=>t.length));return e.length?decodeURI(e[e.length-1]):null};class Be extends Error{constructor(t,e,o){super(t),this.name="EditorError",this.code=e,this.metadata=o}}var Oe=(t,e)=>{const{headers:o={},credentials:n}=e||{};Object.entries(o).forEach((([e,o])=>t.setRequestHeader(e,o))),n&&(t.withCredentials="omit"!==n)},De=t=>t instanceof Blob&&!(t instanceof File),_e=t=>"close"in t,We=async(t,e,o)=>{if(ye(t)||De(t))return t;if(v(t))return await((t,e,o)=>/^data:/.test(t)?(async(t,e="data-uri",o=r)=>{o(Le(0));const n=await fetch(t);o(Le(.33));const i=await n.blob();let a;Ae(i)||(a="image/"+(t.includes(",/9j/")?"jpeg":"png")),o(Le(.66));const s=F(i,e,a);return o(Le(1)),s})(t,void 0,e):((t,e,o)=>new Promise(((n,i)=>{const r=()=>i(new Be("Error fetching image","URL_REQUEST",a)),a=new XMLHttpRequest;a.onprogress=e,a.onerror=r,a.onload=()=>{if(!a.response||a.status>=300||a.status<200)return r();const e=ze(a,"Content-Type"),o=ze(a,"Content-Disposition",Fe)||xe(t);n(F(a.response,o,e||z(o)))};const{willRequest:s}=o;Promise.resolve(s&&s(t,{resourceType:"image"})).then((e=>{if(!1===e)return i("Image load rejected");a.open("GET",t),Oe(a,e),a.responseType="blob",a.send()})).catch(console.error)})))(t,e,o))(t,e,o);if($e(t,"canvas"))return await be(t);if($e(t,"img"))return await(async t=>{try{const e=await Ee(t),o=await(t=>new Promise(((e,o)=>{if(t.complete)return e(t);t.onload=()=>e(t),t.onerror=o})))(t),n=document.createElement("canvas");n.width=e.width,n.height=e.height,n.getContext("2d").drawImage(o,0,0);const i=await A(n);return F(i,xe(o.src))}catch(t){throw t}})(t);if(g(t)||_e(t))return await be(await f(t));throw new Be("Invalid image source","invalid-image-source")};let je=null;var Ne=t=>l()?RegExp(t).test(window.navigator.userAgent):void 0;let He=null;var Ue=()=>(null===He&&(He=l()&&(Ne(/iPhone|iPad|iPod/)||(null===je&&(je=l()&&/^mac/i.test(navigator.platform)),je&&navigator.maxTouchPoints>=1))),He),Ve=async(t,e=1)=>await d()||Ue()||e<5?t:kt(t.height,t.width),Ze=t=>/jpeg/.test(t.type),Ge=t=>{return"object"!=typeof(e=t)||e.constructor!=Object?t:JSON.stringify(t);var e},qe=(t,e=0,o)=>(0===e||(t.translate(o.x,o.y),t.rotate(e),t.translate(-o.x,-o.y)),t),Xe=async(t,e={})=>{const{flipX:o,flipY:n,rotation:i,crop:r}=e,a=wt(t),s=o||n,l=!!i,c=r&&(r.x||r.y||r.width||r.height),d=c&&Kt(r,_t(a)),u=c&&!d;if(!s&&!l&&!u)return t;let p,g=h("canvas",{width:t.width,height:t.height});if(g.getContext("2d").putImageData(t,0,0),s){const t=h("canvas",{width:g.width,height:g.height}).getContext("2d");((t,e,o)=>{t.scale(e,o)})(t,o?-1:1,n?-1:1),t.drawImage(g,o?-g.width:0,n?-g.height:0),t.restore(),m(g),g=t.canvas}if(l){const t=It(Ct(jt(ee(Wt(g),i))),Math.floor),e=h("canvas",{width:r.width,height:r.height}).getContext("2d");((t,e,o)=>{t.translate(e,o)})(e,-r.x,-r.y),qe(e,i,Rt(t)),e.drawImage(g,.5*(t.width-g.width),.5*(t.height-g.height)),e.restore(),m(g),g=e.canvas}else if(u)return p=g.getContext("2d").getImageData(r.x,r.y,r.width,r.height),m(g),p;return p=g.getContext("2d").getImageData(0,0,g.width,g.height),m(g),p},Ye=(t,e)=>{const{imageData:o,width:n,height:i}=t,r=o.width,a=o.height,s=Math.round(n),l=Math.round(i),c=o.data,d=new Uint8ClampedArray(s*l*4),u=r/s,h=a/l,p=Math.ceil(.5*u),m=Math.ceil(.5*h);for(let t=0;t<l;t++)for(let e=0;e<s;e++){const o=4*(e+t*s);let n=0,i=0,a=0,l=0,g=0,f=0,$=0;const y=(t+.5)*h;for(let o=Math.floor(t*h);o<(t+1)*h;o++){const t=Math.abs(y-(o+.5))/m,s=(e+.5)*u,d=t*t;for(let t=Math.floor(e*u);t<(e+1)*u;t++){let e=Math.abs(s-(t+.5))/p;const u=Math.sqrt(d+e*e);if(u<-1||u>1)continue;if(n=2*u*u*u-3*u*u+1,n<=0)continue;e=4*(t+o*r);const h=c[e+3];$+=n*h,a+=n,h<255&&(n=n*h/250),l+=n*c[e],g+=n*c[e+1],f+=n*c[e+2],i+=n}}d[o]=l/i,d[o+1]=g/i,d[o+2]=f/i,d[o+3]=$/a}e(null,{data:d,width:s,height:l})},Ke=t=>{if(t instanceof ImageData)return t;let e;try{e=new ImageData(t.width,t.height)}catch(o){e=h("canvas").getContext("2d").createImageData(t.width,t.height)}return e.data.set(t.data),e},Je=async(t,e={},o)=>{const{width:n,height:i,fit:r,upscale:a}=e;if(!n&&!i)return t;let s=n,l=i;if(n?i||(l=n):s=i,"force"!==r){const e=s/t.width,o=l/t.height;let n=1;if("cover"===r?n=Math.max(e,o):"contain"===r&&(n=Math.min(e,o)),n>1&&!1===a)return t;s=Math.round(t.width*n),l=Math.round(t.height*n)}return s=Math.max(s,1),l=Math.max(l,1),t.width===s&&t.height===l?t:o?o(t,s,l):(t=await P(Ye,[{imageData:t,width:s,height:l}],[t.data.buffer]),Ke(t))},Qe=(t,e)=>{const{imageData:o,matrix:n}=t;if(!n)return e(null,o);const i=new Uint8ClampedArray(o.width*o.height*4),r=o.data,a=r.length,s=n[0],l=n[1],c=n[2],d=n[3],u=n[4],h=n[5],p=n[6],m=n[7],g=n[8],f=n[9],$=n[10],y=n[11],b=n[12],x=n[13],v=n[14],w=n[15],C=n[16],M=n[17],k=n[18],S=n[19];let P=0,R=0,A=0,T=0,I=0,E=0,L=0,z=0,F=0,B=0,O=0,D=0;for(;P<a;P+=4)R=r[P]/255,A=r[P+1]/255,T=r[P+2]/255,I=r[P+3]/255,E=R*s+A*l+T*c+I*d+u,L=R*h+A*p+T*m+I*g+f,z=R*$+A*y+T*b+I*x+v,F=R*w+A*C+T*M+I*k+S,B=Math.max(0,E*F)+(1-F),O=Math.max(0,L*F)+(1-F),D=Math.max(0,z*F)+(1-F),i[P]=255*Math.max(0,Math.min(1,B)),i[P+1]=255*Math.max(0,Math.min(1,O)),i[P+2]=255*Math.max(0,Math.min(1,D)),i[P+3]=255*I;e(null,{data:i,width:o.width,height:o.height})},to=(t,e)=>{const{imageData:o,matrix:n}=t;if(!n)return e(null,o);let i=n.reduce(((t,e)=>t+e));i=i<=0?1:i;const r=o.width,a=o.height,s=o.data;let l=0,c=0,d=0;const u=Math.round(Math.sqrt(n.length)),h=Math.floor(u/2);let p=0,m=0,g=0,f=0,$=0,y=0,b=0,x=0,v=0,w=0;const C=new Uint8ClampedArray(r*a*4);for(d=0;d<a;d++)for(c=0;c<r;c++){for(p=0,m=0,g=0,f=0,y=0;y<u;y++)for($=0;$<u;$++)b=d+y-h,x=c+$-h,b<0&&(b=a-1),b>=a&&(b=0),x<0&&(x=r-1),x>=r&&(x=0),v=4*(b*r+x),w=n[y*u+$],p+=s[v]*w,m+=s[v+1]*w,g+=s[v+2]*w,f+=s[v+3]*w;C[l]=p/i,C[l+1]=m/i,C[l+2]=g/i,C[l+3]=f/i,l+=4}e(null,{data:C,width:r,height:a})},eo=(t,e)=>{let{imageData:o,strength:n}=t;if(!n)return e(null,o);const i=new Uint8ClampedArray(o.width*o.height*4),r=o.width,a=o.height,s=o.data,l=(t,e)=>(c=t-w,d=e-C,Math.sqrt(c*c+d*d));let c,d,u,h,p,m,g,f,$,y,b,x=0,v=0,w=.5*r,C=.5*a,M=l(0,0);for(n>0?(u=0,h=0,p=0):(n=Math.abs(n),u=1,h=1,p=1),v=0;v<a;v++)for(x=0;x<r;x++)k=4*(x+v*r),S=s,P=i,R=l(x,v)*n/M,m=S[k]/255,g=S[k+1]/255,f=S[k+2]/255,$=S[k+3]/255,y=1-R,b=y*$+R,P[k]=(y*$*m+R*u)/b*255,P[k+1]=(y*$*g+R*h)/b*255,P[k+2]=(y*$*f+R*p)/b*255,P[k+3]=255*b;var k,S,P,R;e(null,{data:i,width:o.width,height:o.height})},oo=(t,e)=>{const{imageData:o,level:n,monochrome:i=!1}=t;if(!n)return e(null,o);const r=new Uint8ClampedArray(o.width*o.height*4),a=o.data,s=a.length;let l,c,d,u=0;const h=()=>255*(2*Math.random()-1)*n,p=i?()=>{const t=h();return[t,t,t]}:()=>[h(),h(),h()];for(;u<s;u+=4)[l,c,d]=p(),r[u]=a[u]+l,r[u+1]=a[u+1]+c,r[u+2]=a[u+2]+d,r[u+3]=a[u+3];e(null,{data:r,width:o.width,height:o.height})},no=(t,e)=>{const{imageData:o,level:n}=t;if(!n)return e(null,o);const i=new Uint8ClampedArray(o.width*o.height*4),r=o.data,a=r.length;let s,l,c,d=0;for(;d<a;d+=4)s=r[d]/255,l=r[d+1]/255,c=r[d+2]/255,i[d]=255*Math.pow(s,n),i[d+1]=255*Math.pow(l,n),i[d+2]=255*Math.pow(c,n),i[d+3]=r[d+3];e(null,{data:i,width:o.width,height:o.height})},io=async(t,e={})=>{const{colorMatrix:o,convolutionMatrix:n,gamma:i,noise:r,vignette:a}=e,s=[];if(n&&s.push([to,{matrix:n.clarity}]),i>0&&s.push([no,{level:1/i}]),o&&!(t=>{const e=t.length;let o;const n=e>=20?6:e>=16?5:3;for(let i=0;i<e;i++){if(o=t[i],1===o&&i%n!=0)return!1;if(0!==o&&1!==o)return!1}return!0})(o)&&s.push([Qe,{matrix:o}]),(r>0||r<0)&&s.push([oo,{level:r}]),(a>0||a<0)&&s.push([eo,{strength:a}]),!s.length)return t;const l=(t,e)=>`(err, imageData) => {\n            (${t[e][0].toString()})(Object.assign({ imageData: imageData }, filterInstructions[${e}]), \n                ${t[e+1]?l(t,e+1):"done"})\n        }`,c=`function (options, done) {\n        const filterInstructions = options.filterInstructions;\n        const imageData = options.imageData;\n        (${l(s,0)})(null, imageData)\n    }`;return t=await P(c,[{imageData:t,filterInstructions:s.map((t=>t[1]))}],[t.data.buffer]),Ke(t)},ro=t=>"number"==typeof t,ao=(t,e)=>t.hasOwnProperty(e),so=t=>Array.isArray(t),lo=t=>t instanceof Blob,co=t=>`rgba(${Math.round(255*t[0])}, ${Math.round(255*t[1])}, ${Math.round(255*t[2])}, ${ro(t[3])?t[3]:1})`,uo=t=>Object.values(t).join("_");const ho=async(t,e=0)=>{const o=h("canvas",{width:80,height:80}).getContext("2d");return await((t=0)=>new Promise((e=>{setTimeout(e,t)})))(e),o.drawImage(t,0,0,80,80),!((t=>!new Uint32Array(t.getImageData(0,0,t.canvas.width,t.canvas.height).data.buffer).some((t=>0!==t)))(o)&&e<=256)||await ho(t,e+16)},po=new Map;var mo=t=>new Promise(((e,o)=>{const n=new FileReader;n.onerror=o,n.onload=()=>e(n.result),n.readAsDataURL(t)})),go=()=>{let t=[];return{sub:(e,o)=>(t.push({event:e,callback:o}),()=>t=t.filter((t=>t.event!==e||t.callback!==o))),pub:(e,o)=>{t.filter((t=>t.event===e)).forEach((t=>t.callback(o)))}}};const fo=32,$o=({color:t=[0,0,0],fontSize:e=16,fontFamily:o="sans-serif",fontVariant:n="normal",fontWeight:i="normal",fontStyle:r="normal",textAlign:a="left",lineHeight:s=20})=>`font-size:${e}px;font-style:${r};font-weight:${i};font-family:${o};font-variant:${n};line-height:${s}px;text-align:${a};color:${co(t)};`,yo=(t,e)=>{const{width:o,height:n,disableNewline:i}=e,r=!o,a=!1===i?((t="")=>t.split("\n").length)(t):void 0,s=r?"normal":"break-word",l=r&&!a?"nowrap":"pre-line";return`max-width:none;min-width:auto;width:${r?"auto":`${o}px`};height:${n?`${n}px`:"auto"};margin-top:0;margin-bottom:0;padding-top:${(({fontSize:t=16,lineHeight:e=20}={})=>.5*Math.max(0,t-e))(e)}px;word-break:${s};word-wrap:normal;white-space:${l};overflow:visible;`},bo=new Map,xo=new Map,vo=(t="",e)=>{const{width:o=0,height:n=0}=e;if(o&&n)return kt(o,n);const{fontSize:i,fontFamily:r,lineHeight:a,fontWeight:s,fontStyle:l,fontVariant:c}=e,d=uo({text:t,fontFamily:r,fontWeight:s,fontStyle:l,fontVariant:c,fontSize:i,lineHeight:a,width:o});let u=xo.get(d);if(u)return u;Se()&&t.endsWith("\n")&&!t.endsWith("\n\n")&&(t+="\n");const p=Me(h("pre",{contenteditable:"true",spellcheck:"false",style:`pointer-events:none;visibility:hidden;position:absolute;${$o(e)};${yo(t,e)}"`,innerHTML:t},[h("span")])).getBoundingClientRect();return u=wt(p),u.height+=Math.max(0,i-a),xo.set(d,u),u},wo=new Map,Co=async(t,e)=>{let o;try{o=await((t,e)=>new Promise(((o,n)=>{let i=wo.get(t);void 0===i&&(i=((t,e)=>{const{sub:o,pub:n}=go();let i,r;return Promise.resolve(e&&e(t,{resourceType:"stylesheet"})).then((e=>{if(!1===e)return r="requestPrevented",n("error",r);const{headers:o,credentials:a}=e||{};fetch(t,{headers:o,credentials:a}).then((t=>t.text())).then((t=>{i=t,n("load",i)})).catch((t=>{r=t,n("error",r)}))})),{sub:(t,e)=>"load"===t&&i?e(i):"error"===t&&r?e(r):void o(t,e)}})(t,e),wo.set(t,i)),i.sub("load",o),i.sub("error",n)})))(t,e)}catch(t){return[]}const n=h("style",{innerHTML:o,id:k()});document.head.append(n);const i=Array.from(document.styleSheets).find((t=>t.ownerNode.id===n.id));return n.remove(),Array.from(i.cssRules)},Mo=new Map,ko=(t,e)=>t.style.getPropertyValue(e),So=(t,e)=>!!t.style&&ko(t,"font-family").replace(/^"|"$/g,"")==e,Po=async(t,e)=>{const o=await(async t=>{const e=Array.from(document.styleSheets).map((e=>(async(t,e)=>{if(Mo.has(t.href))return Mo.get(t.href);let o;try{o=Array.from(t.cssRules);for(const t of(t=>t.filter((t=>t instanceof CSSImportRule)))(o)){const n=t.href;if(Mo.has(n)){const t=Mo.get(n);o=[...o,...t];continue}const i=await Co(n,e);Mo.set(n,i),o=[...o,...i]}}catch(n){const i=t.href;o=await Co(i,e),Mo.set(i,o)}return(t=>t.filter((t=>t instanceof CSSFontFaceRule)))(o)})(e,t))),o=await Promise.all(e),n=[];return o.forEach((t=>n.push(...t))),n})(e),n=((t,e)=>{const o=[];for(const n of t)So(n,e)&&o.push(n);return o})(o,t);return n.length?n.map((t=>{const e=t.parentStyleSheet.href&&new URL(t.parentStyleSheet.href),o=e?e.origin+(t=>t.pathname.split("/").slice(0,-1).join("/"))(e)+"/":"",n=t.style.getPropertyValue("src").match(/url\("?(.*?)"?\)/)[1],i=Array.from(t.style).filter((t=>"src"!=t)).reduce(((e,o)=>e+(o+":")+ko(t,o)+";"),"");return[/^http/.test(n)?n:o+n,i]})):[]},Ro=new Map,Ao=new Map;var To=async(t="",e)=>{if(!t.length)return;const{imageWidth:o=300,imageHeight:n=150,paddingLeft:i=fo,paddingRight:r=fo,fontFamily:a,pixelRatio:s=1,willRequest:l}=e,c=(o+i+r)*s,d=n*s,u=$o(e),h=yo(t,e),p=await(async(t,e)=>{if(Ro.get(t))return;let o=Ao.get(t);if(!o){const i=await Po(t,e);if(!i.length)return void Ro.set(t,!0);const r=[];for(const[t,e]of i){const o=await fetch(t).then((t=>t.blob())),i=!(n=o.type)||/woff2/.test(n)?"woff2":/woff/.test(n)?"woff":/ttf|truetype/.test(n)?"truetype":/otf|opentype/.test(n)?"opentype":/svg/.test(n)?"svg":"woff2",a=await mo(o);r.push(`@font-face { src:url(${a}) format('${i}');${e};font-display:block; }`)}o=r.join(""),Ao.set(t,o)}var n;return o})(a,l);return((t,{safariCacheKey:e="*"}={})=>new Promise(((o,n)=>{const i=new Image;i.onerror=n,i.onload=()=>{if(!Se()||!t.includes("@font-face")||po.has(e))return o(i);ho(i).then((()=>{po.set(e,!0),o(i)}))},i.src="data:image/svg+xml,"+t})))(`<svg xmlns="http://www.w3.org/2000/svg" width="${c}" height="${d}" viewBox="0 0 ${c} ${d}"><foreignObject x="0" y="0" width="${c}" height="${d}"><div xmlns="http://www.w3.org/1999/xhtml" style="transform-origin:0 0;transform:scale(${s})">${p?`<style>${p}</style>`:""}<pre contenteditable="true" spellcheck="false" style="position:absolute;padding-right:${r}px;padding-left:${i}px;${u};${h}">${t.replace(/&/g,"&amp;").replace(/#/g,"%23").replace(/<br>/g,"___BR___").replace(/\n/g,"___BR___").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/___BR___/g,"<br/>")}</pre></div></foreignObject></svg>`,{safariCacheKey:a})};const Io=t=>{const e={...t};return x(e)},Eo=t=>tt(t.x1,t.y1),Lo=t=>tt(t.x2,t.y2),zo=t=>ao(t,"text"),Fo=t=>zo(t)&&!(jo(t)||ao(t,"width")),Bo=t=>!zo(t)&&No(t),Oo=t=>ao(t,"rx"),Do=t=>ao(t,"x1"),_o=t=>ao(t,"points"),Wo=t=>!ao(t,"opacity")||t.opacity>0,jo=t=>(ao(t,"x")||ao(t,"left"))&&ao(t,"right")||(ao(t,"y")||ao(t,"top"))&&ao(t,"bottom"),No=t=>(t=>ao(t,"width")&&ao(t,"height"))(t)||jo(t),Ho=(t,e)=>!(!0===t.disableStyle||so(t.disableStyle)&&e&&t.disableStyle.includes(e)),Uo=t=>(delete t.left,delete t.right,delete t.top,delete t.bottom,t),Vo=t=>(delete t.rotation,t),Zo=t=>(t.strokeWidth=t.strokeWidth||1,t.strokeColor=t.strokeColor||[0,0,0],t),Go=t=>(t.backgroundColor=t.backgroundColor?t.backgroundColor:t.strokeWidth||t.backgroundImage?void 0:[0,0,0],t),qo=t=>((t=>{v(t.id)||(t.id=k()),ao(t,"rotation")||(t.rotation=0),ao(t,"opacity")||(t.opacity=1),ao(t,"disableErase")||(t.disableErase=!0)})(t),zo(t)?(t=>{t.fontSize=t.fontSize||"4%",t.fontFamily=t.fontFamily||"sans-serif",t.fontWeight=t.fontWeight||"normal",t.fontStyle=t.fontStyle||"normal",t.fontVariant=t.fontVariant||"normal",t.lineHeight=t.lineHeight||"120%",t.color=t.color||[0,0,0],Fo(t)?(t=>{!1!==t.disableNewline&&(delete t.textAlign,t.text=t.text.replace(/\n/g," ")),Uo(t)})(t):(t=>{t.textAlign=t.textAlign||"left"})(t)})(t):Bo(t)?(t=>{t.cornerRadius=t.cornerRadius||0,t.strokeWidth=t.strokeWidth||0,t.strokeColor=t.strokeColor||[0,0,0],Go(t)})(t):_o(t)?(t=>{Zo(t),Vo(t),ao(t,"pathClose")||(t.disableResize=!0,ao(t,"disableMove")||(t.disableMove=!0)),Uo(t)})(t):Do(t)?(t=>{Zo(t),t.lineStart=t.lineStart||void 0,t.lineEnd=t.lineEnd||void 0,Vo(t),Uo(t)})(t):Oo(t)&&(t=>{t.strokeWidth=t.strokeWidth||0,t.strokeColor=t.strokeColor||[0,0,0],Go(t)})(t),t),Xo=new RegExp(/^x|left|right|^width|rx|fontSize|cornerRadius|strokeWidth/,"i"),Yo=new RegExp(/^y|top|bottom|^height|ry/,"i"),Ko=(t,e)=>{Object.entries(t).map((([o,n])=>{t[o]=((t,e,{width:o,height:n})=>{if(Array.isArray(e))return e.map((t=>(y(t)&&Ko(t,{width:o,height:n}),t)));if("string"!=typeof e)return e;if(!e.endsWith("%"))return e;const i=parseFloat(e)/100;return Xo.test(t)?K(o*i,6):Yo.test(t)?K(n*i,6):e})(o,n,e)}));const o=t.lineHeight;v(o)&&(t.lineHeight=Math.round(t.fontSize*(parseFloat(o)/100)))},Jo=(t,e)=>(Ko(t,e),en(t,e),t),Qo=(t,e)=>{const o=t.filter((t=>t.x<0||t.y<0||t.x1<0||t.y1<0)).reduce(((t,e)=>{const[o,n,i,r]=(t=>{const e=Dt(),o=t.strokeWidth||0;if(Bo(t))e.x=t.x-.5*o,e.y=t.y-.5*o,e.width=t.width+o,e.height=t.height+o;else if(Do(t)){const{x1:n,y1:i,x2:r,y2:a}=t,s=Math.abs(Math.min(n,r)),l=Math.abs(Math.max(n,r)),c=Math.abs(Math.min(i,a)),d=Math.abs(Math.min(i,a));e.x=s+.5*o,e.y=l+.5*o,e.width=l-s+o,e.height=d-c+o}else Oo(t)&&(e.x=t.x-t.rx+.5*o,e.y=t.y-t.ry+.5*o,e.width=2*t.rx+o,e.height=2*t.ry+o);return e&&ao(t,"rotation")&&ee(e,t.rotation),ae(e)})(e);return t.top=Math.min(o,t.top),t.left=Math.min(r,t.left),t.bottom=Math.max(i,t.bottom),t.right=Math.max(n,t.right),t}),{top:0,right:0,bottom:0,left:0});return o.right>0&&(o.right-=e.width),o.bottom>0&&(o.bottom-=e.height),o},tn=(t,e,o)=>{const n=Io(t);Jo(n,e);const i=o(n);return Array.isArray(i)?i:[i]},en=(t,e)=>{if(ao(t,"left")&&(t.x=t.left),ao(t,"right")&&!v(t.right)){const o=e.width-t.right;ao(t,"left")?(t.x=t.left,t.width=Math.max(0,o-t.left)):ao(t,"width")&&(t.x=o-t.width)}if(ao(t,"top")&&(t.y=t.top),ao(t,"bottom")&&!v(t.bottom)){const o=e.height-t.bottom;ao(t,"top")?(t.y=t.top,t.height=Math.max(0,o-t.top)):ao(t,"height")&&(t.y=o-t.height)}return t},on=(t,e)=>(_o(t)&&t.points.filter((t=>ro(t.x))).forEach((t=>{t.x*=e,t.y*=e})),Do(t)&&ro(t.x1)&&(t.x1*=e,t.y1*=e,t.x2*=e,t.y2*=e),ro(t.x)&&ro(t.y)&&(t.x*=e,t.y*=e),ro(t.width)&&ro(t.height)&&(t.width*=e,t.height*=e),ro(t.rx)&&ro(t.ry)&&(t.rx*=e,t.ry*=e),(t=>ro(t.strokeWidth)&&t.strokeWidth>0)(t)&&(t.strokeWidth*=e),zo(t)&&(t._scale=e,ro(t.fontSize)&&(t.fontSize*=e),ro(t.lineHeight)&&(t.lineHeight*=e),ro(t.width)&&!ro(t.height)&&(t.width*=e)),ao(t,"cornerRadius")&&ro(t.cornerRadius)&&(t.cornerRadius*=e),t);var nn=t=>/canvas/i.test(t.nodeName);const rn=new Map([]),an=(t,e={})=>new Promise(((o,n)=>{const{onMetadata:i=r,onLoad:a=o,onError:s=n,onComplete:l=r}=e;let c=rn.get(t);if(c||(c={loading:!1,complete:!1,error:!1,image:void 0,size:void 0,bus:go()},rn.set(t,c)),c.bus.sub("meta",i),c.bus.sub("load",a),c.bus.sub("error",s),c.bus.sub("complete",l),nn(t)){const e=t,o=e.cloneNode();c.complete=!0,c.image=o,c.size=Mt(e)}if(c.complete)return c.bus.pub("meta",{size:c.size}),c.error?c.bus.pub("error",c.error):c.bus.pub("load",c.image),c.bus.pub("complete"),void(c.bus=go());var d,u;c.loading||(c.loading=!0,(d=t,u=t=>{c.size=t,c.bus.pub("meta",{size:t})},new Promise(((t,e)=>{let o=d,n=!1;const i=()=>{n||(n=!0,w(u)&&Promise.resolve().then((()=>u(kt(o.naturalWidth,o.naturalHeight)))))};if(o.src||(o=new Image,v(d)&&new URL(d,location.href).origin!==location.origin&&(o.crossOrigin="anonymous"),o.src=v(d)?d:URL.createObjectURL(d)),o.complete)return i(),t(o);w(u)&&Pe(o).then(i).catch(e),o.onload=()=>{i(),t(o)},o.onerror=e}))).then((t=>{c.image=t,c.bus.pub("load",t)})).catch((t=>{c.error=t,c.bus.pub("error",t)})).finally((()=>{c.complete=!0,c.loading=!1,c.bus.pub("complete"),c.bus=go()})))})),sn=(t,e,o,n)=>t.drawImage(e,o.x,o.x,o.width,o.height,n.x,n.y,n.width,n.height);var ln=async(t,e,o,n,i=sn)=>{t.save(),t.clip(),await i(t,e,o,n),t.restore()};const cn=(t,e,o,n)=>{let i=Ht(0,0,o.width,o.height);const r=Ot(t);if(n)i=le(jt(n),K),i.x*=o.width,i.width*=o.width,i.y*=o.height,i.height*=o.height;else if("contain"===e){const e=re(t,Jt(i));r.width=e.width,r.height=e.height,r.x+=e.x,r.y+=e.y}else"cover"===e&&(i=re(Ht(0,0,i.width,i.height),Jt(r)));return{srcRect:i,destRect:r}},dn=(t,e)=>(e.cornerRadius>0?((t,e,o,n,i,r)=>{n<2*r&&(r=n/2),i<2*r&&(r=i/2),t.beginPath(),t.moveTo(e+r,o),t.arcTo(e+n,o,e+n,o+i,r),t.arcTo(e+n,o+i,e,o+i,r),t.arcTo(e,o+i,e,o,r),t.arcTo(e,o,e+n,o,r),t.closePath()})(t,e.x,e.y,e.width,e.height,e.cornerRadius):t.rect(e.x,e.y,e.width,e.height),t),un=(t,e)=>(e.backgroundColor&&t.fill(),t),hn=(t,e)=>(e.strokeWidth&&t.stroke(),t);var pn=async(t,e,o={})=>new Promise((async(n,i)=>{const{drawImage:r}=o;if(t.lineWidth=e.strokeWidth?e.strokeWidth:1,t.strokeStyle=e.strokeColor?co(e.strokeColor):"none",t.fillStyle=e.backgroundColor?co(e.backgroundColor):"none",t.globalAlpha=e.opacity,e.backgroundImage){let o;try{o=nn(e.backgroundImage)?e.backgroundImage:await an(e.backgroundImage)}catch(t){i(t)}dn(t,e),un(t,e);const{srcRect:a,destRect:s}=cn(e,e.backgroundSize,Mt(o),e.backgroundCorners);await ln(t,o,a,s,r),hn(t,e),n([])}else dn(t,e),un(t,e),hn(t,e),n([])})),mn=async(t,e,o={})=>new Promise((async(n,i)=>{const{drawImage:r}=o;if(t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?co(e.strokeColor):"none",t.fillStyle=e.backgroundColor?co(e.backgroundColor):"none",t.globalAlpha=e.opacity,t.ellipse(e.x,e.y,e.rx,e.ry,0,0,2*Math.PI),e.backgroundColor&&t.fill(),e.backgroundImage){let o;try{o=await an(e.backgroundImage)}catch(t){i(t)}const a=Ht(e.x-e.rx,e.y-e.ry,2*e.rx,2*e.ry),{srcRect:s,destRect:l}=cn(a,e.backgroundSize,Mt(o));await ln(t,o,s,l,r),e.strokeWidth&&t.stroke(),n([])}else e.strokeWidth&&t.stroke(),n([])})),gn=async(t,e,o)=>{const n=e.width&&e.height?wt(e):vo(e.text,e),i={x:e.x,y:e.y,width:n.width,height:n.height};if(pn(t,{...e,...i,options:o}),!e.text.length)return[];const{willRequest:r}=o,a=await To(e.text,{...e,...i,imageWidth:i.width,imageHeight:i.height,willRequest:r});return t.drawImage(a,e.x-fo,e.y,a.width,a.height),[]},fn=async(t,e)=>new Promise((async o=>{t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?co(e.strokeColor):"none",t.globalAlpha=e.opacity;let n=Eo(e),i=Lo(e);t.moveTo(n.x,n.y),t.lineTo(i.x,i.y),e.strokeWidth&&t.stroke(),o([])})),$n=async(t,e)=>new Promise(((o,n)=>{t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?co(e.strokeColor):"none",t.fillStyle=e.backgroundColor?co(e.backgroundColor):"none",t.globalAlpha=e.opacity;const{points:i}=e;e.pathClose&&t.beginPath(),t.moveTo(i[0].x,i[0].y);const r=i.length;for(let e=1;e<r;e++)t.lineTo(i[e].x,i[e].y);e.pathClose&&t.closePath(),e.strokeWidth&&t.stroke(),e.backgroundColor&&t.fill(),o([])}));const yn=async(t,e,o)=>{const n=(t=>{if(Bo(t))return tt(t.x+.5*t.width,t.y+.5*t.height);if(Oo(t))return tt(t.x,t.y);if(t.text){if((t=>zo(t)&&(jo(t)||ao(t,"width")))(t)){const e=t.height||vo(t.text,t).height;return tt(t.x+.5*t.width,t.y+.5*e)}const e=vo(t.text,t);return tt(t.x+.5*e.width,t.y+.5*e.height)}return _o(t)?$t(t.points):Do(t)?$t([Eo(t),Lo(t)]):void 0})(e);let i;if(qe(t,e.rotation,n),((t,e,o,n)=>{(e||o)&&(t.translate(n.x,n.y),t.scale(e?-1:1,o?-1:1),t.translate(-n.x,-n.y))})(t,e.flipX,e.flipY,n),Bo(e)?i=pn:Oo(e)?i=mn:Do(e)?i=fn:_o(e)?i=$n:zo(e)&&(i=gn),i){const n=await i(t,e,o);return n.length?[e,...await bn(t,n,o)]:[]}return[]};var bn=async(t,e,o)=>{let n=[];for(const i of e)t.save(),t.beginPath(),n=[...n,...await yn(t,i,o)],t.restore();return n},xn=async(t,e={})=>{const{shapes:o=[],contextBounds:n=t,transform:i=r,drawImage:a,willRequest:s,canvasMemoryLimit:l,computeShape:c=O,preprocessShape:d=O}=e;if(!o.length)return t;const u=h("canvas");u.width=n.width,u.height=n.height;const p=u.getContext("2d");p.putImageData(t,n.x||0,n.y||0);const g=o.map(Io).map(c).map(d).flat();i(p),await bn(p,g,{drawImage:a,canvasMemoryLimit:l,willRequest:s});const f=p.getImageData(0,0,u.width,u.height);return m(u),f},vn=async(t,e={})=>{const{backgroundColor:o,backgroundImage:n}=e,i=!(!o||o&&0===o[3]);if(!n&&!i)return t;const r=h("canvas");r.width=t.width,r.height=t.height;const a=r.getContext("2d");if(a.putImageData(t,0,0),a.globalCompositeOperation="destination-over",i&&(a.fillStyle=co(o),a.fillRect(0,0,r.width,r.height)),n){let e;e=nn(n)?n:await an(n);const{srcRect:o,destRect:i}=cn({x:0,y:0,width:t.width,height:t.height},"cover",{width:e.width,height:e.height});a.drawImage(e,o.x,o.y,o.width,o.height,i.x,i.y,i.width,i.height)}const s=a.getImageData(0,0,r.width,r.height);return m(r),s},wn=t=>t.length?t.reduce(((t,e)=>((t,e)=>{const o=new Array(20);return o[0]=t[0]*e[0]+t[1]*e[5]+t[2]*e[10]+t[3]*e[15],o[1]=t[0]*e[1]+t[1]*e[6]+t[2]*e[11]+t[3]*e[16],o[2]=t[0]*e[2]+t[1]*e[7]+t[2]*e[12]+t[3]*e[17],o[3]=t[0]*e[3]+t[1]*e[8]+t[2]*e[13]+t[3]*e[18],o[4]=t[0]*e[4]+t[1]*e[9]+t[2]*e[14]+t[3]*e[19]+t[4],o[5]=t[5]*e[0]+t[6]*e[5]+t[7]*e[10]+t[8]*e[15],o[6]=t[5]*e[1]+t[6]*e[6]+t[7]*e[11]+t[8]*e[16],o[7]=t[5]*e[2]+t[6]*e[7]+t[7]*e[12]+t[8]*e[17],o[8]=t[5]*e[3]+t[6]*e[8]+t[7]*e[13]+t[8]*e[18],o[9]=t[5]*e[4]+t[6]*e[9]+t[7]*e[14]+t[8]*e[19]+t[9],o[10]=t[10]*e[0]+t[11]*e[5]+t[12]*e[10]+t[13]*e[15],o[11]=t[10]*e[1]+t[11]*e[6]+t[12]*e[11]+t[13]*e[16],o[12]=t[10]*e[2]+t[11]*e[7]+t[12]*e[12]+t[13]*e[17],o[13]=t[10]*e[3]+t[11]*e[8]+t[12]*e[13]+t[13]*e[18],o[14]=t[10]*e[4]+t[11]*e[9]+t[12]*e[14]+t[13]*e[19]+t[14],o[15]=t[15]*e[0]+t[16]*e[5]+t[17]*e[10]+t[18]*e[15],o[16]=t[15]*e[1]+t[16]*e[6]+t[17]*e[11]+t[18]*e[16],o[17]=t[15]*e[2]+t[16]*e[7]+t[17]*e[12]+t[18]*e[17],o[18]=t[15]*e[3]+t[16]*e[8]+t[17]*e[13]+t[18]*e[18],o[19]=t[15]*e[4]+t[16]*e[9]+t[17]*e[14]+t[18]*e[19]+t[19],o})([...t],e)),t.shift()):[],Cn=(t,e)=>{const o=t.width*t.height,n=e.reduce(((t,e)=>(e.width>t.width&&e.height>t.height&&(t.width=e.width,t.height=e.height),t)),{width:0,height:0}),i=n.width*n.height;return((t,e=2)=>Math.round(t*e)/e)(Math.max(.5,.5+(1-i/o)/2),5)};function Mn(){}const kn=t=>t;function Sn(t,e){for(const o in e)t[o]=e[o];return t}function Pn(t){return t()}function Rn(){return Object.create(null)}function An(t){t.forEach(Pn)}function Tn(t){return"function"==typeof t}function In(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function En(t,...e){if(null==t)return Mn;const o=t.subscribe(...e);return o.unsubscribe?()=>o.unsubscribe():o}function Ln(t){let e;return En(t,(t=>e=t))(),e}function zn(t,e,o){t.$$.on_destroy.push(En(e,o))}function Fn(t,e,o,n){if(t){const i=Bn(t,e,o,n);return t[0](i)}}function Bn(t,e,o,n){return t[1]&&n?Sn(o.ctx.slice(),t[1](n(e))):o.ctx}function On(t,e,o,n){if(t[2]&&n){const i=t[2](n(o));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],o=Math.max(e.dirty.length,i.length);for(let n=0;n<o;n+=1)t[n]=e.dirty[n]|i[n];return t}return e.dirty|i}return e.dirty}function Dn(t,e,o,n,i,r){if(i){const a=Bn(e,o,n,r);t.p(a,i)}}function _n(t){if(t.ctx.length>32){const e=[],o=t.ctx.length/32;for(let t=0;t<o;t++)e[t]=-1;return e}return-1}function Wn(t){const e={};for(const o in t)"$"!==o[0]&&(e[o]=t[o]);return e}function jn(t,e){const o={};e=new Set(e);for(const n in t)e.has(n)||"$"===n[0]||(o[n]=t[n]);return o}function Nn(t,e,o){return t.set(o),e}function Hn(t){return t&&Tn(t.destroy)?t.destroy:Mn}const Un="undefined"!=typeof window;let Vn=Un?()=>window.performance.now():()=>Date.now(),Zn=Un?t=>requestAnimationFrame(t):Mn;const Gn=new Set;function qn(t){Gn.forEach((e=>{e.c(t)||(Gn.delete(e),e.f())})),0!==Gn.size&&Zn(qn)}function Xn(t){let e;return 0===Gn.size&&Zn(qn),{promise:new Promise((o=>{Gn.add(e={c:t,f:o})})),abort(){Gn.delete(e)}}}function Yn(t,e){t.appendChild(e)}function Kn(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Jn(t){const e=ei("style");return function(t,e){Yn(t.head||t,e),e.sheet}(Kn(t),e),e.sheet}function Qn(t,e,o){t.insertBefore(e,o||null)}function ti(t){t.parentNode.removeChild(t)}function ei(t){return document.createElement(t)}function oi(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ni(t){return document.createTextNode(t)}function ii(){return ni(" ")}function ri(){return ni("")}function ai(t,e,o,n){return t.addEventListener(e,o,n),()=>t.removeEventListener(e,o,n)}function si(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function li(t,e,o){null==o?t.removeAttribute(e):t.getAttribute(e)!==o&&t.setAttribute(e,o)}function ci(t,e){const o=Object.getOwnPropertyDescriptors(t.__proto__);for(const n in e)null==e[n]?t.removeAttribute(n):"style"===n?t.style.cssText=e[n]:"__value"===n?t.value=t[n]=e[n]:o[n]&&o[n].set?t[n]=e[n]:li(t,n,e[n])}function di(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function ui(t,e,{bubbles:o=!1,cancelable:n=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,o,n,e),i}class hi{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,e,o=null){this.e||(this.is_svg?this.e=oi(e.nodeName):this.e=ei(e.nodeName),this.t=e,this.c(t)),this.i(o)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)Qn(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(ti)}}const pi=new Map;let mi,gi=0;function fi(t,e,o,n,i,r,a,s=0){const l=16.666/n;let c="{\n";for(let t=0;t<=1;t+=l){const n=e+(o-e)*r(t);c+=100*t+`%{${a(n,1-n)}}\n`}const d=c+`100% {${a(o,1-o)}}\n}`,u=`__svelte_${function(t){let e=5381,o=t.length;for(;o--;)e=(e<<5)-e^t.charCodeAt(o);return e>>>0}(d)}_${s}`,h=Kn(t),{stylesheet:p,rules:m}=pi.get(h)||function(t,e){const o={stylesheet:Jn(e),rules:{}};return pi.set(t,o),o}(h,t);m[u]||(m[u]=!0,p.insertRule(`@keyframes ${u} ${d}`,p.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${u} ${n}ms linear ${i}ms 1 both`,gi+=1,u}function $i(t){mi=t}function yi(){if(!mi)throw new Error("Function called outside component initialization");return mi}function bi(t){yi().$$.on_mount.push(t)}function xi(t){yi().$$.on_destroy.push(t)}function vi(){const t=yi();return(e,o,{cancelable:n=!1}={})=>{const i=t.$$.callbacks[e];if(i){const r=ui(e,o,{cancelable:n});return i.slice().forEach((e=>{e.call(t,r)})),!r.defaultPrevented}return!0}}function wi(t,e){return yi().$$.context.set(t,e),e}function Ci(t){return yi().$$.context.get(t)}function Mi(t,e){const o=t.$$.callbacks[e.type];o&&o.slice().forEach((t=>t.call(this,e)))}const ki=[],Si=[],Pi=[],Ri=[],Ai=Promise.resolve();let Ti=!1;function Ii(){Ti||(Ti=!0,Ai.then(Di))}function Ei(){return Ii(),Ai}function Li(t){Pi.push(t)}function zi(t){Ri.push(t)}const Fi=new Set;let Bi,Oi=0;function Di(){const t=mi;do{for(;Oi<ki.length;){const t=ki[Oi];Oi++,$i(t),_i(t.$$)}for($i(null),ki.length=0,Oi=0;Si.length;)Si.pop()();for(let t=0;t<Pi.length;t+=1){const e=Pi[t];Fi.has(e)||(Fi.add(e),e())}Pi.length=0}while(ki.length);for(;Ri.length;)Ri.pop()();Ti=!1,Fi.clear(),$i(t)}function _i(t){if(null!==t.fragment){t.update(),An(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Li)}}function Wi(t,e,o){t.dispatchEvent(ui(`${e?"intro":"outro"}${o}`))}const ji=new Set;let Ni;function Hi(){Ni={r:0,c:[],p:Ni}}function Ui(){Ni.r||An(Ni.c),Ni=Ni.p}function Vi(t,e){t&&t.i&&(ji.delete(t),t.i(e))}function Zi(t,e,o,n){if(t&&t.o){if(ji.has(t))return;ji.add(t),Ni.c.push((()=>{ji.delete(t),n&&(o&&t.d(1),n())})),t.o(e)}else n&&n()}const Gi={duration:0};function qi(t,e,o,n){let i=e(t,o),r=n?0:1,a=null,s=null,l=null;function c(){l&&function(t,e){const o=(t.style.animation||"").split(", "),n=o.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=o.length-n.length;i&&(t.style.animation=n.join(", "),gi-=i,gi||Zn((()=>{gi||(pi.forEach((t=>{const{ownerNode:e}=t.stylesheet;e&&ti(e)})),pi.clear())})))}(t,l)}function d(t,e){const o=t.b-r;return e*=Math.abs(o),{a:r,b:t.b,d:o,duration:e,start:t.start,end:t.start+e,group:t.group}}function u(e){const{delay:o=0,duration:n=300,easing:u=kn,tick:h=Mn,css:p}=i||Gi,m={start:Vn()+o,b:e};e||(m.group=Ni,Ni.r+=1),a||s?s=m:(p&&(c(),l=fi(t,r,e,n,o,u,p)),e&&h(0,1),a=d(m,n),Li((()=>Wi(t,e,"start"))),Xn((e=>{if(s&&e>s.start&&(a=d(s,n),s=null,Wi(t,a.b,"start"),p&&(c(),l=fi(t,r,a.b,a.duration,0,u,i.css))),a)if(e>=a.end)h(r=a.b,1-r),Wi(t,a.b,"end"),s||(a.b?c():--a.group.r||An(a.group.c)),a=null;else if(e>=a.start){const t=e-a.start;r=a.a+a.d*u(t/a.duration),h(r,1-r)}return!(!a&&!s)})))}return{run(t){Tn(i)?(Bi||(Bi=Promise.resolve(),Bi.then((()=>{Bi=null}))),Bi).then((()=>{i=i(),u(t)})):u(t)},end(){c(),a=s=null}}}const Xi="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function Yi(t,e){t.d(1),e.delete(t.key)}function Ki(t,e){Zi(t,1,1,(()=>{e.delete(t.key)}))}function Ji(t,e,o,n,i,r,a,s,l,c,d,u){let h=t.length,p=r.length,m=h;const g={};for(;m--;)g[t[m].key]=m;const f=[],$=new Map,y=new Map;for(m=p;m--;){const t=u(i,r,m),s=o(t);let l=a.get(s);l?n&&l.p(t,e):(l=c(s,t),l.c()),$.set(s,f[m]=l),s in g&&y.set(s,Math.abs(m-g[s]))}const b=new Set,x=new Set;function v(t){Vi(t,1),t.m(s,d),a.set(t.key,t),d=t.first,p--}for(;h&&p;){const e=f[p-1],o=t[h-1],n=e.key,i=o.key;e===o?(d=e.first,h--,p--):$.has(i)?!a.has(n)||b.has(n)?v(e):x.has(i)?h--:y.get(n)>y.get(i)?(x.add(n),v(e)):(b.add(i),h--):(l(o,a),h--)}for(;h--;){const e=t[h];$.has(e.key)||l(e,a)}for(;p;)v(f[p-1]);return f}function Qi(t,e){const o={},n={},i={$$scope:1};let r=t.length;for(;r--;){const a=t[r],s=e[r];if(s){for(const t in a)t in s||(n[t]=1);for(const t in s)i[t]||(o[t]=s[t],i[t]=1);t[r]=s}else for(const t in a)i[t]=1}for(const t in n)t in o||(o[t]=void 0);return o}function tr(t){return"object"==typeof t&&null!==t?t:{}}function er(t,e,o){const n=t.$$.props[e];void 0!==n&&(t.$$.bound[n]=o,o(t.$$.ctx[n]))}function or(t){t&&t.c()}function nr(t,e,o,n){const{fragment:i,on_mount:r,on_destroy:a,after_update:s}=t.$$;i&&i.m(e,o),n||Li((()=>{const e=r.map(Pn).filter(Tn);a?a.push(...e):An(e),t.$$.on_mount=[]})),s.forEach(Li)}function ir(t,e){const o=t.$$;null!==o.fragment&&(An(o.on_destroy),o.fragment&&o.fragment.d(e),o.on_destroy=o.fragment=null,o.ctx=[])}function rr(t,e,o,n,i,r,a,s=[-1]){const l=mi;$i(t);const c=t.$$={fragment:null,ctx:null,props:r,update:Mn,not_equal:i,bound:Rn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Rn(),dirty:s,skip_bound:!1,root:e.target||l.$$.root};a&&a(c.root);let d=!1;if(c.ctx=o?o(t,e.props||{},((e,o,...n)=>{const r=n.length?n[0]:o;return c.ctx&&i(c.ctx[e],c.ctx[e]=r)&&(!c.skip_bound&&c.bound[e]&&c.bound[e](r),d&&function(t,e){-1===t.$$.dirty[0]&&(ki.push(t),Ii(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),o})):[],c.update(),d=!0,An(c.before_update),c.fragment=!!n&&n(c.ctx),e.target){if(e.hydrate){const t=(u=e.target,Array.from(u.childNodes));c.fragment&&c.fragment.l(t),t.forEach(ti)}else c.fragment&&c.fragment.c();e.intro&&Vi(t.$$.fragment),nr(t,e.target,e.anchor,e.customElement),Di()}var u;$i(l)}class ar{$destroy(){ir(this,1),this.$destroy=Mn}$on(t,e){const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(e),()=>{const t=o.indexOf(e);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const sr=[];function lr(t,e){return{subscribe:cr(t,e).subscribe}}function cr(t,e=Mn){let o;const n=new Set;function i(e){if(In(t,e)&&(t=e,o)){const e=!sr.length;for(const e of n)e[1](),sr.push(e,t);if(e){for(let t=0;t<sr.length;t+=2)sr[t][0](sr[t+1]);sr.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(r,a=Mn){const s=[r,a];return n.add(s),1===n.size&&(o=e(i)||Mn),r(t),()=>{n.delete(s),0===n.size&&(o(),o=null)}}}}function dr(t,e,o){const n=!Array.isArray(t),i=n?[t]:t,r=e.length<2;return lr(o,(t=>{let o=!1;const a=[];let s=0,l=Mn;const c=()=>{if(s)return;l();const o=e(n?a[0]:a,t);r?t(o):l=Tn(o)?o:Mn},d=i.map(((t,e)=>En(t,(t=>{a[e]=t,s&=~(1<<e),o&&c()}),(()=>{s|=1<<e}))));return o=!0,c(),function(){An(d),l()}}))}const ur=t=>({updateValue:t}),hr=t=>({defaultValue:t}),pr=t=>({store:t}),mr=t=>({store:(e,o)=>dr(...t(o))}),gr=t=>({store:(e,o)=>{const[n,i,r=(()=>!1)]=t(o);let a,s=!0;return dr(n,((t,e)=>{i(t,(t=>{!s&&r(a,t)||(a=t,s=!1,e(t))}))}))}}),fr=t=>({store:(e,o)=>{const[n,i={},r]=t(o);let a=[];const s={},l=t=>n(t,s),c=t=>{(a.length||t.length)&&(a=t,d())},d=()=>{const t=a.map(l);r&&t.sort(r),a=[...t],h(t)};Object.entries(i).map((([t,e])=>e.subscribe((e=>{s[t]=e,e&&d()}))));const{subscribe:u,set:h}=cr(e||[]);return{set:c,update:t=>c(t(a)),subscribe:u}}});var $r=t=>{const e={},o={};return t.forEach((([t,...n])=>{const i=n.reduce(((t,e)=>Object.assign(t,e)),{}),a=e[t]=((t,e,o)=>{const{store:n=(t=>cr(t)),defaultValue:i=r,updateValue:a}=o,s=n(i(),e,t),{subscribe:l,update:c=r}=s;let d;const u=t=>{let e=!0;d&&d(),d=l((o=>{if(e)return e=!1;t(o),d(),d=void 0}))},h=a?a(t):O;return s.set=t=>c((e=>h(t,e,u))),s.defaultValue=i,s})(o,e,i),s={get:()=>Ln(a),set:a.set};Object.defineProperty(o,t,s)})),{stores:e,accessors:o}},yr=[["src",pr((()=>{let t;const{subscribe:e,set:o}=cr(),n=e=>{t!==e&&(t=e,o(t))};return{set:n,subscribe:e,update:e=>n(e(t))}}))],["imageReader"],["imageWriter"],["imageScrambler"],["images",hr((()=>[]))],["shapePreprocessor"],["willRequestResource"],["willRequest"]],br=(t,e)=>{Object.keys(e).forEach((o=>{const n=w(e[o])?{value:e[o],writable:!1}:e[o];Object.defineProperty(t,o,n)}))};const xr=(t,e)=>{let o,n,i,r,a,s,l,c,d,u;const h=e.length;for(o=0;o<h;o++)if(n=e[o],i=e[o+1>h-1?0:o+1],r=n.x-t.x,a=n.y-t.y,s=i.x-t.x,l=i.y-t.y,c=r-s,d=a-l,u=c*a-d*r,u<-1e-5)return!1;return!0},vr=1e4;var wr=(t,e)=>{const o=ge(e),n=Q();se(t).forEach((t=>{dt(t,n),xr(t,e)||o.forEach((e=>{const o=Math.atan2(e.start.y-e.end.y,e.start.x-e.end.x),i=Math.sin(Math.PI-o)*vr,r=Math.cos(Math.PI-o)*vr,a=tt(t.x+i,t.y+r),s=zt(Lt(e),vr),l=he(Et(t,a),s);l&&dt(n,ut(nt(l),t))}))}));const i=Ot(t);return dt(i,n),!!se(i).every((t=>xr(t,e)))&&(te(t,i),!0)},Cr=(t,e)=>{const o=se(t),n=fe(e,5),i=Ut(t),r=[];o.forEach((t=>{const e=((t,e)=>{const o=tt(t.start.x-t.end.x,t.start.y-t.end.y),n=st(o),i=ht(n,e);return t.end.x+=i.x,t.end.y+=i.y,t})(Et(nt(i),nt(t)),1e6);let o=!1;n.map(Lt).forEach((t=>{const n=he(e,t);n&&!o&&(r.push(n),o=!0)}))}));const a=gt(r[0],r[2])<gt(r[1],r[3])?[r[0],r[2]]:[r[1],r[3]],s=jt(a);return s.width<t.width&&(te(t,s),!0)},Mr=(t,e,o={x:0,y:0})=>{const n=_t(t),i=Ut(n),r=ce(n,o,i).map((t=>rt(t,e,i))),a=jt(r);return r.map((t=>ut(t,a)))},kr=(t,e=0,o=Jt(t))=>{let n,i;if(0!==e){const r=Math.atan2(1,o),a=Math.sign(e)*e,s=a%Math.PI,l=a%D;let c;c=s>_&&s<D+_?l>_?a:D-l:l>_?D-l:a;const d=Math.min(Math.abs(t.height/Math.sin(r+c)),Math.abs(t.width/Math.cos(r-c)));n=Math.cos(r)*d,i=n/o}else n=t.width,i=n/o,i>t.height&&(i=t.height,n=i*o);return kt(n,i)},Sr=(t,e,o)=>{const n=_t(t),i=Ut(n),r=ee(n,o,i),a=Ut(de(jt(r))),s=Ut(e),l=rt(s,-o,a),c=ut(l,a),d=ct(dt(i,c),K);return Ht(d.x-.5*e.width,d.y-.5*e.height,e.width,e.height)},Pr=(t,e,o)=>Math.max(e,Math.min(t,o));const Rr=["cropLimitToImage","cropMinSize","cropMaxSize","cropAspectRatio","flipX","flipY","rotation","crop","colorMatrix","convolutionMatrix","gamma","vignette","redaction","annotation","decoration","frame","backgroundColor","backgroundImage","targetSize","metadata","trim"],Ar=t=>so(t)?t.map(Ar):De(t)||ye(t)?t:y(t)?{...t}:t,Tr=t=>t.map((t=>Object.entries(t).reduce(((t,[e,o])=>(e.startsWith("_")||(t[e]=o),t)),{})));var Ir=(t,e)=>{if(t.length!==e.length)return!1;for(let o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0};const Er=(t,e,o)=>{const n=ct(Ut(t),(t=>K(t,8))),i=_t(e),r=Ut(i),a=ee(i,o,r),s=ct(Rt(jt(a)),(t=>K(t,8))),l=Math.abs(s.x-n.x),c=Math.abs(s.y-n.y);return l<1&&c<1},Lr=(t,e)=>{const{context:o,props:n}=e;return t._isFormatted||((t=qo(t))._isFormatted=!0,Object.assign(t,n)),t._isDraft||!jo(t)||t._context&&Kt(o,t._context)||(en(t,o),t._context={...o}),t};var zr=[["file"],["size"],["loadState"],["processState"],["aspectRatio",mr((({size:t})=>[t,t=>t?Jt(t):void 0]))],["perspectiveX",hr((()=>0))],["perspectiveY",hr((()=>0))],["perspective",mr((({perspectiveX:t,perspectiveY:e})=>[[t,e],([t,e])=>({x:t,y:e})]))],["rotation",hr((()=>0)),ur((t=>(e,o,n)=>{if(e===o)return e;const{loadState:i,size:r,rotationRange:a,cropMinSize:s,cropMaxSize:l,crop:c,perspective:d,cropLimitToImage:u,cropOrigin:h}=t;if(!c||!i||!i.beforeComplete)return e;const p=u&&((t,e,o)=>{const n=kr(e,o,Jt(t));return St(It(n,Math.round),It(vt(t),Math.round))})(c,r,o),m=u&&Er(c,r,o),g=((t,e,o,n,i,r,a,s,l,c)=>{const d=vt(l),u=vt(c);a&&(u.width=Math.min(c.width,i.width),u.height=Math.min(c.height,i.height));let h=!1;const p=(e,o)=>{const l=Sr(i,n,e),c=_t(i),m=Ut(c),g=ce(c,r,m),f=ut(nt(m),ue(g)),$=rt(Ut(l),o,m),y=ut(nt(m),$);g.forEach((t=>rt(t,o,m)));const b=jt(g),x=ue(g),v=dt(ut(ut(x,y),b),f),w=Ht(v.x-.5*l.width,v.y-.5*l.height,l.width,l.height);if(s&&Zt(w,s.width/w.width),a){const t=Mr(i,o,r);Cr(w,t)}const C=K(Math.min(w.width/d.width,w.height/d.height),8),M=K(Math.max(w.width/u.width,w.height/u.height),8);return(C<1||M>1)&&K(Math.abs(o-e))===K(Math.PI/2)&&!h?(h=!0,p(t,t+Math.sign(o-e)*Math.PI)):{rotation:o,crop:le(w,(t=>K(t,8)))}},m=Math.sign(e)*Math.round(Math.abs(e)/D)*D,g=Pr(e,m+o[0],m+o[1]);return p(t,g)})(o,e,a,c,r,d,u,h,s,l);if(p&&m){const t=kr(r,e,Jt(g.crop));g.crop.x+=.5*g.crop.width,g.crop.y+=.5*g.crop.height,g.crop.x-=.5*t.width,g.crop.y-=.5*t.height,g.crop.width=t.width,g.crop.height=t.height}return n((()=>{t.crop=le(g.crop,(t=>K(t,8)))})),g.rotation}))],["flipX",hr((()=>!1))],["flipY",hr((()=>!1))],["flip",mr((({flipX:t,flipY:e})=>[[t,e],([t,e])=>({x:t,y:e})]))],["isRotatedSideways",gr((({rotation:t})=>[[t],([t],e)=>e(W(t)),(t,e)=>t!==e]))],["crop",ur((t=>(e,o=e)=>{const{loadState:n,size:i,cropMinSize:r,cropMaxSize:a,cropLimitToImage:s,cropAspectRatio:l,rotation:c,perspective:d}=t;if(!e&&!o||!n||!n.beforeComplete)return e;e||(e=_t(kr(i,c,l||Jt(i))));const u=((t,e,o,n,i,r,a,s)=>{const l=vt(a),c=vt(s),d=K(Math.max(e.width/c.width,e.height/c.height)),u=K(Math.min(e.width/l.width,e.height/l.height)),h=Ot(e);if(u<1||d>1){const o=Ut(t),n=Ut(e),i=u<1?u:d,r=(n.x+o.x)/2,a=(n.y+o.y)/2,s=h.width/i,l=h.height/i;Qt(h,r-.5*s,a-.5*l,s,l)}return r?(((t,e,o=0,n=Q(),i)=>{if(ro(o)&&0!==o||n.x||n.y){const i=Jt(t),r=Mr(e,o,n),a=kr(e,o,i);if(!(t.width<a.width&&t.height<a.height)){const e=.5*t.width-.5*a.width,o=.5*t.height-.5*a.height;t.width>a.width&&(t.width=a.width,t.x+=e),t.height>a.height&&(t.height=a.height,t.y+=o)}wr(t,r),Cr(t,r)&&wr(t,r)}else{const o=Jt(t);t.width=Math.min(t.width,e.width),t.height=Math.min(t.height,e.height),t.x=Math.max(t.x,0),t.x+t.width>e.width&&(t.x-=t.x+t.width-e.width),t.y=Math.max(t.y,0),t.y+t.height>e.height&&(t.y-=t.y+t.height-e.height);const n=Ut(t),r=re(t,o);r.width=Math.max(i.width,r.width),r.height=Math.max(i.height,r.height),r.x=n.x-.5*r.width,r.y=n.y-.5*r.height,te(t,r)}})(h,o,n,i,l),{crop:h}):{crop:h}})(o,e,i,c,d,s,r,a),h=le(u.crop,(t=>K(t,8)));return Kt(o,h)?o:h}))],["cropAspectRatio",ur((t=>(e,o)=>{const{loadState:n,crop:i,size:r,rotation:a,cropLimitToImage:s}=t,l=(t=>{if(t){if(/:/.test(t)){const[e,o]=t.split(":");return e/o}return parseFloat(t)}})(e);if(!l)return;if(!i||!n||!n.beforeComplete)return l;const c=o?Math.abs(e-o):1;if(Er(i,r,a)&&s&&c>=.1){const o=((t,e)=>{const o=t.width,n=t.height;return W(e)&&(t.width=n,t.height=o),t})(vt(r),a);t.crop=le(re(_t(o),e),K)}else{const e={width:i.height*l,height:i.height},o=.5*(i.width-e.width),n=.5*(i.height-e.height);t.crop=le(Ht(i.x+o,i.y+n,e.width,e.height),K)}return l}))],["cropOrigin"],["cropMinSize",hr((()=>({width:1,height:1})))],["cropMaxSize",hr((()=>({width:32768,height:32768})))],["cropLimitToImage",hr((()=>!0)),ur((t=>(e,o,n)=>{const{crop:i}=t;return i?(!o&&e&&n((()=>t.crop=Ot(t.crop))),e):e}))],["cropSize",gr((({crop:t})=>[[t],([t],e)=>{t&&e(kt(t.width,t.height))},(t,e)=>St(t,e)]))],["cropRectAspectRatio",mr((({cropSize:t})=>[[t],([t],e)=>{t&&e(K(Jt(t),5))}]))],["cropRange",gr((({size:t,rotation:e,cropRectAspectRatio:o,cropMinSize:n,cropMaxSize:i,cropLimitToImage:r})=>[[t,e,o,n,i,r],([t,e,o,n,i,r],a)=>{if(!t)return;const s=((t,e,o,n,i,r)=>{const a=vt(n),s=vt(i);return r?[a,It(kr(t,e,o),Math.round)]:[a,s]})(t,e,o,n,i,r);a(s)},(t,e)=>Ir(t,e)]))],["rotationRange",gr((({size:t,isRotatedSideways:e,cropMinSize:o,cropSize:n,cropLimitToImage:i})=>[[t,e,o,n,i],([t,e,o,n,i],r)=>{t&&n&&r(((t,e,o,n,i)=>{if(!i)return[-1/0,1/0];const r=Math.max(o.width/n.width,o.height/n.height),a=kt(n.width*r,n.height*r),s=(l=a,Math.sqrt(l.width*l.width+l.height*l.height));var l;if(s<Math.min(t.width,t.height))return[-1/0,1/0];const c=e?t.height:t.width,d=e?t.width:t.height,u=Math.acos(a.height/s),h=u-Math.acos(d/s),p=Math.asin(c/s)-u;if(Number.isNaN(h)&&Number.isNaN(p))return[-1/0,1/0];const m=Number.isNaN(h)?p:Number.isNaN(p)?h:Math.min(h,p);return[-m,m]})(t,e,o,n,i))},(t,e)=>Ir(t,e)]))],["backgroundColor",ur((()=>t=>((t=[0,0,0,0],e=1)=>4===t.length?t:[...t,e])(t)))],["backgroundImage"],["targetSize"],["colorMatrix"],["convolutionMatrix"],["gamma"],["noise"],["vignette"],["duration"],["trim"],["redaction",fr((({size:t})=>[Lr,{context:t}]))],["annotation",fr((({size:t})=>[Lr,{context:t}]))],["decoration",fr((({crop:t})=>[Lr,{context:t}]))],["frame",ur((()=>t=>{if(!t)return;const e={frameStyle:void 0,x:0,y:0,width:"100%",height:"100%",disableStyle:["backgroundColor","strokeColor","strokeWidth"]};return v(t)?e.frameStyle=t:Object.assign(e,t),e}))],["metadata"],["state",pr(((t,e,o)=>{const n=Rr.map((t=>e[t]));let i=!1;const r=cr({}),{subscribe:a}=dr([...n,r],((t,e)=>{if(i)return;const o=Rr.reduce(((e,o,n)=>(e[o]=Ar(t[n]),e)),{});o.crop&&le(o.crop,Math.round),o.redaction=o.redaction&&Tr(o.redaction),o.annotation=o.annotation&&Tr(o.annotation),o.decoration=o.decoration&&Tr(o.decoration),e(o)})),s=t=>{t&&(i=!0,o.cropOrigin=void 0,Rr.filter((e=>ao(t,e))).forEach((e=>{const n=t[e];o[e]=null===n?void 0:Ar(n)})),i=!1,r.set({}))};return{set:s,update:t=>s(t(null)),subscribe:a}}))]],Fr=async(t,e,o={},n)=>{const{ontaskstart:i,ontaskprogress:r,ontaskend:a,token:s}=n;let l=!1;s.cancel=()=>{l=!0};for(const[n,s]of e.entries()){if(l)return;const[e,c]=s;i(n,c);try{t=await e(t,{...o},(t=>r(n,c,t)))}catch(t){throw l=!0,t}a(n,c)}return t};const Br=["loadstart","loadabort","loaderror","loadprogress","load","processstart","processabort","processerror","processprogress","process"],Or=["flip","cropOrigin","isRotatedSideways","perspective","perspectiveX","perspectiveY","cropRange"],Dr=zr.map((([t])=>t)).filter((t=>!Or.includes(t))),_r=t=>{return`image${e=t,e.charAt(0).toUpperCase()+e.slice(1)}`;var e},Wr=t=>ao(t,"crop");var jr=()=>{const{stores:t,accessors:e}=$r(yr),{sub:o,pub:n}=go(),i=()=>e.images?e.images[0]:{};let a={};const s={};Dr.forEach((t=>{Object.defineProperty(e,_r(t),{get:()=>{const e=i();if(e)return e.accessors[t]},set:e=>{a[_r(t)]=e,s[_r(t)]=e;const o=i();o&&(o.accessors[t]=e)}})}));const l=()=>e.images&&e.images[0],c=t.src.subscribe((t=>{if(!t)return e.images=[];e.imageReader&&(e.images.length&&(a={}),u(t))})),d=t.imageReader.subscribe((t=>{t&&(e.images.length||e.src&&u(e.src))})),u=t=>{Promise.resolve().then((()=>p(t,a))).catch((()=>{}))};let h;const p=(t,o={})=>new Promise(((i,c)=>{let d=l();const u=!(!1===o.cropLimitToImage||!1===o.imageCropLimitToImage||!1===s.imageCropLmitedToImage),p=o.cropMinSize||o.imageCropMinSize||s.imageCropMinSize,m=u?p:d&&d.accessors.cropMinSize;d&&g(),d=(({minSize:t={width:1,height:1}}={})=>{const{stores:e,accessors:o}=$r(zr),{pub:n,sub:i}=go(),a=(t,e)=>{const i=()=>o[t]||{},r=e=>o[t]={...i(),...e,timeStamp:Date.now()},a=()=>i().error,s=t=>{a()||(r({error:t}),n(`${e}error`,{...i()}))};return{start(){n(`${e}start`)},onabort(){r({abort:!0}),n(`${e}abort`,{...i()})},ontaskstart(t,o){a()||(r({index:t,task:o,taskProgress:void 0,taskLengthComputable:void 0}),n(`${e}taskstart`,{...i()}))},ontaskprogress(t,o,s){a()||(r({index:t,task:o,taskProgress:s.loaded/s.total,taskLengthComputable:s.lengthComputable}),n(`${e}taskprogress`,{...i()}),n(`${e}progress`,{...i()}))},ontaskend(t,o){a()||(r({index:t,task:o}),n(`${e}taskend`,{...i()}))},ontaskerror(t){s(t)},error(t){s(t)},beforeComplete(t){a()||(r({beforeComplete:!0}),n(`before${e}`,t))},complete(t){a()||(r({complete:!0}),n(e,t))}}};return br(o,{read:(e,{reader:n},i={})=>{if(!n)return;Object.assign(o,{file:void 0,size:void 0,loadState:void 0});let s={cancel:r},l=!1;const c=a("loadState","load"),d={token:s,...c},u={src:e,size:void 0,dest:void 0,duration:void 0};return Promise.resolve().then((async()=>{try{if(c.start(),l)return c.onabort();const e=await Fr(u,n,i,d);if(l)return c.onabort();const{size:r,duration:a,dest:h}=e||{};if(!r||!r.width||!r.height)throw new Be("Image size missing","IMAGE_SIZE_MISSING",e);if(r.width<t.width||r.height<t.height)throw new Be("Image too small","IMAGE_TOO_SMALL",{...e,minWidth:t.width,minHeight:t.height});Object.assign(o,{file:h,size:r,duration:a}),c.beforeComplete(e),c.complete(e)}catch(t){c.error(t)}finally{s=void 0}})),()=>{l=!0,s&&s.cancel(),c.onabort()}},write:(t,e)=>{if(!o.loadState.complete)return;o.processState=void 0;const n=a("processState","process"),i={src:o.file,imageState:o.state,dest:void 0};if(w(t)&&(t=t(o.file,o.state)),!t)return n.start(),void n.complete(i);let s={cancel:r},l=!1;const c=e,d={token:s,...n};return Promise.resolve().then((async()=>{try{if(n.start(),l)return n.onabort();const e=await Fr(i,t,c,d);n.complete(e)}catch(t){n.error(t)}finally{s=void 0}})),()=>{l=!0,s&&s.cancel()}},on:i}),{accessors:o,stores:e}})({minSize:m}),Br.map((t=>{return d.accessors.on(t,(e=t,t=>n(e,t)));var e}));const f=()=>{a={},$.forEach((t=>t()))},$=[];$.push(d.accessors.on("loaderror",(t=>{f(),c(t)}))),$.push(d.accessors.on("loadabort",(()=>{f(),c({name:"AbortError"})}))),$.push(d.accessors.on("load",(t=>{h=void 0,f(),i(t)}))),$.push(d.accessors.on("beforeload",(()=>((t,o)=>{if(Wr(o))return void(e.imageState=o);if(!o.imageCrop){const e=t.accessors.size,n=o.imageRotation||0,i=At(vt(e),n),r=_t(i);r.width=K(Math.abs(r.width),6),r.height=K(Math.abs(r.height),6);const a=o.imageCropAspectRatio||(o.imageCropLimitToImage?Jt(e):Jt(r));let s;o.imageCropLimitToImage?s=re(r,a):(s=ie(r,a),s.x=(e.width-s.width)/2,s.y=(e.height-s.height)/2),o.imageCrop=s}const n=["imageCropLimitToImage","imageCrop","imageCropAspectRatio","imageRotation"];n.filter((t=>ao(o,t))).forEach((t=>{e[t]=o[t],delete o[t]}));const i=Object.keys(o).filter((t=>!n.includes(t))).reduce(((t,e)=>(t[e]=o[e],t)),{});Object.assign(e,i)})(d,o)))),e.images=[d],o.imageReader&&(e.imageReader=o.imageReader),o.imageWriter&&(e.imageWriter=o.imageWriter),h=d.accessors.read(t,{reader:e.imageReader},{willRequest:e.willRequest})}));let m;const g=()=>{const t=l();t&&(h&&h(),t.accessors.loadState=void 0,e.images=[])};return Object.defineProperty(e,"stores",{get:()=>t}),br(e,{on:o,loadImage:p,abortLoadImage:()=>{h&&h(),e.images=[]},editImage:(t,o)=>new Promise(((n,i)=>{p(t,o).then((()=>{const{images:t}=e,o=t[0],r=()=>{a(),s()},a=o.accessors.on("processerror",(t=>{r(),i(t)})),s=o.accessors.on("process",(t=>{r(),n(t)}))})).catch(i)})),removeImage:g,processImage:(t,o)=>new Promise(((n,i)=>{try{const r=[],a=()=>{m=void 0,r.forEach((t=>t()))};(async()=>{(t=>v(t)||lo(t)||$e(t))(t)?await p(t,o):t&&(Wr(t)?e.imageState=t:Object.assign(e,t));const s=l();if(!s)return i("no image");r.push(s.accessors.on("processerror",(t=>{a(),i(t)}))),r.push(s.accessors.on("processabort",(()=>{a(),i({name:"AbortError"})}))),r.push(s.accessors.on("process",(t=>{a(),n(t)}))),m=s.accessors.write(e.imageWriter,{shapePreprocessor:e.shapePreprocessor||O,imageScrambler:e.imageScrambler,willRequest:e.willRequest,willRequestResource:e.willRequestResource})})()}catch(t){i(t)}})),abortProcessImage:()=>{const t=l();t&&(m&&m(),t.accessors.processState=void 0)},destroy:()=>{c&&c(),d&&d()}}),e};var Nr=()=>{if(!Se())return 1/0;const t=/15_/.test(navigator.userAgent);return Ue()?t?14745600:16777216:t?16777216:1/0},Hr=(t,e)=>Object.keys(t).filter((t=>!e.includes(t))).reduce(((e,o)=>(e[o]=t[o],e)),{});const Ur=({imageDataResizer:t,canvasMemoryLimit:e}={})=>async(o,n,i,r)=>{i.width=Math.max(i.width,1),i.height=Math.max(i.height,1),r.width=Math.max(r.width,1),r.height=Math.max(r.height,1);const{dest:a}=await((t,e)=>{const{processImage:o}=jr();return o(t,e)})(n,{imageReader:ya(),imageWriter:xa({format:"canvas",targetSize:{...r,upscale:!0},imageDataResizer:t,canvasMemoryLimit:e}),imageCrop:i});o.drawImage(a,r.x,r.y,r.width,r.height),m(a)},Vr=(t,e=((...t)=>t),o)=>async(n,i,r)=>{r(Le(0,!1));let a=!1;const s=await t(...e(n,i,(t=>{a=!0,r(t)})));return o&&o(n,s),a||r(Le(1,!1)),n},Zr=({willRequest:t,srcProp:e="src",destProp:o="dest"}={})=>[Vr(We,((o,n,i)=>[o[e],i,{...n,willRequest:t}]),((t,e)=>t[o]=e)),"any-to-file"],Gr=({srcProp:t="src",destProp:e="size"}={})=>[Vr(Ee,(e=>[e[t]]),((t,o)=>t[e]=o)),"read-image-size"],qr=async t=>{const e=await Te(t);if(Ie(e))return await(o=e,new Promise(((t,e)=>{const n=()=>t(o.duration);if(o.readyState>=1)return n();o.onloadedmetadata=n,o.onerror=e})));var o},Xr=({srcProp:t="src",destProp:e="duration"}={})=>[Vr(qr,(e=>[e[t]]),((t,o)=>t[e]=o)),"read-image-size"],Yr=({srcSize:t="size",srcOrientation:e="orientation",destSize:o="size"}={})=>[Vr(Ve,(o=>[o[t],o[e]]),((t,e)=>t[o]=e)),"image-size-match-orientation"],Kr=({srcProp:t="src",destProp:e="head"}={})=>[Vr(((t,e)=>Ze(t)?(async(t,e=[0,t.size],o)=>await((t,e=r,o={})=>new Promise(((n,r)=>{const{dataFormat:s=a.ArrayBuffer}=o,l=new(i("FileReader"));l.onload=()=>n(l.result),l.onerror=r,l.onprogress=e,l[s](t)})))(t.slice(...e),o))(t,e):void 0),(e=>[e[t],[0,131072],onprogress]),((t,o)=>t[e]=o)),"read-image-head"],Jr=({srcProp:t="head",destProp:e="orientation"}={})=>[Vr(o,(e=>[e[t],274]),((t,o=1)=>t[e]=o)),"read-exif-orientation-tag"],Qr=({srcProp:t="head"}={})=>[Vr(o,(e=>[e[t],274,1])),"clear-exif-orientation-tag"],ta=({srcImageSize:t="size",srcCanvasSize:e="imageData",srcImageState:o="imageState",destImageSize:n="size",destScalar:i="scalar"}={})=>[Vr(((t,e)=>[Math.min(e.width/t.width,e.height/t.height),wt(e)]),(n=>[n[t],n[e],n[o]]),((t,[e,o])=>{t[i]=e,t[n]=o})),"calculate-canvas-scalar"],ea=({srcProp:t="src",destProp:e="imageData",canvasMemoryLimit:o})=>[Vr(R,(e=>[e[t],o]),((t,o)=>t[e]=o)),"blob-to-image-data"],oa=({srcImageData:t="imageData",srcOrientation:e="orientation"}={})=>[Vr($,(o=>[o[t],o[e]]),((t,e)=>t.imageData=e)),"image-data-match-orientation"],na=({srcImageData:t="imageData",srcImageState:e="imageState"}={})=>[Vr(vn,(o=>[o[t],{backgroundColor:o[e].backgroundColor,backgroundImage:o[e].backgroundImage}]),((t,e)=>t.imageData=e)),"image-data-fill"],ia=({srcImageData:t="imageData",srcImageState:e="imageState",destScalar:o="scalar"}={})=>[Vr(Xe,(n=>{const i=n[o];let{crop:r}=n[e];return r&&1!==i&&(r=Zt(Ot(r),i,Q())),[n[t],{crop:r,rotation:n[e].rotation,flipX:n[e].flipX,flipY:n[e].flipY}]}),((t,e)=>t.imageData=e)),"image-data-crop"],ra=({targetSize:t={width:void 0,height:void 0,fit:void 0,upscale:void 0},imageDataResizer:e,srcProp:o="imageData",srcImageState:n="imageState",destImageScaledSize:i="imageScaledSize"})=>[Vr(Je,(i=>{const r=Math.min(t.width||Number.MAX_SAFE_INTEGER,i[n].targetSize&&i[n].targetSize.width||Number.MAX_SAFE_INTEGER),a=Math.min(t.height||Number.MAX_SAFE_INTEGER,i[n].targetSize&&i[n].targetSize.height||Number.MAX_SAFE_INTEGER);return[i[o],{width:r,height:a,fit:t.fit||"contain",upscale:(s=i[n],!!(s.targetSize&&s.targetSize.width||s.targetSize&&s.targetSize.height)||t.upscale||!1)},e];var s}),((t,e)=>{St(t.imageData,e)||(t[i]=wt(e)),t.imageData=e})),"image-data-resize"],aa=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:o="imageData"}={})=>[Vr(io,(o=>{const{colorMatrix:n}=o[e],i=n&&Object.keys(n).map((t=>n[t])).filter(Boolean);return[o[t],{colorMatrix:i&&wn(i),convolutionMatrix:o[e].convolutionMatrix,gamma:o[e].gamma,noise:o[e].noise,vignette:o[e].vignette}]}),((t,e)=>t[o]=e)),"image-data-filter"],sa=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:o="imageData",destScalar:n="scalar"}={})=>[Vr((async(t,e,o,n,i)=>{if(!e)return t;let r;try{const i={dataSizeScalar:Cn(t,n)};o&&o[3]>0&&(i.backgroundColor=[...o]),r=await e(t,i)}catch(t){}const a=h("canvas");a.width=t.width,a.height=t.height;const s=a.getContext("2d");s.putImageData(t,0,0);const l=new Path2D;n.forEach((t=>{const e=Ht(t.x,t.y,t.width,t.height);Xt(e,i);const o=ee(Ot(e),t.rotation),n=new Path2D;o.forEach(((t,e)=>{if(0===e)return n.moveTo(t.x,t.y);n.lineTo(t.x,t.y)})),l.addPath(n)})),s.clip(l,"nonzero"),s.imageSmoothingEnabled=!1,s.drawImage(r,0,0,a.width,a.height),m(r);const c=s.getImageData(0,0,a.width,a.height);return m(a),c}),((o,{imageScrambler:i})=>[o[t],i,o[e].backgroundColor,o[e].redaction,o[n]]),((t,e)=>t[o]=e)),"image-data-redact"],la=({srcImageData:t="imageData",srcSize:e="size",srcImageState:o="imageState",destImageData:n="imageData",destImageScaledSize:i="imageScaledSize",destScalar:r="scalar",imageDataResizer:a,canvasMemoryLimit:s}={})=>[Vr(xn,((n,{shapePreprocessor:l,willRequestResource:c,willRequest:d})=>{const{annotation:u}=n[o];if(!u.length)return[n[t]];const h=n[r],{crop:p}=n[o],m=n[e];let g=h;const f=n[i];f&&(g=Math.min(f.width/p.width,f.height/p.height));const $={width:m.width/h,height:m.height/h};return[n[t],{shapes:u,computeShape:t=>(t=Jo(t,$),t=Hr(t,["left","right","top","bottom"]),on(t,g)),transform:t=>{const a=n[e],{rotation:s=0,flipX:l,flipY:c,cropLimitToImage:d}=n[o],u=n[r],{crop:h=_t(a)}=n[o],p=n[i],m=p?Math.min(p.width/h.width,p.height/h.height):1,g={width:a.width/u*m,height:a.height/u*m},f=((t,e)=>{const o=_t(t),n=Ut(o),i=ee(o,e,n);return de(jt(i))})(g,s),$=f.width,y=f.height,b=.5*g.width-.5*$,x=.5*g.height-.5*y,v=Rt(g);t.translate(-b,-x),t.translate(-h.x*m,-h.y*m),t.translate(v.x,v.y),t.rotate(s),t.translate(-v.x,-v.y),t.scale(l?-1:1,c?-1:1),t.translate(l?-g.width:0,c?-g.height:0),d&&(t.rect(0,0,g.width,g.height),t.clip())},drawImage:Ur({imageDataResizer:a,canvasMemoryLimit:s}),preprocessShape:t=>l(t,{isPreview:!1,...n[o]}),canvasMemoryLimit:s,willRequest:d||c}]}),((t,e)=>t[n]=e)),"image-data-annotate"],ca=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:o="imageData",destImageScaledSize:n="imageScaledSize",imageDataResizer:i,canvasMemoryLimit:r,destScalar:a="scalar"}={})=>[Vr(xn,((o,{shapePreprocessor:s,willRequestResource:l,willRequest:c})=>{const{decoration:d}=o[e];if(!d.length)return[o[t]];let u=o[a];const{crop:h}=o[e],p=o[n];if(p){const t=Math.min(p.width/h.width,p.height/h.height);u=t}return[o[t],{shapes:d,drawImage:Ur({imageDataResizer:i,canvasMemoryLimit:r}),computeShape:t=>(t=Jo(t,h),t=Hr(t,["left","right","top","bottom"]),on(t,u)),preprocessShape:t=>s(t,{isPreview:!1,...o[e]}),canvasMemoryLimit:r,willRequest:c||l}]}),((t,e)=>t[o]=e)),"image-data-decorate"],da=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:o="imageData",destImageScaledSize:n="imageScaledSize",imageDataResizer:i,canvasMemoryLimit:r,destScalar:a="scalar"}={})=>[Vr(xn,((o,{shapePreprocessor:s,willRequestResource:l,willRequest:c})=>{const d=o[e].frame;if(!d)return[o[t]];const u=o[a];let{crop:h}=o[e];h&&1!==u&&(h=Zt(Ot(h),u,Q()));const p={...h},m=Qo(tn(d,p,s),p);p.x=Math.abs(m.left),p.y=Math.abs(m.top),p.width+=Math.abs(m.left)+Math.abs(m.right),p.height+=Math.abs(m.top)+Math.abs(m.bottom);const g=o[n],f=g?Math.min(g.width/h.width,g.height/h.height):1;return Xt(p,f),p.x=Math.floor(p.x),p.y=Math.floor(p.y),p.width=Math.floor(p.width),p.height=Math.floor(p.height),[o[t],{shapes:[d],contextBounds:p,computeShape:e=>Jo(e,o[t]),transform:t=>{t.translate(p.x,p.y)},drawImage:Ur({imageDataResizer:i,canvasMemoryLimit:r}),preprocessShape:t=>s(t,{isPreview:!1,...o[e]}),canvasMemoryLimit:r,willRequest:c||l}]}),((t,e)=>t[o]=e)),"image-data-frame"],ua=({mimeType:t,quality:e,srcImageData:o="imageData",srcFile:n="src",destBlob:i="blob"}={})=>[Vr(T,(i=>[i[o],t||z(i[n].name)||i[n].type,e]),((t,e)=>t[i]=e)),"image-data-to-blob"],ha=({srcImageData:t="imageData",srcOrientation:e="orientation",destCanvas:o="dest"}={})=>[Vr(f,(o=>[o[t],o[e]]),((t,e)=>t[o]=e)),"image-data-to-canvas"],pa=async(t,o)=>{if(!Ze(t)||!o)return t;const n=new DataView(o),i=e(n);if(!i||!i.exif)return t;const r=["exif","mpf","xmp"].reduce(((t,e)=>i[e]?Math.max(t,i[e].offset+i[e].size):t),0);return((t,e,o=[0,t.size])=>e?new Blob([e,t.slice(...o)],{type:t.type}):t)(t,o.slice(0,r+2),[20])},ma=(t="blob",e="head",o="blob")=>[Vr(pa,(o=>[o[t],o[e]]),((t,e)=>t[o]=e)),"blob-write-image-head"],ga=({renameFile:t,srcBlob:e="blob",srcFile:o="src",destFile:n="dest",defaultFilename:i}={})=>[Vr(F,(n=>[n[e],t?t(n[o]):n[o].name||`${i}.${E(n[e].type)}`]),((t,e)=>t[n]=e)),"blob-to-file"],fa=({url:t="./",dataset:e=(t=>[["dest",t.dest,t.dest.name],["imageState",t.imageState]]),destStore:o="store",credentials:n,headers:i={}})=>[Vr((async(e,o)=>await((t,e,o)=>new Promise(((n,i)=>{const{token:a={},beforeSend:s=r,onprogress:l=r}=o;a.cancel=()=>c.abort();const c=new XMLHttpRequest;c.upload.onprogress=l,c.onload=()=>c.status>=200&&c.status<300?n(c):i(c),c.onerror=()=>i(c),c.ontimeout=()=>i(c),c.open("POST",encodeURI(t)),s(c),c.send(e instanceof FormData?e:e.reduce(((t,e)=>(t.append(...e.map(Ge)),t)),new FormData))})))(t,e,{onprogress:o,beforeSend:t=>Oe(t,{headers:i,credentials:n})})),((t,o,n)=>[e(t),n]),((t,e)=>t[o]=e)),"store"],$a=t=>[Vr((e=>t&&t.length?(Object.keys(e).forEach((o=>{t.includes(o)||delete e[o]})),e):e)),"prop-filter"],ya=(t={})=>{const{orientImage:e=!0,outputProps:o=["src","dest","size","duration"],preprocessImageFile:n,request:i={}}=t;return[Zr({willRequest:()=>i}),n&&[Vr(n,((t,e,o)=>[t.dest,e,o]),((t,e)=>t.dest=e)),"preprocess-image-file"],Gr({srcProp:"dest"}),Xr({srcProp:"dest"}),e&&Kr({srcProp:"dest"}),e&&Jr(),e&&Yr(),$a(o)].filter(Boolean)},ba=t=>t&&(v(t)?fa({url:t}):w(t)?[t,"store"]:fa(t)),xa=(t={})=>(e,o,n={})=>{if(!Ae(e))return;const{canvasMemoryLimit:i=Nr(),orientImage:r=!0,copyImageHead:a=!0,mimeType:s,quality:l,renameFile:c,targetSize:d,imageDataResizer:u,store:h,format:p="file",outputProps:m=["src","dest","imageState","store"],preprocessImageSource:g,preprocessImageState:f,postprocessImageData:$,postprocessImageBlob:y}={...t,...n};return[g&&[Vr(g,((t,e,o)=>[t.src,e,o,t.imageState]),((t,e)=>t.src=e)),"preprocess-image-source"],(r||a)&&Kr(),r&&Jr(),Gr(),f&&[Vr(f,((t,e,o)=>[t.imageState,e,o]),((t,e)=>t.imageState=e)),"preprocess-image-state"],ea({canvasMemoryLimit:i}),r&&Yr(),r&&oa(),ta(),sa(),ia(),ra({imageDataResizer:u,targetSize:d}),aa(),na(),la({imageDataResizer:u,canvasMemoryLimit:i}),ca({imageDataResizer:u,canvasMemoryLimit:i}),da({imageDataResizer:u,canvasMemoryLimit:i}),$&&[Vr($,((t,e,o)=>[t.imageData,e,o]),((t,e)=>t.imageData=e)),"postprocess-image-data"],"file"===p?ua({mimeType:s,quality:l}):"canvas"===p?ha():[t=>(t.dest=t.imageData,t)],"file"===p&&r&&Qr(),"file"===p&&a&&ma(),y&&[Vr(y,(({blob:t,imageData:e,src:o},n,i)=>[{blob:t,imageData:e,src:o},n,i]),((t,e)=>t.blob=e)),"postprocess-image-file"],"file"===p&&ga({defaultFilename:"image",renameFile:c}),"file"===p?ba(h):w(h)&&[h,"store"],$a(m)].filter(Boolean)};let va=null;var wa=()=>{if(null===va)if("WebGL2RenderingContext"in window){let t;try{t=h("canvas"),va=!!t.getContext("webgl2")}catch(t){va=!1}t&&m(t),t=void 0}else va=!1;return va},Ca=t=>0==(t&t-1),Ma=(t,e={},o="",n="")=>Object.keys(e).filter((t=>!y(e[t]))).reduce(((t,i)=>t.replace(new RegExp(o+i+n),e[i])),t);const ka={head:"#version 300 es\n\nin vec4 aPosition;uniform mat4 uMatrix;",text:"\nin vec2 aTexCoord;out vec2 vTexCoord;",matrix:"\ngl_Position=uMatrix*vec4(aPosition.x,aPosition.y,0,1);"},Sa={head:"#version 300 es\nprecision highp float;\n\nout vec4 fragColor;",mask:"\nuniform float uMaskFeather[8];uniform float uMaskBounds[4];uniform float uMaskOpacity;float mask(float x,float y,float bounds[4],float opacity){return 1.0-(1.0-(smoothstep(bounds[3],bounds[3]+1.0,x)*(1.0-smoothstep(bounds[1]-1.0,bounds[1],x))*(1.0-step(bounds[0],y))*step(bounds[2],y)))*(1.0-opacity);}",init:"\nfloat a=1.0;vec4 fillColor=uColor;vec4 textureColor=texture(uTexture,vTexCoord);textureColor*=(1.0-step(1.0,vTexCoord.y))*step(0.0,vTexCoord.y)*(1.0-step(1.0,vTexCoord.x))*step(0.0,vTexCoord.x);",colorize:"\nif(uTextureColor.a!=0.0&&textureColor.a>0.0){vec3 colorFlattened=textureColor.rgb/textureColor.a;if(colorFlattened.r>=.9999&&colorFlattened.g==0.0&&colorFlattened.b>=.9999){textureColor.rgb=uTextureColor.rgb*textureColor.a;}textureColor*=uTextureColor.a;}",maskapply:"\nfloat m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);",maskfeatherapply:"\nfloat leftFeatherOpacity=step(uMaskFeather[1],gl_FragCoord.x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],gl_FragCoord.x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],gl_FragCoord.x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],gl_FragCoord.x));a*=leftFeatherOpacity*rightFeatherOpacity;",edgeaa:"\nvec2 scaledPoint=vec2(vRectCoord.x*uSize.x,vRectCoord.y*uSize.y);a*=smoothstep(0.0,1.0,uSize.x-scaledPoint.x);a*=smoothstep(0.0,1.0,uSize.y-scaledPoint.y);a*=smoothstep(0.0,1.0,scaledPoint.x);a*=smoothstep(0.0,1.0,scaledPoint.y);",cornerradius:"\nvec2 s=(uSize-2.0)*.5;vec2 r=(vRectCoord*uSize);vec2 p=r-(uSize*.5);float cornerRadius=uCornerRadius[0];bool left=r.x<s.x;bool top=r.y<s.x;if(!left&&top){cornerRadius=uCornerRadius[1];}if(!left&&!top){cornerRadius=uCornerRadius[3];}if(left&&!top){cornerRadius=uCornerRadius[2];}a*=1.0-clamp(length(max(abs(p)-(s-cornerRadius),0.0))-cornerRadius,0.0,1.0);",fragcolor:"\nif(m<=0.0)discard;fillColor.a*=a;fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);textureColor*=uTextureOpacity;textureColor.a*=a;textureColor.rgb*=m*a;textureColor.rgb+=(1.0-m)*(uCanvasColor.rgb*textureColor.a);fragColor=textureColor+(fillColor*(1.0-textureColor.a));"},Pa=(t,e,o)=>{const n=t.createShader(o),i=((t,e,o)=>(e=Ma(e,o===t.VERTEX_SHADER?ka:Sa,"##").trim(),wa()?e:(e=(e=e.replace(/#version.+/gm,"").trim()).replace(/^\/\/\#/gm,"#"),o===t.VERTEX_SHADER&&(e=e.replace(/in /gm,"attribute ").replace(/out /g,"varying ")),o===t.FRAGMENT_SHADER&&(e=e.replace(/in /gm,"varying ").replace(/out.*?;/gm,"").replace(/texture\(/g,"texture2D(").replace(/fragColor/g,"gl_FragColor")),`${e}`)))(t,e,o);return t.shaderSource(n,i),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)||console.error(t.getShaderInfoLog(n)),n},Ra=(t,e,o,n,i)=>{const r=Pa(t,e,t.VERTEX_SHADER),a=Pa(t,o,t.FRAGMENT_SHADER),s=t.createProgram();t.attachShader(s,r),t.attachShader(s,a),t.linkProgram(s);const l={};return n.forEach((e=>{l[e]=t.getAttribLocation(s,e)})),i.forEach((e=>{l[e]=t.getUniformLocation(s,e)})),{program:s,locations:l,destroy(){t.detachShader(s,r),t.detachShader(s,a),t.deleteShader(r),t.deleteShader(a),t.deleteProgram(s)}}},Aa=t=>"VIDEO"!==t.nodeName&&(!!wa()||Ca(t.width)&&Ca(t.height)),Ta=(t,e=1)=>t?[t[0],t[1],t[2],ro(t[3])?e*t[3]:e]:[0,0,0,0],Ia=()=>{const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},Ea=(t,e,o,n,i,r,a)=>{const s=1/(e-o),l=1/(n-i),c=1/(r-a);t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+o)*s,t[13]=(i+n)*l,t[14]=(a+r)*c,t[15]=1},La=(t,e,o,n)=>{t[12]=t[0]*e+t[4]*o+t[8]*n+t[12],t[13]=t[1]*e+t[5]*o+t[9]*n+t[13],t[14]=t[2]*e+t[6]*o+t[10]*n+t[14],t[15]=t[3]*e+t[7]*o+t[11]*n+t[15]},za=(t,e)=>{t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=e,t[4]*=e,t[5]*=e,t[6]*=e,t[7]*=e,t[8]*=e,t[9]*=e,t[10]*=e,t[11]*=e},Fa=(t,e)=>{const o=Math.sin(e),n=Math.cos(e),i=t[4],r=t[5],a=t[6],s=t[7],l=t[8],c=t[9],d=t[10],u=t[11];t[4]=i*n+l*o,t[5]=r*n+c*o,t[6]=a*n+d*o,t[7]=s*n+u*o,t[8]=l*n-i*o,t[9]=c*n-r*o,t[10]=d*n-a*o,t[11]=u*n-s*o},Ba=(t,e)=>{const o=Math.sin(e),n=Math.cos(e),i=t[0],r=t[1],a=t[2],s=t[3],l=t[8],c=t[9],d=t[10],u=t[11];t[0]=i*n-l*o,t[1]=r*n-c*o,t[2]=a*n-d*o,t[3]=s*n-u*o,t[8]=i*o+l*n,t[9]=r*o+c*n,t[10]=a*o+d*n,t[11]=s*o+u*n},Oa=(t,e)=>{const o=Math.sin(e),n=Math.cos(e),i=t[0],r=t[1],a=t[2],s=t[3],l=t[4],c=t[5],d=t[6],u=t[7];t[0]=i*n+l*o,t[1]=r*n+c*o,t[2]=a*n+d*o,t[3]=s*n+u*o,t[4]=l*n-i*o,t[5]=c*n-r*o,t[6]=d*n-a*o,t[7]=u*n-s*o};var Da=(t,e)=>wa()?t.getContext("webgl2",e):t.getContext("webgl",e)||t.getContext("experimental-webgl",e);const _a=(t,e)=>{const o=t.length;return e>=o?t[e%o]:e<0?t[e%o+o]:t[e]},Wa=(t,e,o,n)=>{const i=tt(o.x-e.x,o.y-e.y),r=tt(n.x-o.x,n.y-o.y),a=tt(e.x-n.x,e.y-n.y),s=tt(t.x-e.x,t.y-e.y),l=tt(t.x-o.x,t.y-o.y),c=tt(t.x-n.x,t.y-n.y),d=pt(i,s),u=pt(r,l),h=pt(a,c);return d<=0&&u<=0&&h<=0},ja=(t,e,o,n,i)=>{const r=st(tt(n.x-o.x,n.y-o.y)),a=st(tt(i.x-n.x,i.y-n.y)),s=st(tt(r.x+a.x,r.y+a.y)),l=tt(-s.y,s.x),c=tt(-r.y,r.x),d=Math.min(1/((t,e)=>t.x*e.x+t.y*e.y)(l,c),5);t[e]=n.x,t[e+1]=n.y,t[e+2]=l.x*d,t[e+3]=l.y*d,t[e+4]=-1,t[e+5]=n.x,t[e+6]=n.y,t[e+7]=l.x*d,t[e+8]=l.y*d,t[e+9]=1},Na=t=>{const e=new Float32Array(8);return e[0]=t[3].x,e[1]=t[3].y,e[2]=t[0].x,e[3]=t[0].y,e[4]=t[2].x,e[5]=t[2].y,e[6]=t[1].x,e[7]=t[1].y,e},Ha=(t,e=0,o,n)=>{const i=se(t),r=t.x+.5*t.width,a=t.y+.5*t.height;return(o||n)&&yt(i,o,n,r,a),0!==e&&bt(i,e,r,a),i},Ua=(t,e,o,n,i)=>{const r=Math.min(20,Math.max(4,Math.round(n/2)));let a=0,s=0,l=0,c=0,d=0;for(;d<r;d++)a=d/r,s=i*D+a*D,l=n*Math.cos(s),c=n*Math.sin(s),t.push(tt(e+l,o+c))};let Va=null;var Za=()=>{if(null!==Va)return Va;let t=h("canvas");const e=Da(t);return Va=e?e.getParameter(e.MAX_TEXTURE_SIZE):void 0,m(t),t=void 0,Va};let Ga=null;var qa=()=>(null===Ga&&(Ga=Ne(/Firefox/)),Ga);const Xa=new Float32Array([0,1,0,0,1,1,1,0]),Ya=new Float32Array([1,0,0,0,1,1,0,1]),Ka=l()&&qa(),Ja=[0,0,0,0,1,0,0,0,0],Qa=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],ts=[0,0,0,0],es=[0,0,0,0],os=(t,e,o,n,i)=>{if(!o||!n)return Xa;const r=n.x/o.width,a=n.y/o.height;let s=t/o.width/i,l=e/o.height/i;return s-=r,l-=a,new Float32Array([-r,l,-r,-a,s,l,s,-a])};var ns=(t,e={})=>{const{alpha:o=!1}=e,n={width:0,height:0},i={width:0,height:0},r=Za()||1024;let a,s,l;const c=Ia(),d=Ia();let u,h,p,g,f,$,y,b,x,v=0,w=0,C=0,M=1;const k=new Map([]),S=()=>{A.stencilOp(A.KEEP,A.KEEP,A.KEEP),A.stencilFunc(A.ALWAYS,1,255),A.stencilMask(255)},P=30*Math.PI/180,R=Math.tan(P/2),A=Da(t,{alpha:o,antialias:!1,premultipliedAlpha:!0,stencil:!0});if(!A)return;A.getExtension("OES_standard_derivatives"),A.disable(A.DEPTH_TEST),A.enable(A.STENCIL_TEST),A.enable(A.BLEND),A.blendFunc(A.ONE,A.ONE_MINUS_SRC_ALPHA),A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!qa()),S();const T=A.createTexture();A.bindTexture(A.TEXTURE_2D,T),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,1,1,0,A.RGBA,A.UNSIGNED_BYTE,new Uint8Array(ts)),k.set(0,T);const I=A.createTexture();k.set(2,I);const E=A.createFramebuffer(),L=A.createTexture();k.set(1,L);const z=A.createFramebuffer(),F=Ra(A,"\n##head\n##text\nvoid main(){vTexCoord=aTexCoord;gl_Position=uMatrix*aPosition;}","\n##head\nin vec2 vTexCoord;uniform sampler2D uTexture;uniform sampler2D uTextureOverlay;uniform sampler2D uTextureBlend;uniform vec2 uTextureSize;uniform float uOpacity;uniform int uAntialias;uniform vec4 uOverlayColor;uniform mat4 uColorMatrix;uniform vec4 uColorOffset;uniform float uClarityKernel[9];uniform float uClarityKernelWeight;uniform float uColorGamma;uniform float uColorVignette;uniform float uMaskClip;uniform float uMaskOpacity;uniform float uMaskBounds[4];uniform float uMaskCornerRadius[4];uniform float uMaskFeather[8];vec4 applyGamma(vec4 c,float g){c.r=pow(c.r,g);c.g=pow(c.g,g);c.b=pow(c.b,g);return c;}vec4 applyColorMatrix(vec4 c,mat4 m,vec4 o){return(c*m)+(o*c.a);}vec4 applyConvolutionMatrix(vec4 c,float k0,float k1,float k2,float k3,float k4,float k5,float k6,float k7,float k8,float w){vec2 pixel=vec2(1)/uTextureSize;vec4 colorSum=texture(uTexture,vTexCoord-pixel)*k0+texture(uTexture,vTexCoord+pixel*vec2(0.0,-1.0))*k1+texture(uTexture,vTexCoord+pixel*vec2(1.0,-1.0))*k2+texture(uTexture,vTexCoord+pixel*vec2(-1.0,0.0))*k3+texture(uTexture,vTexCoord)*k4+texture(uTexture,vTexCoord+pixel*vec2(1.0,0.0))*k5+texture(uTexture,vTexCoord+pixel*vec2(-1.0,1.0))*k6+texture(uTexture,vTexCoord+pixel*vec2(0.0,1.0))*k7+texture(uTexture,vTexCoord+pixel)*k8;vec4 color=vec4(clamp((colorSum/w),0.0,1.0).rgb,c.a);return color;}vec4 applyVignette(vec4 c,vec2 pos,vec2 center,float v){float d=distance(pos,center)/length(center);float f=1.0-(d*abs(v));if(v>0.0){c.rgb*=f;}else if(v<0.0){c.rgb+=(1.0-f)*(1.0-c.rgb);}return c;}vec4 blendPremultipliedAlpha(vec4 back,vec4 front){return front+(back*(1.0-front.a));}void main(){float x=gl_FragCoord.x;float y=gl_FragCoord.y;float a=1.0;float maskTop=uMaskBounds[0];float maskRight=uMaskBounds[1];float maskBottom=uMaskBounds[2];float maskLeft=uMaskBounds[3];float leftFeatherOpacity=step(uMaskFeather[1],x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],x));a*=leftFeatherOpacity*rightFeatherOpacity;float overlayColorAlpha=(smoothstep(maskLeft,maskLeft+1.0,x)*(1.0-smoothstep(maskRight-1.0,maskRight,x))*(1.0-step(maskTop,y))*step(maskBottom,y));if(uOverlayColor.a==0.0){a*=overlayColorAlpha;}vec2 offset=vec2(maskLeft,maskBottom);vec2 size=vec2(maskRight-maskLeft,maskTop-maskBottom)*.5;vec2 center=offset.xy+size.xy;int pixelX=int(step(center.x,x));int pixelY=int(step(y,center.y));float cornerRadius=0.0;if(pixelX==0&&pixelY==0)cornerRadius=uMaskCornerRadius[0];if(pixelX==1&&pixelY==0)cornerRadius=uMaskCornerRadius[1];if(pixelX==0&&pixelY==1)cornerRadius=uMaskCornerRadius[2];if(pixelX==1&&pixelY==1)cornerRadius=uMaskCornerRadius[3];float cornerOffset=sign(cornerRadius)*length(max(abs(gl_FragCoord.xy-size-offset)-size+cornerRadius,0.0))-cornerRadius;float cornerOpacity=1.0-smoothstep(0.0,1.0,cornerOffset);a*=cornerOpacity;if(uAntialias==1){vec2 scaledPoint=vec2(vTexCoord.x*uTextureSize.x,vTexCoord.y*uTextureSize.y);a*=smoothstep(0.0,1.0,uTextureSize.x-scaledPoint.x);a*=smoothstep(0.0,1.0,uTextureSize.y-scaledPoint.y);a*=smoothstep(0.0,1.0,scaledPoint.x);a*=smoothstep(0.0,1.0,scaledPoint.y);}vec4 color=texture(uTexture,vTexCoord);if(uClarityKernelWeight!=-1.0){color=applyConvolutionMatrix(color,uClarityKernel[0],uClarityKernel[1],uClarityKernel[2],uClarityKernel[3],uClarityKernel[4],uClarityKernel[5],uClarityKernel[6],uClarityKernel[7],uClarityKernel[8],uClarityKernelWeight);}color=blendPremultipliedAlpha(color,texture(uTextureBlend,vTexCoord));color=applyGamma(color,uColorGamma);color=applyColorMatrix(color,uColorMatrix,uColorOffset);color*=a;if(uColorVignette!=0.0){vec2 pos=gl_FragCoord.xy-offset;color=applyVignette(color,pos,center-offset,uColorVignette);}color=blendPremultipliedAlpha(color,texture(uTextureOverlay,vTexCoord));if(overlayColorAlpha<=0.0){color*=1.0-uOverlayColor.a;}color*=uOpacity;fragColor=color;}",["aPosition","aTexCoord"],["uMatrix","uTexture","uTextureBlend","uTextureOverlay","uTextureSize","uColorGamma","uColorVignette","uColorOffset","uColorMatrix","uClarityKernel","uClarityKernelWeight","uOpacity","uMaskOpacity","uMaskBounds","uMaskCornerRadius","uMaskFeather","uOverlayColor","uAntialias"]),O=A.createBuffer(),D=A.createBuffer();A.bindBuffer(A.ARRAY_BUFFER,D),A.bufferData(A.ARRAY_BUFFER,Xa,A.STATIC_DRAW);const _=A.createBuffer();A.bindBuffer(A.ARRAY_BUFFER,_),A.bufferData(A.ARRAY_BUFFER,Ya,A.STATIC_DRAW);const W=Ra(A,"#version 300 es\n\nin vec4 aPosition;in vec2 aNormal;in float aMiter;out vec2 vNormal;out float vMiter;out float vWidth;uniform float uWidth;uniform float uSharpness;uniform mat4 uMatrix;void main(){vMiter=aMiter;vNormal=aNormal;vWidth=(uWidth*.5)+uSharpness;gl_Position=uMatrix*vec4(aPosition.x+(aNormal.x*vWidth*aMiter),aPosition.y+(aNormal.y*vWidth*aMiter),0,1);}","\n##head\n##mask\nin vec2 vNormal;in float vMiter;in float vWidth;uniform float uWidth;uniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;float m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);if(m<=0.0)discard;fillColor.a*=clamp(smoothstep(vWidth-.5,vWidth-1.0,abs(vMiter)*vWidth),0.0,1.0);fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}",["aPosition","aNormal","aMiter"],["uColor","uCanvasColor","uMatrix","uWidth","uSharpness","uMaskBounds","uMaskOpacity"]),j=A.createBuffer(),N=(t,e,o,n=!1)=>{const{program:i,locations:r}=W;A.useProgram(i),A.enableVertexAttribArray(r.aPosition),A.enableVertexAttribArray(r.aNormal),A.enableVertexAttribArray(r.aMiter);const a=((t,e)=>{let o,n,i,r=0;const a=t.length,s=new Float32Array(10*(e?a+1:a)),l=t[0],c=t[a-1];for(r=0;r<a;r++)o=t[r-1],n=t[r],i=t[r+1],o||(o=e?c:tt(n.x+(n.x-i.x),n.y+(n.y-i.y))),i||(i=e?l:tt(n.x+(n.x-o.x),n.y+(n.y-o.y))),ja(s,10*r,o,n,i);return e&&ja(s,10*a,c,l,t[1]),s})(t,n),s=5*Float32Array.BYTES_PER_ELEMENT,c=2*Float32Array.BYTES_PER_ELEMENT,d=4*Float32Array.BYTES_PER_ELEMENT;A.uniform1f(r.uWidth,e),A.uniform1f(r.uSharpness,l),A.uniform4fv(r.uColor,o),A.uniformMatrix4fv(r.uMatrix,!1,u),A.uniform4f(r.uCanvasColor,v,w,C,M),A.uniform1fv(r.uMaskBounds,y),A.uniform1f(r.uMaskOpacity,$),A.bindBuffer(A.ARRAY_BUFFER,j),A.bufferData(A.ARRAY_BUFFER,a,A.STATIC_DRAW),A.vertexAttribPointer(r.aPosition,2,A.FLOAT,!1,s,0),A.vertexAttribPointer(r.aNormal,2,A.FLOAT,!1,s,c),A.vertexAttribPointer(r.aMiter,1,A.FLOAT,!1,s,d),A.drawArrays(A.TRIANGLE_STRIP,0,a.length/5),A.disableVertexAttribArray(r.aPosition),A.disableVertexAttribArray(r.aNormal),A.disableVertexAttribArray(r.aMiter)},H=Ra(A,"\n##head\nvoid main(){\n##matrix\n}","\n##head\n##mask\nuniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;\n##maskapply\nfillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}",["aPosition"],["uColor","uCanvasColor","uMatrix","uMaskBounds","uMaskOpacity"]),U=A.createBuffer(),V=Ra(A,"\n##head\n##text\nin vec2 aRectCoord;out vec2 vRectCoord;void main(){vTexCoord=aTexCoord;vRectCoord=aRectCoord;\n##matrix\n}","\n##head\n##mask\nin vec2 vTexCoord;in vec2 vRectCoord;uniform sampler2D uTexture;uniform vec4 uTextureColor;uniform float uTextureOpacity;uniform vec4 uColor;uniform float uCornerRadius[4];uniform vec2 uSize;uniform vec2 uPosition;uniform vec4 uCanvasColor;uniform int uInverted;void main(){\n##init\n##colorize\n##edgeaa\n##cornerradius\n##maskfeatherapply\nif(uInverted==1)a=1.0-a;\n##maskapply\n##fragcolor\n}",["aPosition","aTexCoord","aRectCoord"],["uTexture","uColor","uMatrix","uCanvasColor","uTextureColor","uTextureOpacity","uPosition","uSize","uMaskBounds","uMaskOpacity","uMaskFeather","uCornerRadius","uInverted"]),Z=A.createBuffer(),G=A.createBuffer(),q=A.createBuffer(),X=Ra(A,"\n##head\n##text\nout vec2 vTexCoordDouble;void main(){vTexCoordDouble=vec2(aTexCoord.x*2.0-1.0,aTexCoord.y*2.0-1.0);vTexCoord=aTexCoord;\n##matrix\n}","\n##head\n##mask\nin vec2 vTexCoord;in vec2 vTexCoordDouble;uniform sampler2D uTexture;uniform float uTextureOpacity;uniform vec2 uRadius;uniform vec4 uColor;uniform int uInverted;uniform vec4 uCanvasColor;void main(){\n##init\nfloat ar=uRadius.x/uRadius.y;vec2 rAA=vec2(uRadius.x-1.0,uRadius.y-(1.0/ar));vec2 scaledPointSq=vec2((vTexCoordDouble.x*uRadius.x)*(vTexCoordDouble.x*uRadius.x),(vTexCoordDouble.y*uRadius.y)*(vTexCoordDouble.y*uRadius.y));float p=(scaledPointSq.x/(uRadius.x*uRadius.x))+(scaledPointSq.y/(uRadius.y*uRadius.y));float pAA=(scaledPointSq.x/(rAA.x*rAA.x))+(scaledPointSq.y/(rAA.y*rAA.y));a=smoothstep(1.0,p/pAA,p);if(uInverted==1)a=1.0-a;\n##maskapply\n##fragcolor\n}",["aPosition","aTexCoord"],["uTexture","uTextureOpacity","uColor","uCanvasColor","uMatrix","uRadius","uInverted","uMaskBounds","uMaskOpacity"]),Y=A.createBuffer(),K=A.createBuffer(),J=new Map,Q={2:{width:0,height:0},1:{width:0,height:0}},et=(t,e,o,i=1)=>{const a=Math.min(Math.min(4096,r)/o.width,Math.min(4096,r)/o.height,i),l=Math.floor(a*o.width),c=Math.floor(a*o.height);St(o,Q[t])?A.bindFramebuffer(A.FRAMEBUFFER,e):(A.bindTexture(A.TEXTURE_2D,k.get(t)),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,l,c,0,A.RGBA,A.UNSIGNED_BYTE,null),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,A.LINEAR),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,A.CLAMP_TO_EDGE),A.bindFramebuffer(A.FRAMEBUFFER,e),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,k.get(t),0),Q[t]=o);const h=o.width*s,p=o.height*s;var m;Ea(d,0,h,p,0,-1,1),La(d,0,p,0),(m=d)[0]*=1,m[1]*=1,m[2]*=1,m[3]*=1,((t,e)=>{t[4]*=-1,t[5]*=-1,t[6]*=-1,t[7]*=-1})(d),u=d,A.viewport(0,0,l,c),A.colorMask(!0,!0,!0,!0),A.clearColor(0,0,0,0),A.clear(A.COLOR_BUFFER_BIT),x=[1,0,1,0,1,Math.max(n.width,o.width),1,Math.max(n.width,o.width)]},ot=(t,e=!1)=>{const{src:o}=J.get(t);o instanceof HTMLCanvasElement&&(e||o.dataset.retain||m(o)),J.delete(t),A.deleteTexture(t)};return{drawPath:(t,e=0,o=!1,n=!1,i,r,a,l,c)=>{if(t.length<2)return;const d=t.map((t=>({x:t.x*s,y:t.y*s}))),h=i*s;if(h>0&&N(d,h,Ta(r,c),a),d.length<3||!l||0===l[3]||!a)return;const p=(t=>{if(t.length<3)return[];if((t=>{const e=t.length;for(let o=0;o<e;o++){const e=Et(t[o],_a(t,o+1));if(me(e,t,{ignoreIdenticalLines:!0,breakOnIntersection:!0}))return!0}return!1})(t))return[];(t=>{let e,o,n,i,r,a=0;const s=t.length;for(e=0;e<s;e++)o=t[e],n=t[(e+1)%s],i=n.x-o.x,r=(n.y+o.y)/2,a+=i*r;return a})(t)<0&&t.reverse();const e=t.length,o=[...Array(e).keys()],n=[];let i,r,a,s,l,c,d,u,h,p,m,g,f=128;for(;o.length>3;){if(f<=0)return[];for(f--,i=0;i<o.length;i++)if(a=o[i],s=_a(o,i-1),l=_a(o,i+1),c=t[a],d=t[s],u=t[l],h=tt(d.x-c.x,d.y-c.y),p=tt(u.x-c.x,u.y-c.y),!(pt(h,p)<0)){for(m=!0,r=0;r<e;r++)if(r!==a&&r!==s&&r!==l&&(g=t[r],Wa(g,d,c,u))){m=!1;break}if(m){n.push([d,c,u]),o.splice(i,1);break}}}return n.push([t[o[0]],t[o[1]],t[o[2]]]),n})(d),m=new Float32Array(6*p.length);p.forEach((([t,e,o],n)=>{const i=6*n;m[i+0]=t.x,m[i+1]=t.y,m[i+2]=e.x,m[i+3]=e.y,m[i+4]=o.x,m[i+5]=o.y})),((t,e)=>{const{program:o,locations:n}=H;A.useProgram(o),A.enableVertexAttribArray(n.aPosition),A.uniform4fv(n.uColor,e),A.uniformMatrix4fv(n.uMatrix,!1,u),A.uniform1fv(n.uMaskBounds,y),A.uniform1f(n.uMaskOpacity,$),A.uniform4f(n.uCanvasColor,v,w,C,M),A.bindBuffer(A.ARRAY_BUFFER,U),A.bufferData(A.ARRAY_BUFFER,t,A.STATIC_DRAW),A.vertexAttribPointer(n.aPosition,2,A.FLOAT,!1,0,0),A.drawArrays(A.TRIANGLES,0,t.length/2),A.disableVertexAttribArray(n.aPosition)})(m,Ta(l,c))},drawRect:(t,e=0,o=!1,n=!1,i,r,a,l,c,d,h,p,m,g,f,b)=>{const k=Xt(Ot(t),s),S=i.map((e=>((t,e)=>Math.floor(Pr(t,0,Math.min(.5*(e.width-1),.5*(e.height-1)))))(e||0,t))).map((t=>t*s));if(r||a){const t=Ot(k);t.x-=.5,t.y-=.5,t.width+=1,t.height+=1;const i=Ha(t,e,o,n),h=Na(i);let p;f&&(p=Ta(f),0===p[3]&&(p[3]=.001)),((t,e,o,n,i,r=T,a=1,l=ts,c=Xa,d=x,h)=>{const{program:p,locations:m}=V;A.useProgram(p),A.enableVertexAttribArray(m.aPosition),A.enableVertexAttribArray(m.aTexCoord),A.enableVertexAttribArray(m.aRectCoord),A.uniform4fv(m.uColor,i),A.uniform2fv(m.uSize,[e,o]),A.uniform2fv(m.uPosition,[t[2],t[3]]),A.uniform1i(m.uInverted,h?1:0),A.uniform1fv(m.uCornerRadius,n),A.uniform4f(m.uCanvasColor,v,w,C,M),A.uniform1fv(m.uMaskFeather,d.map(((t,e)=>e%2==0?t:t*s))),A.uniform1fv(m.uMaskBounds,y),A.uniform1f(m.uMaskOpacity,$),A.uniformMatrix4fv(m.uMatrix,!1,u),A.uniform1i(m.uTexture,4),A.uniform4fv(m.uTextureColor,l),A.uniform1f(m.uTextureOpacity,a),A.activeTexture(A.TEXTURE0+4),A.bindTexture(A.TEXTURE_2D,r),A.bindBuffer(A.ARRAY_BUFFER,G),A.bufferData(A.ARRAY_BUFFER,c,A.STATIC_DRAW),A.vertexAttribPointer(m.aTexCoord,2,A.FLOAT,!1,0,0),A.bindBuffer(A.ARRAY_BUFFER,q),A.bufferData(A.ARRAY_BUFFER,Xa,A.STATIC_DRAW),A.vertexAttribPointer(m.aRectCoord,2,A.FLOAT,!1,0,0),A.bindBuffer(A.ARRAY_BUFFER,Z),A.bufferData(A.ARRAY_BUFFER,t,A.STATIC_DRAW),A.vertexAttribPointer(m.aPosition,2,A.FLOAT,!1,0,0),A.drawArrays(A.TRIANGLE_STRIP,0,t.length/2),A.disableVertexAttribArray(m.aPosition),A.disableVertexAttribArray(m.aTexCoord),A.disableVertexAttribArray(m.aRectCoord)})(h,t.width,t.height,S,Ta(r,m),a,m,p,d?new Float32Array(d):os(t.width,t.height,l,c,s),g,b)}h&&(h=Math.min(h,k.width,k.height),N(((t,e,o,n,i,r,a,s)=>{const l=[];if(r.every((t=>0===t)))l.push(tt(t,e),tt(t+o,e),tt(t+o,e+n),tt(t,e+n));else{const[i,a,s,c]=r,d=t,u=t+o,h=e,p=e+n;l.push(tt(d+i,h)),Ua(l,u-a,h+a,a,-1),l.push(tt(u,h+a)),Ua(l,u-c,p-c,c,0),l.push(tt(u-c,p)),Ua(l,d+s,p-s,s,1),l.push(tt(d,p-s)),Ua(l,d+i,h+i,i,2)}return(a||s)&&yt(l,a,s,t+.5*o,e+.5*n),i&&bt(l,i,t+.5*o,e+.5*n),l})(k.x,k.y,k.width,k.height,e,S,o,n),h*s,Ta(p,m),!0))},drawEllipse:(t,e,o,n,i,r,a,l,c,d,h,p,m,g,f)=>{const b=Xt(Ht(t.x-e,t.y-o,2*e,2*o),s);if(a||l){const t=Ot(b);t.x-=.5,t.y-=.5,t.width+=1,t.height+=1;const e=Ha(t,n,i,r);((t,e,o,n,i=T,r=Xa,a=1,s=!1)=>{const{program:l,locations:c}=X;A.useProgram(l),A.enableVertexAttribArray(c.aPosition),A.enableVertexAttribArray(c.aTexCoord),A.uniformMatrix4fv(c.uMatrix,!1,u),A.uniform2fv(c.uRadius,[.5*e,.5*o]),A.uniform1i(c.uInverted,s?1:0),A.uniform4fv(c.uColor,n),A.uniform4f(c.uCanvasColor,v,w,C,M),A.uniform1fv(c.uMaskBounds,y),A.uniform1f(c.uMaskOpacity,$),A.uniform1i(c.uTexture,4),A.uniform1f(c.uTextureOpacity,a),A.activeTexture(A.TEXTURE0+4),A.bindTexture(A.TEXTURE_2D,i),A.bindBuffer(A.ARRAY_BUFFER,K),A.bufferData(A.ARRAY_BUFFER,r,A.STATIC_DRAW),A.vertexAttribPointer(c.aTexCoord,2,A.FLOAT,!1,0,0),A.bindBuffer(A.ARRAY_BUFFER,Y),A.bufferData(A.ARRAY_BUFFER,t,A.STATIC_DRAW),A.vertexAttribPointer(c.aPosition,2,A.FLOAT,!1,0,0),A.drawArrays(A.TRIANGLE_STRIP,0,t.length/2),A.disableVertexAttribArray(c.aPosition),A.disableVertexAttribArray(c.aTexCoord)})(Na(e),t.width,t.height,Ta(a,g),l,h?new Float32Array(h):os(t.width,t.height,c,d,s),g,f)}p&&N(((t,e,o,n,i,r,a)=>{const s=.5*Math.abs(o),l=.5*Math.abs(n),c=Math.abs(o)+Math.abs(n),d=Math.max(20,Math.round(c/6));return((t,e,o,n=0,i=!1,r=!1,a=12)=>{const s=[];for(let n=0;n<a;n++)s.push(tt(t.x+e*Math.cos(n*(2*Math.PI)/a),t.y+o*Math.sin(n*(2*Math.PI)/a)));return(i||r)&&yt(s,i,r,t.x,t.y),n&&bt(s,n,t.x,t.y),s})(tt(t+s,e+l),s,l,i,r,a,d)})(b.x,b.y,b.width,b.height,n,i,r),p*s,Ta(m,g),!0)},drawImage:(t,e,o,i,r,l,c,d,u,h,p=Qa,m=1,g,f=1,x=0,v=b,w=es,C=ts,M=!1,S=!1,T=!0)=>{const I=e.width*s,E=e.height*s,L=-.5*I,z=.5*E,B=.5*I,W=-.5*E,j=new Float32Array([L,W,0,L,z,0,B,W,0,B,z,0]);A.bindBuffer(A.ARRAY_BUFFER,O),A.bufferData(A.ARRAY_BUFFER,j,A.STATIC_DRAW);const N=e.height/2/R*(n.height/e.height)*-1;r*=s,l*=s,o*=s,i*=s;const{program:H,locations:U}=F,V=Ia();((t,e,o,n,i)=>{const r=1/Math.tan(e/2),a=1/(1-i);t[0]=r/o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+1)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*1*a,t[15]=0})(V,P,a,0,2*-N),La(V,r,-l,N),La(V,o,-i,0),Oa(V,-u),za(V,h),La(V,-o,i,0),Ba(V,d),Fa(V,c),A.useProgram(H),A.enableVertexAttribArray(U.aPosition),A.enableVertexAttribArray(U.aTexCoord),A.uniform1i(U.uTexture,3),A.uniform2f(U.uTextureSize,e.width,e.height),A.activeTexture(A.TEXTURE0+3),A.bindTexture(A.TEXTURE_2D,t);const Z=S?1:0,G=k.get(Z);A.uniform1i(U.uTextureBlend,Z),A.activeTexture(A.TEXTURE0+Z),A.bindTexture(A.TEXTURE_2D,G);const q=M?2:0,X=k.get(q);A.uniform1i(U.uTextureOverlay,q),A.activeTexture(A.TEXTURE0+q),A.bindTexture(A.TEXTURE_2D,X),A.bindBuffer(A.ARRAY_BUFFER,O),A.vertexAttribPointer(U.aPosition,3,A.FLOAT,!1,0,0);const Y=Ka&&(t=>J.get(t).isRotatedVideo)(t);let K;A.bindBuffer(A.ARRAY_BUFFER,Y?_:D),A.vertexAttribPointer(U.aTexCoord,2,A.FLOAT,!1,0,0),A.uniformMatrix4fv(U.uMatrix,!1,V),A.uniform4fv(U.uOverlayColor,C),!g||Ir(g,Ja)?(g=Ja,K=-1):(K=g.reduce(((t,e)=>t+e),0),K=K<=0?1:K),A.uniform1fv(U.uClarityKernel,g),A.uniform1f(U.uClarityKernelWeight,K),A.uniform1f(U.uColorGamma,1/f),A.uniform1f(U.uColorVignette,x),A.uniform1i(U.uAntialias,T?1:0),A.uniform4f(U.uColorOffset,p[4],p[9],p[14],p[19]),A.uniformMatrix4fv(U.uColorMatrix,!1,[p[0],p[1],p[2],p[3],p[5],p[6],p[7],p[8],p[10],p[11],p[12],p[13],p[15],p[16],p[17],p[18]]),A.uniform1f(U.uOpacity,m),A.uniform1f(U.uMaskOpacity,$),A.uniform1fv(U.uMaskBounds,y),A.uniform1fv(U.uMaskCornerRadius,w.map((t=>t*s))),A.uniform1fv(U.uMaskFeather,v.map(((t,e)=>e%2==0?t:t*s))),A.drawArrays(A.TRIANGLE_STRIP,0,4),A.disableVertexAttribArray(U.aPosition),A.disableVertexAttribArray(U.aTexCoord)},textureFilterNearest:A.NEAREST,textureFilterLinear:A.LINEAR,textureCreate:()=>A.createTexture(),textureUpdate:(t,e,o)=>(J.set(t,{src:e,options:o,isRotatedVideo:"VIDEO"===e.nodeName&&(e.dataset&&90==e.dataset.rotation||270==e.dataset.rotation)}),((t,e,o,n)=>(t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,o),((t,e,o)=>{t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,Aa(e)?t.LINEAR_MIPMAP_LINEAR:t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,o.filter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),Aa(e)&&t.generateMipmap(t.TEXTURE_2D)})(t,o,n),t.bindTexture(t.TEXTURE_2D,null),e))(A,t,e,o)),textureGetSize:t=>{const{src:e,options:o}=J.get(t),n=wt(e);return o.scalar?It(n,(t=>t/o.scalar)):n},textureDelete:ot,enablePreviewStencil:()=>{A.stencilOp(A.KEEP,A.KEEP,A.REPLACE),A.stencilFunc(A.ALWAYS,1,255),A.stencilMask(255)},applyPreviewStencil:()=>{A.stencilFunc(A.EQUAL,1,255),A.stencilMask(0)},disablePreviewStencil:S,setCanvasColor(t){v=t[0],w=t[1],C=t[2],M=o?t[3]:1,A.clear(A.COLOR_BUFFER_BIT)},resetCanvasMatrix:()=>{Ea(c,0,n.width,n.height,0,-1,1)},updateCanvasMatrix(t,e,o,i,r){const a=t.width,l=t.height,d=n.width*(.5/s),u=n.height*(.5/s),h={x:d+(o.x+e.x),y:u+(o.y+e.y)},p={x:h.x-e.x,y:h.y-e.y},m=.5*a,g=.5*l;rt(p,r.z,h),ft(p,i,h),La(c,(p.x-m)*s,(p.y-g)*s,0),La(c,m*s,g*s,0),Oa(c,r.z);const f=r.x>Math.PI/2;Fa(c,f?Math.PI:0);const $=r.y>Math.PI/2;Ba(c,$?Math.PI:0),za(c,i),La(c,-m*s,-g*s,0)},drawToCanvas(){A.bindFramebuffer(A.FRAMEBUFFER,null),u=c,A.viewport(0,0,A.drawingBufferWidth,A.drawingBufferHeight),A.colorMask(!0,!0,!0,!0),A.clearColor(v,w,C,M),A.clear(A.COLOR_BUFFER_BIT),x=[1,0,1,0,1,n.width,1,n.width]},drawToImageBlendBuffer(t,e){et(1,z,t,e)},drawToImageOverlayBuffer(t,e){et(2,E,t,e)},enableMask(t,e){const o=t.x*s,i=t.y*s,r=t.width*s,a=t.height*s;f=o,p=f+r,h=n.height-i,g=n.height-(i+a),$=1-e,y=[h,p,g,f]},disableMask(){f=0,p=n.width,h=n.height,g=0,$=1,y=[h,p,g,f]},resize:(e,o,r)=>{s=r,l=1===s?.75:1,i.width=e,i.height=o,n.width=e*s,n.height=o*s,a=B(n.width,n.height),t.width=n.width,t.height=n.height,Ea(c,0,n.width,n.height,0,-1,1),b=[1,0,1,0,1,i.width,1,i.width]},release(){Array.from(J.keys()).forEach((t=>ot(t,!0))),J.clear(),k.forEach((t=>{A.deleteTexture(t)})),k.clear(),F.destroy(),W.destroy(),H.destroy(),V.destroy(),X.destroy(),t.width=1,t.height=1,t=void 0}}};function is(t){return Math.sqrt(1- --t*t)}function rs(t){return"[object Date]"===Object.prototype.toString.call(t)}function as(t,e){if(t===e||t!=t)return()=>t;const o=typeof t;if(o!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const o=e.map(((e,o)=>as(t[o],e)));return t=>o.map((e=>e(t)))}if("object"===o){if(!t||!e)throw new Error("Object cannot be null");if(rs(t)&&rs(e)){t=t.getTime();const o=(e=e.getTime())-t;return e=>new Date(t+e*o)}const o=Object.keys(e),n={};return o.forEach((o=>{n[o]=as(t[o],e[o])})),t=>{const e={};return o.forEach((o=>{e[o]=n[o](t)})),e}}if("number"===o){const o=e-t;return e=>t+e*o}throw new Error(`Cannot interpolate ${o} values`)}function ss(t,e={}){const o=cr(t);let n,i=t;function r(r,a){if(null==t)return o.set(t=r),Promise.resolve();i=r;let s=n,l=!1,{delay:c=0,duration:d=400,easing:u=kn,interpolate:h=as}=Sn(Sn({},e),a);if(0===d)return s&&(s.abort(),s=null),o.set(t=i),Promise.resolve();const p=Vn()+c;let m;return n=Xn((e=>{if(e<p)return!0;l||(m=h(t,r),"function"==typeof d&&(d=d(t,r)),l=!0),s&&(s.abort(),s=null);const n=e-p;return n>d?(o.set(t=r),!1):(o.set(t=m(u(n/d))),!0)})),n.promise}return{set:r,update:(e,o)=>r(e(i,t),o),subscribe:o.subscribe}}function ls(t,e,o,n){if("number"==typeof o){const i=n-o,r=(o-e)/(t.dt||1/60),a=(r+(t.opts.stiffness*i-t.opts.damping*r)*t.inv_mass)*t.dt;return Math.abs(a)<t.opts.precision&&Math.abs(i)<t.opts.precision?n:(t.settled=!1,o+a)}if(so(o))return o.map(((i,r)=>ls(t,e[r],o[r],n[r])));if("object"==typeof o){const i={};for(const r in o)i[r]=ls(t,e[r],o[r],n[r]);return i}throw new Error(`Cannot spring ${typeof o} values`)}function cs(t,e={}){const o=cr(t),{stiffness:n=.15,damping:i=.8,precision:r=.01}=e;let a,s,l,c=t,d=t,u=1,h=0,p=!1;function m(e,n={}){d=e;const i=l={};if(null==t||n.hard||g.stiffness>=1&&g.damping>=1)return p=!0,a=null,c=e,o.set(t=d),Promise.resolve();if(n.soft){const t=!0===n.soft?.5:+n.soft;h=1/(60*t),u=0}if(!s){a=null,p=!1;const e={inv_mass:void 0,opts:g,settled:!0,dt:void 0};s=Xn((n=>{if(null===a&&(a=n),p)return p=!1,s=null,!1;u=Math.min(u+h,1),e.inv_mass=u,e.opts=g,e.settled=!0,e.dt=60*(n-a)/1e3;const i=ls(e,c,t,d);return a=n,c=t,o.set(t=i),e.settled&&(s=null),!e.settled}))}return new Promise((t=>{s.promise.then((()=>{i===l&&t()}))}))}const g={set:m,update:(e,o)=>m(e(d,t),o),subscribe:o.subscribe,stiffness:n,damping:i,precision:r};return g}var ds=lr(!1,(t=>{const e=window.matchMedia("(prefers-reduced-motion:reduce)"),o=()=>t(e.matches);return o(),e.addListener(o),()=>e.removeListener(o)}));const us=Dt(),hs=(t,e,o,n,i)=>{t.rect||(t.rect=Dt());const r=t.rect;Qt(us,e,o,n,i),Kt(r,us)||(te(r,us),t.dispatchEvent(new CustomEvent("measure",{detail:r})))},ps=Math.round,ms=t=>{const e=t.getBoundingClientRect();hs(t,ps(e.x),ps(e.y),ps(e.width),ps(e.height))},gs=t=>hs(t,t.offsetLeft,t.offsetTop,t.offsetWidth,t.offsetHeight),fs=[];let $s,ys=null;function bs(){fs.length?(fs.forEach((t=>t.measure(t))),ys=requestAnimationFrame(bs)):ys=null}let xs=0;var vs=(t,e={})=>{const{observePosition:o=!1,observeViewRect:n=!1,once:i=!1,disabled:r=!1}=e;if(!r)return!("ResizeObserver"in window)||o||n?(t.measure=n?ms:gs,fs.push(t),ys||(ys=requestAnimationFrame(bs)),t.measure(t),{destroy(){const e=fs.indexOf(t);fs.splice(e,1),delete t.measure}}):($s||($s=new ResizeObserver((t=>{t.forEach((t=>gs(t.target)))}))),$s.observe(t),gs(t),i?$s.unobserve(t):xs++,{destroy(){i||($s.unobserve(t),xs--,0===xs&&($s.disconnect(),$s=void 0))}})},ws=t=>{let e=!1;const o={pointerdown:()=>{e=!1},keydown:()=>{e=!0},keyup:()=>{e=!1},focus:t=>{e&&(t.target.dataset.focusVisible="")},blur:t=>{delete t.target.dataset.focusVisible}};return Object.keys(o).forEach((e=>t.addEventListener(e,o[e],!0))),{destroy(){Object.keys(o).forEach((e=>t.removeEventListener(e,o[e],!0)))}}};const Cs=async t=>new Promise((e=>{if("file"===t.kind)return e(t.getAsFile());t.getAsString(e)}));var Ms=(t,e={})=>{const o=t=>{t.preventDefault()},n=async o=>{o.preventDefault(),o.stopPropagation();try{const n=await(t=>new Promise(((e,o)=>{const{items:n}=t.dataTransfer;if(!n)return e([]);Promise.all(Array.from(n).map(Cs)).then((t=>{e(t.filter((t=>lo(t)&&Ae(t)||/^http/.test(t))))})).catch(o)})))(o);t.dispatchEvent(new CustomEvent("dropfiles",{detail:{event:o,resources:n},...e}))}catch(t){}};return t.addEventListener("drop",n),t.addEventListener("dragover",o),{destroy(){t.removeEventListener("drop",n),t.removeEventListener("dragover",o)}}};let ks=null;var Ss=()=>{if(null===ks)if(l()){const t=h("canvas");ks=!Da(t,{failIfMajorPerformanceCaveat:!0}),m(t)}else ks=!1;return ks};function Ps(t){let e,o,n,i;return{c(){e=ei("div"),o=ei("canvas"),li(e,"class","PinturaCanvas")},m(r,a){Qn(r,e,a),Yn(e,o),t[31](o),n||(i=[ai(o,"measure",t[32]),Hn(vs.call(null,o))],n=!0)},p:Mn,i:Mn,o:Mn,d(o){o&&ti(e),t[31](null),n=!1,An(i)}}}function Rs(t,e,o){let n,i,a,s,l,c,d;const u=vi();let p,{isAnimated:m}=e,{isTransparent:f}=e,{maskRect:$}=e,{maskOpacity:y=1}=e,{maskFrameOpacity:b=.95}=e,{maskMarkupOpacity:x=1}=e,{clipAnnotationsToImage:w=!0}=e,{pixelRatio:C=1}=e,{textPixelRatio:M=C}=e,{backgroundColor:k}=e,{willRender:S=O}=e,{didRender:P=O}=e,{willRequest:R}=e,{loadImageData:A=O}=e,{images:T=[]}=e,{interfaceImages:I=[]}=e,E=null,L=null,z=null;const F=(t,e)=>t.set(e,{hard:!m}),D={precision:1e-4*.01};let _=0;const W=ss(void 0,{duration:0});zn(t,W,(t=>o(29,s=t)));const j=cs(1,D);zn(t,j,(t=>o(30,c=t)));const N=cs(1,D);zn(t,N,(t=>o(40,a=t)));const H=cr();zn(t,H,(t=>o(42,d=t)));const U=cr();zn(t,U,(t=>o(41,l=t)));const V=()=>requestAnimationFrame((()=>{nt=!0,i()})),Z=new Map([]),G=new Map([]),q=(t,e)=>{if(Z.has(t)){if(Ie(t)){const o=Z.get(t),n="pixelated"===e?E.textureFilterNearest:E.textureFilterLinear;E.textureUpdate(o,t,{filter:n})}}else{Z.set(t,t);const o="pixelated"===e?E.textureFilterNearest:E.textureFilterLinear;if(!v(t)&&(_e(t)||g(t)||nn(t)||Ie(t))){const e=E.textureCreate();E.textureUpdate(e,t,{filter:o}),Z.set(t,e)}else A(t).then((e=>{if(!E||!e)return;const n=E.textureCreate();E.textureUpdate(n,e,{filter:o}),Z.set(t,n),V()})).catch((t=>{console.error(t)}))}return Z.get(t)},X=t=>t instanceof WebGLTexture,Y=({data:t,size:e,origin:o,translation:n,rotation:i,scale:r,colorMatrix:a,opacity:s,convolutionMatrix:l,gamma:c,vignette:d,maskFeather:u,maskCornerRadius:h,overlayColor:p,enableOverlay:m,enableBlend:g,enableAntialiasing:f})=>{const $=q(t);let y=0,b=0;if(1===C){const t=Math.abs(1-r)<Number.EPSILON;y=t&&L%2!=0?.5:0,b=t&&z%2!=0?.5:0}return E.drawImage($,e,o.x,o.y,n.x+y,n.y+b,i.x,i.y,i.z,r,a,Pr(s,0,1),l,c,d,u,h,p,m,g,f),$},K=([t,e,o,n])=>[n.x,n.y,t.x,t.y,o.x,o.y,e.x,e.y],J=Q(),ot=(t=[],e)=>t.map((t=>{let e=!t._isLoading&&(t=>{let e;if(t.backgroundImage)e=q(t.backgroundImage,t.backgroundImageRendering);else if(v(t.text)){if(t.width&&t.width<1||t.height&&t.height<1)return;e=(t=>{if(!t.text.length)return void G.delete(t.id);let{text:e,textAlign:o,fontFamily:n,fontSize:i,fontWeight:r,fontVariant:a,fontStyle:s,lineHeight:l,width:c,height:d}=t;const{lastCharPosition:u,textSize:p}=((t="",e)=>{const{width:o=0,height:n="auto",fontSize:i,fontFamily:r,lineHeight:a,fontWeight:s,fontStyle:l,fontVariant:c}=e,d=uo({text:t,fontFamily:r,fontWeight:s,fontStyle:l,fontVariant:c,fontSize:i,lineHeight:a,width:o,height:n});let u=bo.get(d);if(u)return u;const p=h("span"),m=Me(h("pre",{contenteditable:"true",spellcheck:"false",style:`pointer-events:none;visibility:hidden;position:absolute;left:0;top:0;${$o({fontFamily:r,fontWeight:s,fontStyle:l,fontVariant:c,fontSize:i,lineHeight:a})};${yo(t,e)}"`,innerHTML:t},[p])),g=m.getBoundingClientRect(),f=p.getBoundingClientRect();return u={textSize:wt(g),lastCharPosition:ct(et(f),Math.round)},bo.set(d,u),m.remove(),u})(e,t),m=uo({text:e,textAlign:o,fontFamily:n,fontSize:i,fontWeight:r,fontVariant:a,fontStyle:s,lineHeight:l,height:d?Math.min(u.y,Math.ceil(d/l)*l):"auto",xOffset:u.x,yOffset:u.y});if(!Z.has(m)){Z.set(m,e);const u=c&&Math.round(c),h=d&&Math.round(d),g=Math.ceil(p.width),f=Math.ceil(p.height/l)*l;if(0===g||0===f)return;const $=Za(),y=Math.min(1,($-fo*M*2)/(g*M),$/(f*M));To(e,{fontSize:i,fontFamily:n,fontWeight:r,fontVariant:a,fontStyle:s,textAlign:o,lineHeight:l,width:u,height:h,imageWidth:g,imageHeight:f,pixelRatio:M*y,willRequest:R,color:[1,0,1]}).then((e=>{if(!E)return;const o=E.textureCreate();E.textureUpdate(o,e,{filter:E.textureFilterLinear,scalar:y}),Z.set(m,o),G.set(t.id,o),V()})).catch(console.error)}const g=Z.get(m);return X(g)?g:G.get(t.id)})(t)}return e})(t),o=X(e)?e:void 0;const n=t._scale||1,i=t._translate||J,r=t.strokeWidth&&t.strokeWidth*n;if(so(t.points)){const e=t.points.map((t=>tt(t.x*n+i.x,t.y*n+i.y)));E.drawPath(e,t.rotation,t.flipX,t.flipY,r,t.strokeColor,t.pathClose,t.backgroundColor,t.opacity)}else if(ro(t.rx)&&ro(t.ry)){let e=t.x,a=t.y;e*=n,a*=n,e+=i.x,a+=i.y,E.drawEllipse(tt(e,a),t.rx*n,t.ry*n,t.rotation,t.flipX,t.flipY,t.backgroundColor,o,void 0,void 0,t.backgroundCorners&&K(t.backgroundCorners),r,t.strokeColor,t.opacity,t.inverted)}else if(v(t.text)&&o||t.width){const e=o&&E.textureGetSize(o);let a,s,l,c,d=t.backgroundColor,u=t.strokeColor,h=[t.cornerRadius,t.cornerRadius,t.cornerRadius,t.cornerRadius].map((t=>t*n));if(s=t.width?Wt(t):{x:t.x,y:t.y,...e},n&&i&&(s.x*=n,s.y*=n,s.x+=i.x,s.y+=i.y,s.width*=n,s.height*=n),e)if(t.backgroundImage&&t.backgroundSize){const o=B(e.width,e.height);if("contain"===t.backgroundSize){const t=re(s,o,s);l=Ct(t),c=tt(.5*(s.width-l.width),.5*(s.height-l.height))}else if("cover"===t.backgroundSize){const t=ie(s,o,s);l=Ct(t),c=tt(t.x,t.y),c=tt(.5*(s.width-l.width),.5*(s.height-l.height))}else l=t.backgroundSize,c=t.backgroundPosition}else if(t.text){const o={width:e.width/M,height:e.height/M};if(c=tt(0,0),l={width:o.width*n,height:o.height*n},t.backgroundColor||t.strokeColor){d=void 0,u=void 0;let e=(t.width||o.width-2*fo)*n,i=(t.height||o.height)*n;E.drawRect({...s,width:e,height:i},t.rotation,t.flipX,t.flipY,h,t.backgroundColor,void 0,void 0,void 0,void 0,r,t.strokeColor,t.opacity,void 0,void 0,t.inverted)}s.x-=fo*n,a=t.color,t.width?(s.height=s.height||o.height*n,s.width+=2*fo*n,"center"===t.textAlign?c.x=.5*(s.width-l.width):"right"===t.textAlign&&(c.x=s.width-l.width)):(s.width=o.width*n,s.height=o.height*n),t._prerender&&(a[3]=0)}E.drawRect(s,t.rotation,t.flipX,t.flipY,h,d,o,l,c,t.backgroundCorners&&K(t.backgroundCorners),r,u,t.opacity,void 0,a,t.inverted)}return e})).filter(Boolean);let nt=!1,it=!0,rt=!1;const at=[],st=[],lt=[],dt=()=>{lt.length=0;const t=T[0],{blendShapes:e,blendShapesDirty:o,annotationShapes:n,annotationShapesDirty:i,interfaceShapes:r,decorationShapes:u,frameShapes:h}=S({opacity:t.opacity,rotation:t.rotation,scale:t.scale,images:T,size:kt(L,z),backgroundColor:[...s],selectionRect:d}),p=[...s],m=d,g=Pr(c,0,1),y=l,b=Math.abs(t.rotation.x/Math.PI*2-1),v=Math.abs(t.rotation.y/Math.PI*2-1),C=b<.99||v<.99,k={...t.size},R=t.backgroundColor,A=t.backgroundImage,F=e.length>0,B=n.length>0,O=R[3]>0,D=!!w&&x>=1;if(g<1&&O){const t=p[0],e=p[1],o=p[2],n=1-g,i=R[0]*n,r=R[1]*n,a=R[2]*n,s=1-n;p[0]=i+t*s,p[1]=r+e*s,p[2]=a+o*s,p[3]=1}if(E.setCanvasColor(f?[0,0,0,0]:p),F&&o?(E.disableMask(),E.drawToImageBlendBuffer(k),at.length=0,at.push(...ot(e))):F||(at.length=0),lt.push(...at),it&&(E.drawToImageOverlayBuffer(k,M),it=!1),C?(B&&(i||nt)||!rt?(E.disableMask(),E.drawToImageOverlayBuffer(k,M),st.length=0,st.push(...ot(n))):B||(st.length=0),rt=!0):rt=!1,E.drawToCanvas(),E.enableMask(m,g),O&&E.drawRect(m,0,!1,!1,[0,0,0,0],((t,e)=>{const[o,n,i]=t,[r,a,s,l]=e;return[r*l+o*(1-l),a*l+n*(1-l),s*l+i*(1-l),1]})(s,R)),A){E.enableMask(m,1);const t=Math.max($.width/A.width,$.height/A.height),e=A.width*t,o=A.height*t,n={x:$.x+.5*$.width-.5*e,y:$.y+.5*$.height-.5*o,width:e,height:o};E.drawRect(n,0,!1,!1,[0,0,0,0],[0,0,0,0],q(A,"linear")),E.enableMask(m,g)}if(D&&E.enablePreviewStencil(),lt.push(...[...T].reverse().map((t=>Y({...t,enableOverlay:C&&B,enableBlend:F,enableAntialiasing:!0,mask:m,maskOpacity:g,overlayColor:y})))),E.enableMask(m,x),C||(D&&E.applyPreviewStencil(),E.resetCanvasMatrix(),E.updateCanvasMatrix(k,t.origin,t.translation,t.scale,t.rotation),st.length=0,st.push(...ot(n)),D&&E.disablePreviewStencil()),lt.push(...st),E.resetCanvasMatrix(),E.enableMask(m,x),lt.push(...ot(u)),h.length){E.enableMask(m,1);const t=h.filter((t=>!t.expandsCanvas)),e=h.filter((t=>t.expandsCanvas));t.length&&lt.push(...ot(t)),e.length&&(E.enableMask({x:m.x+.5,y:m.y+.5,width:m.width-1,height:m.height-1},a),lt.push(...ot(e)))}E.disableMask(),lt.push(...ot(r)),I.forEach((t=>{if(E.enableMask(t.mask,t.maskOpacity),t.backgroundColor){const e=A&&ie({...t.mask},A.width/A.height),o=A&&q(A,"linear");E.drawRect(t.mask,0,!1,!1,t.maskCornerRadius,t.backgroundColor,o,e,e,void 0,void 0,void 0,t.opacity,t.maskFeather)}Y({...t,enableAntialiasing:!1,translation:{x:t.translation.x+t.offset.x-.5*L,y:t.translation.y+t.offset.y-.5*z}})})),E.disableMask(),(t=>{Z.forEach(((e,o)=>{!t.find((t=>t===e))&&X(e)&&(Array.from(G.values()).includes(e)||(Z.delete(o),E.textureDelete(e)))}))})(lt),P(),nt=!1};let ut=Date.now();const ht=()=>{const t=Date.now();t-ut<48||(ut=t,dt())};return function(t){yi().$$.after_update.push(t)}((()=>i())),bi((()=>o(25,E=ns(p,{alpha:f})))),xi((()=>{E&&(E.release(),o(25,E=void 0),o(0,p=void 0))})),t.$$set=t=>{"isAnimated"in t&&o(9,m=t.isAnimated),"isTransparent"in t&&o(10,f=t.isTransparent),"maskRect"in t&&o(11,$=t.maskRect),"maskOpacity"in t&&o(12,y=t.maskOpacity),"maskFrameOpacity"in t&&o(13,b=t.maskFrameOpacity),"maskMarkupOpacity"in t&&o(14,x=t.maskMarkupOpacity),"clipAnnotationsToImage"in t&&o(15,w=t.clipAnnotationsToImage),"pixelRatio"in t&&o(16,C=t.pixelRatio),"textPixelRatio"in t&&o(17,M=t.textPixelRatio),"backgroundColor"in t&&o(18,k=t.backgroundColor),"willRender"in t&&o(19,S=t.willRender),"didRender"in t&&o(20,P=t.didRender),"willRequest"in t&&o(21,R=t.willRequest),"loadImageData"in t&&o(22,A=t.loadImageData),"images"in t&&o(23,T=t.images),"interfaceImages"in t&&o(24,I=t.interfaceImages)},t.$$.update=()=>{if(1&t.$$.dirty[0]&&p){const t=getComputedStyle(p).getPropertyValue("--color-transition-duration");o(26,_=(t=>{let e=parseFloat(t);return/^[0-9]+s$/.test(t)?1e3*e:e})(t))}67371520&t.$$.dirty[0]&&k&&W.set(k,{duration:m?_:0}),4096&t.$$.dirty[0]&&F(j,ro(y)?y:1),8192&t.$$.dirty[0]&&F(N,ro(b)?b:1),2048&t.$$.dirty[0]&&$&&H.set($),1610612736&t.$$.dirty[0]&&s&&U.set([s[0],s[1],s[2],Pr(c,0,1)]),41943046&t.$$.dirty[0]&&o(28,n=!!(E&&L&&z&&T.length)),33619974&t.$$.dirty[0]&&L&&z&&E&&E.resize(L,z,C),268435456&t.$$.dirty[0]&&o(27,i=n?Ss()?ht:dt:r),402653184&t.$$.dirty[0]&&n&&i&&i()},[p,L,z,u,W,j,N,H,U,m,f,$,y,b,x,w,C,M,k,S,P,R,A,T,I,E,_,i,n,s,c,function(t){Si[t?"unshift":"push"]((()=>{p=t,o(0,p)}))},t=>{o(1,L=t.detail.width),o(2,z=t.detail.height),u("measure",{width:L,height:z})}]}class As extends ar{constructor(t){super(),rr(this,t,Rs,Ps,In,{isAnimated:9,isTransparent:10,maskRect:11,maskOpacity:12,maskFrameOpacity:13,maskMarkupOpacity:14,clipAnnotationsToImage:15,pixelRatio:16,textPixelRatio:17,backgroundColor:18,willRender:19,didRender:20,willRequest:21,loadImageData:22,images:23,interfaceImages:24},null,[-1,-1,-1])}}var Ts=(t,e=Boolean,o=" ")=>t.filter(e).join(o);function Is(t,e,o){const n=t.slice();return n[17]=e[o],n}const Es=t=>({tab:4&t}),Ls=t=>({tab:t[17]});function zs(t){let e,o,n,i=[],r=new Map,a=t[2];const s=t=>t[17].id;for(let e=0;e<a.length;e+=1){let o=Is(t,a,e),n=s(o);r.set(n,i[e]=Fs(n,o))}return{c(){e=ei("ul");for(let t=0;t<i.length;t+=1)i[t].c();li(e,"class",o=Ts(["PinturaTabList",t[0]])),li(e,"role","tablist"),li(e,"data-layout",t[1])},m(o,r){Qn(o,e,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);t[14](e),n=!0},p(t,l){1124&l&&(a=t[2],Hi(),i=Ji(i,l,s,1,t,a,r,e,Ki,Fs,null,Is),Ui()),(!n||1&l&&o!==(o=Ts(["PinturaTabList",t[0]])))&&li(e,"class",o),(!n||2&l)&&li(e,"data-layout",t[1])},i(t){if(!n){for(let t=0;t<a.length;t+=1)Vi(i[t]);n=!0}},o(t){for(let t=0;t<i.length;t+=1)Zi(i[t]);n=!1},d(o){o&&ti(e);for(let t=0;t<i.length;t+=1)i[t].d();t[14](null)}}}function Fs(t,e){let o,n,i,r,a,s,l,c,d,u;const h=e[11].default,p=Fn(h,e,e[10],Ls);function m(...t){return e[12](e[17],...t)}function g(...t){return e[13](e[17],...t)}return{key:t,first:null,c(){o=ei("li"),n=ei("button"),p&&p.c(),r=ii(),li(n,"type","button"),n.disabled=i=e[17].disabled,li(o,"role","tab"),li(o,"aria-controls",a=e[17].href.substr(1)),li(o,"id",s=e[17].tabId),li(o,"aria-selected",l=e[17].selected),this.first=o},m(t,e){Qn(t,o,e),Yn(o,n),p&&p.m(n,null),Yn(o,r),c=!0,d||(u=[ai(n,"keydown",m),ai(n,"click",g)],d=!0)},p(t,r){e=t,p&&p.p&&(!c||1028&r)&&Dn(p,h,e,e[10],c?On(h,e[10],r,Es):_n(e[10]),Ls),(!c||4&r&&i!==(i=e[17].disabled))&&(n.disabled=i),(!c||4&r&&a!==(a=e[17].href.substr(1)))&&li(o,"aria-controls",a),(!c||4&r&&s!==(s=e[17].tabId))&&li(o,"id",s),(!c||4&r&&l!==(l=e[17].selected))&&li(o,"aria-selected",l)},i(t){c||(Vi(p,t),c=!0)},o(t){Zi(p,t),c=!1},d(t){t&&ti(o),p&&p.d(t),d=!1,An(u)}}}function Bs(t){let e,o,n=t[4]&&zs(t);return{c(){n&&n.c(),e=ri()},m(t,i){n&&n.m(t,i),Qn(t,e,i),o=!0},p(t,[o]){t[4]?n?(n.p(t,o),16&o&&Vi(n,1)):(n=zs(t),n.c(),Vi(n,1),n.m(e.parentNode,e)):n&&(Hi(),Zi(n,1,1,(()=>{n=null})),Ui())},i(t){o||(Vi(n),o=!0)},o(t){Zi(n),o=!1},d(t){n&&n.d(t),t&&ti(e)}}}function Os(t,e,o){let n,i,r,{$$slots:a={},$$scope:s}=e,{class:l}=e,{name:c}=e,{selected:d}=e,{tabs:u=[]}=e,{layout:h}=e;const p=vi(),m=t=>{const e=r.querySelectorAll('[role="tab"] button')[t];e&&e.focus()},g=(t,e)=>{t.preventDefault(),t.stopPropagation(),p("select",e)},f=({key:t},e)=>{if(!/arrow/i.test(t))return;const o=u.findIndex((t=>t.id===e));return/right|down/i.test(t)?m(o<u.length-1?o+1:0):/left|up/i.test(t)?m(o>0?o-1:u.length-1):void 0};return t.$$set=t=>{"class"in t&&o(0,l=t.class),"name"in t&&o(7,c=t.name),"selected"in t&&o(8,d=t.selected),"tabs"in t&&o(9,u=t.tabs),"layout"in t&&o(1,h=t.layout),"$$scope"in t&&o(10,s=t.$$scope)},t.$$.update=()=>{896&t.$$.dirty&&o(2,n=u.map((t=>{const e=t.id===d;return{...t,tabId:`tab-${c}-${t.id}`,href:`#panel-${c}-${t.id}`,selected:e}}))),4&t.$$.dirty&&o(4,i=n.length>1)},[l,h,n,r,i,g,f,c,d,u,s,a,(t,e)=>f(e,t.id),(t,e)=>g(e,t.id),function(t){Si[t?"unshift":"push"]((()=>{r=t,o(3,r)}))}]}class Ds extends ar{constructor(t){super(),rr(this,t,Os,Bs,In,{class:0,name:7,selected:8,tabs:9,layout:1})}}const _s=t=>({panel:16&t}),Ws=t=>({panel:t[4][0].id,panelIsActive:!0});function js(t,e,o){const n=t.slice();return n[14]=e[o].id,n[15]=e[o].shouldDraw,n[16]=e[o].panelId,n[17]=e[o].tabindex,n[18]=e[o].labelledBy,n[19]=e[o].isActive,n[20]=e[o].hidden,n[3]=e[o].visible,n}const Ns=t=>({panel:16&t,panelIsActive:16&t}),Hs=t=>({panel:t[14],panelIsActive:t[19]});function Us(t){let e,o,n,i,r,a;const s=t[11].default,l=Fn(s,t,t[10],Ws);return{c(){e=ei("div"),o=ei("div"),l&&l.c(),li(o,"class",n=Ts([t[1]])),li(e,"class",t[0]),li(e,"style",t[2])},m(n,s){Qn(n,e,s),Yn(e,o),l&&l.m(o,null),i=!0,r||(a=[ai(e,"measure",t[13]),Hn(vs.call(null,e))],r=!0)},p(t,r){l&&l.p&&(!i||1040&r)&&Dn(l,s,t,t[10],i?On(s,t[10],r,_s):_n(t[10]),Ws),(!i||2&r&&n!==(n=Ts([t[1]])))&&li(o,"class",n),(!i||1&r)&&li(e,"class",t[0]),(!i||4&r)&&li(e,"style",t[2])},i(t){i||(Vi(l,t),i=!0)},o(t){Zi(l,t),i=!1},d(t){t&&ti(e),l&&l.d(t),r=!1,An(a)}}}function Vs(t){let e,o,n,i,r,a=[],s=new Map,l=t[4];const c=t=>t[14];for(let e=0;e<l.length;e+=1){let o=js(t,l,e),n=c(o);s.set(n,a[e]=Gs(n,o))}return{c(){e=ei("div");for(let t=0;t<a.length;t+=1)a[t].c();li(e,"class",o=Ts(["PinturaTabPanels",t[0]])),li(e,"style",t[2])},m(o,s){Qn(o,e,s);for(let t=0;t<a.length;t+=1)a[t].m(e,null);n=!0,i||(r=[ai(e,"measure",t[12]),Hn(vs.call(null,e,{observePosition:!0}))],i=!0)},p(t,i){1042&i&&(l=t[4],Hi(),a=Ji(a,i,c,1,t,l,s,e,Ki,Gs,null,js),Ui()),(!n||1&i&&o!==(o=Ts(["PinturaTabPanels",t[0]])))&&li(e,"class",o),(!n||4&i)&&li(e,"style",t[2])},i(t){if(!n){for(let t=0;t<l.length;t+=1)Vi(a[t]);n=!0}},o(t){for(let t=0;t<a.length;t+=1)Zi(a[t]);n=!1},d(t){t&&ti(e);for(let t=0;t<a.length;t+=1)a[t].d();i=!1,An(r)}}}function Zs(t){let e;const o=t[11].default,n=Fn(o,t,t[10],Hs);return{c(){n&&n.c()},m(t,o){n&&n.m(t,o),e=!0},p(t,i){n&&n.p&&(!e||1040&i)&&Dn(n,o,t,t[10],e?On(o,t[10],i,Ns):_n(t[10]),Hs)},i(t){e||(Vi(n,t),e=!0)},o(t){Zi(n,t),e=!1},d(t){n&&n.d(t)}}}function Gs(t,e){let o,n,i,r,a,s,l,c,d,u=e[15]&&Zs(e);return{key:t,first:null,c(){o=ei("div"),u&&u.c(),n=ii(),li(o,"class",i=Ts(["PinturaTabPanel",e[1]])),o.hidden=r=e[20],li(o,"id",a=e[16]),li(o,"tabindex",s=e[17]),li(o,"aria-labelledby",l=e[18]),li(o,"data-inert",c=!e[3]),this.first=o},m(t,e){Qn(t,o,e),u&&u.m(o,null),Yn(o,n),d=!0},p(t,h){(e=t)[15]?u?(u.p(e,h),16&h&&Vi(u,1)):(u=Zs(e),u.c(),Vi(u,1),u.m(o,n)):u&&(Hi(),Zi(u,1,1,(()=>{u=null})),Ui()),(!d||2&h&&i!==(i=Ts(["PinturaTabPanel",e[1]])))&&li(o,"class",i),(!d||16&h&&r!==(r=e[20]))&&(o.hidden=r),(!d||16&h&&a!==(a=e[16]))&&li(o,"id",a),(!d||16&h&&s!==(s=e[17]))&&li(o,"tabindex",s),(!d||16&h&&l!==(l=e[18]))&&li(o,"aria-labelledby",l),(!d||16&h&&c!==(c=!e[3]))&&li(o,"data-inert",c)},i(t){d||(Vi(u),d=!0)},o(t){Zi(u),d=!1},d(t){t&&ti(o),u&&u.d()}}}function qs(t){let e,o,n,i;const r=[Vs,Us],a=[];function s(t,e){return t[5]?0:1}return e=s(t),o=a[e]=r[e](t),{c(){o.c(),n=ri()},m(t,o){a[e].m(t,o),Qn(t,n,o),i=!0},p(t,[i]){let l=e;e=s(t),e===l?a[e].p(t,i):(Hi(),Zi(a[l],1,1,(()=>{a[l]=null})),Ui(),o=a[e],o?o.p(t,i):(o=a[e]=r[e](t),o.c()),Vi(o,1),o.m(n.parentNode,n))},i(t){i||(Vi(o),i=!0)},o(t){Zi(o),i=!1},d(t){a[e].d(t),t&&ti(n)}}}function Xs(t,e,o){let n,i,{$$slots:r={},$$scope:a}=e,{class:s}=e,{name:l}=e,{selected:c}=e,{panelClass:d}=e,{panels:u=[]}=e,{visible:h}=e,{style:p}=e;const m={};return t.$$set=t=>{"class"in t&&o(0,s=t.class),"name"in t&&o(6,l=t.name),"selected"in t&&o(7,c=t.selected),"panelClass"in t&&o(1,d=t.panelClass),"panels"in t&&o(8,u=t.panels),"visible"in t&&o(3,h=t.visible),"style"in t&&o(2,p=t.style),"$$scope"in t&&o(10,a=t.$$scope)},t.$$.update=()=>{968&t.$$.dirty&&o(4,n=u.map((t=>{const e=t===c;e&&o(9,m[t]=!0,m);const n=h?-1!==h.indexOf(t):e;return{id:t,panelId:`panel-${l}-${t}`,labelledBy:`tab-${l}-${t}`,isActive:e,hidden:!e,visible:n,tabindex:e?0:-1,shouldDraw:e||m[t]}}))),16&t.$$.dirty&&o(5,i=n.length>1)},[s,d,p,h,n,i,l,c,u,m,a,r,function(e){Mi.call(this,t,e)},function(e){Mi.call(this,t,e)}]}class Ys extends ar{constructor(t){super(),rr(this,t,Xs,qs,In,{class:0,name:6,selected:7,panelClass:1,panels:8,visible:3,style:2})}}var Ks=t=>{const e=Object.getOwnPropertyDescriptors(t.prototype);return Object.keys(e).filter((t=>!!e[t].get))};function Js(t){let e,o,n;const i=t[5].default,r=Fn(i,t,t[4],null);return{c(){e=oi("svg"),r&&r.c(),li(e,"class",t[3]),li(e,"style",t[2]),li(e,"width",t[0]),li(e,"height",t[1]),li(e,"viewBox",o="0 0 "+t[0]+"\n    "+t[1]),li(e,"xmlns","http://www.w3.org/2000/svg"),li(e,"aria-hidden","true"),li(e,"focusable","false"),li(e,"stroke-linecap","round"),li(e,"stroke-linejoin","round")},m(t,o){Qn(t,e,o),r&&r.m(e,null),n=!0},p(t,[a]){r&&r.p&&(!n||16&a)&&Dn(r,i,t,t[4],n?On(i,t[4],a,null):_n(t[4]),null),(!n||8&a)&&li(e,"class",t[3]),(!n||4&a)&&li(e,"style",t[2]),(!n||1&a)&&li(e,"width",t[0]),(!n||2&a)&&li(e,"height",t[1]),(!n||3&a&&o!==(o="0 0 "+t[0]+"\n    "+t[1]))&&li(e,"viewBox",o)},i(t){n||(Vi(r,t),n=!0)},o(t){Zi(r,t),n=!1},d(t){t&&ti(e),r&&r.d(t)}}}function Qs(t,e,o){let{$$slots:n={},$$scope:i}=e,{width:r=24}=e,{height:a=24}=e,{style:s}=e,{class:l}=e;return t.$$set=t=>{"width"in t&&o(0,r=t.width),"height"in t&&o(1,a=t.height),"style"in t&&o(2,s=t.style),"class"in t&&o(3,l=t.class),"$$scope"in t&&o(4,i=t.$$scope)},[r,a,s,l,i,n]}class tl extends ar{constructor(t){super(),rr(this,t,Qs,Js,In,{width:0,height:1,style:2,class:3})}}var el=(t,e={})=>{const{direction:o,shiftMultiplier:n=10,bubbles:i=!1,preventDefault:r=!1,stopKeydownPropagation:a=!0}=e,s="horizontal"===o,l="vertical"===o,c=e=>{const{key:o}=e,c=e.shiftKey,d=/up|down/i.test(o),u=/left|right/i.test(o);if(!u&&!d)return;if(s&&d)return;if(l&&u)return;const h=c?n:1;a&&e.stopPropagation(),r&&e.preventDefault(),t.dispatchEvent(new CustomEvent("nudge",{bubbles:i,detail:tt((/left/i.test(o)?-1:/right/i.test(o)?1:0)*h,(/up/i.test(o)?-1:/down/i.test(o)?1:0)*h)}))};return t.addEventListener("keydown",c),{destroy(){t.removeEventListener("keydown",c)}}},ol=(t,e,o)=>(t-e)/(o-e);const nl=t=>({}),il=t=>({});function rl(t){let e,o,n,i,r,a,s,l;return o=new tl({props:{$$slots:{default:[al]},$$scope:{ctx:t}}}),r=new tl({props:{$$slots:{default:[sl]},$$scope:{ctx:t}}}),{c(){e=ei("button"),or(o.$$.fragment),n=ii(),i=ei("button"),or(r.$$.fragment),li(e,"type","button"),li(e,"aria-label","Increase"),li(i,"type","button"),li(i,"aria-label","Decrease")},m(c,d){Qn(c,e,d),nr(o,e,null),Qn(c,n,d),Qn(c,i,d),nr(r,i,null),a=!0,s||(l=[ai(e,"pointerdown",t[20](1)),ai(i,"pointerdown",t[20](-1))],s=!0)},p(t,e){const n={};128&e[1]&&(n.$$scope={dirty:e,ctx:t}),o.$set(n);const i={};128&e[1]&&(i.$$scope={dirty:e,ctx:t}),r.$set(i)},i(t){a||(Vi(o.$$.fragment,t),Vi(r.$$.fragment,t),a=!0)},o(t){Zi(o.$$.fragment,t),Zi(r.$$.fragment,t),a=!1},d(t){t&&ti(e),ir(o),t&&ti(n),t&&ti(i),ir(r),s=!1,An(l)}}}function al(t){let e;return{c(){e=oi("path"),li(e,"d","M8 12 h8 M12 8 v8")},m(t,o){Qn(t,e,o)},p:Mn,d(t){t&&ti(e)}}}function sl(t){let e;return{c(){e=oi("path"),li(e,"d","M9 12 h6")},m(t,o){Qn(t,e,o)},p:Mn,d(t){t&&ti(e)}}}function ll(t){let e,o,n,i,r,a,s,l,c,d,u,h,p,m,g,f,$;const y=t[36].default,b=Fn(y,t,t[38],null),x=t[36].knob,v=Fn(x,t,t[38],il);let w=t[9]&&rl(t);return{c(){e=ei("div"),o=ei("div"),n=ei("input"),r=ii(),a=ei("div"),b&&b.c(),l=ii(),c=ei("div"),d=ei("div"),v&&v.c(),p=ii(),w&&w.c(),li(n,"type","range"),li(n,"id",t[3]),li(n,"min",t[0]),li(n,"max",t[1]),li(n,"step",t[2]),n.value=t[14],li(n,"style",i=t[10]?"pointer-events:none":""),li(a,"class",s=Ts(["PinturaSliderTrack",t[5]])),li(a,"style",t[4]),li(d,"class",u=Ts(["PinturaSliderKnob",t[7]])),li(d,"style",t[6]),li(c,"class","PinturaSliderKnobController"),li(c,"style",t[17]),li(o,"class","PinturaSliderControl"),li(o,"style",h=`--slider-position:${Math.round(t[15])}`),li(e,"class",m=Ts(["PinturaSlider",t[12]])),li(e,"data-direction",t[8])},m(i,s){Qn(i,e,s),Yn(e,o),Yn(o,n),t[37](n),Yn(o,r),Yn(o,a),b&&b.m(a,null),Yn(o,l),Yn(o,c),Yn(c,d),v&&v.m(d,null),Yn(e,p),w&&w.m(e,null),g=!0,f||($=[ai(n,"input",t[18]),ai(n,"nudge",t[19]),Hn(el.call(null,n)),ai(o,"pointerdown",(function(){Tn(t[11]&&t[13])&&(t[11]&&t[13]).apply(this,arguments)}))],f=!0)},p(r,l){t=r,(!g||8&l[0])&&li(n,"id",t[3]),(!g||1&l[0])&&li(n,"min",t[0]),(!g||2&l[0])&&li(n,"max",t[1]),(!g||4&l[0])&&li(n,"step",t[2]),(!g||16384&l[0])&&(n.value=t[14]),(!g||1024&l[0]&&i!==(i=t[10]?"pointer-events:none":""))&&li(n,"style",i),b&&b.p&&(!g||128&l[1])&&Dn(b,y,t,t[38],g?On(y,t[38],l,null):_n(t[38]),null),(!g||32&l[0]&&s!==(s=Ts(["PinturaSliderTrack",t[5]])))&&li(a,"class",s),(!g||16&l[0])&&li(a,"style",t[4]),v&&v.p&&(!g||128&l[1])&&Dn(v,x,t,t[38],g?On(x,t[38],l,nl):_n(t[38]),il),(!g||128&l[0]&&u!==(u=Ts(["PinturaSliderKnob",t[7]])))&&li(d,"class",u),(!g||64&l[0])&&li(d,"style",t[6]),(!g||131072&l[0])&&li(c,"style",t[17]),(!g||32768&l[0]&&h!==(h=`--slider-position:${Math.round(t[15])}`))&&li(o,"style",h),t[9]?w?(w.p(t,l),512&l[0]&&Vi(w,1)):(w=rl(t),w.c(),Vi(w,1),w.m(e,null)):w&&(Hi(),Zi(w,1,1,(()=>{w=null})),Ui()),(!g||4096&l[0]&&m!==(m=Ts(["PinturaSlider",t[12]])))&&li(e,"class",m),(!g||256&l[0])&&li(e,"data-direction",t[8])},i(t){g||(Vi(b,t),Vi(v,t),Vi(w),g=!0)},o(t){Zi(b,t),Zi(v,t),Zi(w),g=!1},d(o){o&&ti(e),t[37](null),b&&b.d(o),v&&v.d(o),w&&w.d(),f=!1,An($)}}}function cl(t,e,o){let n,i,a,s,l,c,d,u,h,p,m,g,f,$,y,{$$slots:b={},$$scope:x}=e,{min:w=0}=e,{max:C=100}=e,{step:M=1}=e,{id:k}=e,{value:S=0}=e,{valueMin:P}=e,{valueMax:R}=e,{trackStyle:A}=e,{trackClass:T}=e,{knobStyle:I}=e,{knobClass:E}=e,{ongrab:L=r}=e,{onchange:z=r}=e,{onrelease:F=r}=e,{onexceed:B=r}=e,{direction:D="x"}=e,{getValue:_=O}=e,{setValue:W=O}=e,{enableSpinButtons:j=!0}=e,{enableForceUseKnob:N=!1}=e,{enableStopPropagation:H=!0}=e,{enablePointerdownListener:U=!0}=e,{maxInteractionDistance:V=6}=e,{class:Z}=e;const G=t=>W(((t,e)=>(e=1/e,Math.round(t*e)/e))(Pr(t,w,C),M)),q=(t,e,n={})=>{const{grabbed:r=!1,released:a=!1}=n,s=G(w+t/e*i),l=P||w,c=R||C;o(21,S=v(s)?s:Pr(s,l,c)),y!==s&&(y=s,!v(s)&&(s<l||s>c)&&B(S,s),S!==$&&($=S,r&&L(S),z(S),a&&F(S)))};let X;const Y=t=>{const e=t[u]-f;q(g+e,m)},K=t=>{m=void 0,document.documentElement.removeEventListener("pointermove",Y),document.documentElement.removeEventListener("pointerup",K),z(S),F(S)},J=()=>{o(21,S=G(n+tt*M)),z(S)};let Q,tt=1,et=!1;const ot=t=>{clearTimeout(Q),et||J(),F(S),document.removeEventListener("pointerup",ot)};return t.$$set=t=>{"min"in t&&o(0,w=t.min),"max"in t&&o(1,C=t.max),"step"in t&&o(2,M=t.step),"id"in t&&o(3,k=t.id),"value"in t&&o(21,S=t.value),"valueMin"in t&&o(22,P=t.valueMin),"valueMax"in t&&o(23,R=t.valueMax),"trackStyle"in t&&o(4,A=t.trackStyle),"trackClass"in t&&o(5,T=t.trackClass),"knobStyle"in t&&o(6,I=t.knobStyle),"knobClass"in t&&o(7,E=t.knobClass),"ongrab"in t&&o(24,L=t.ongrab),"onchange"in t&&o(25,z=t.onchange),"onrelease"in t&&o(26,F=t.onrelease),"onexceed"in t&&o(27,B=t.onexceed),"direction"in t&&o(8,D=t.direction),"getValue"in t&&o(28,_=t.getValue),"setValue"in t&&o(29,W=t.setValue),"enableSpinButtons"in t&&o(9,j=t.enableSpinButtons),"enableForceUseKnob"in t&&o(10,N=t.enableForceUseKnob),"enableStopPropagation"in t&&o(30,H=t.enableStopPropagation),"enablePointerdownListener"in t&&o(11,U=t.enablePointerdownListener),"maxInteractionDistance"in t&&o(31,V=t.maxInteractionDistance),"class"in t&&o(12,Z=t.class),"$$scope"in t&&o(38,x=t.$$scope)},t.$$.update=()=>{270532608&t.$$.dirty[0]&&o(14,n=void 0!==S?_(S):0),3&t.$$.dirty[0]&&(i=C-w),16387&t.$$.dirty[0]&&o(33,a=ol(n,w,C)),4&t.$$.dirty[1]&&o(15,s=100*a),256&t.$$.dirty[0]&&o(34,l=D.toUpperCase()),256&t.$$.dirty[0]&&o(35,c="x"===D?"Width":"Height"),16&t.$$.dirty[1]&&(d=`offset${c}`),t.$$.dirty[1],8&t.$$.dirty[1]&&(u=`page${l}`),32768&t.$$.dirty[0]|8&t.$$.dirty[1]&&o(17,h=`transform: translate${l}(${s}%)`)},[w,C,M,k,A,T,I,E,D,j,N,U,Z,t=>{let e=!1;H&&t.stopPropagation(),clearTimeout(X);const o=p.getBoundingClientRect();if(m=p[d],f=t[u],g=f-o[D],N){if(Math.abs(g-a*m)>V)return;e=!0,t.stopPropagation()}return document.activeElement!==p&&p.focus(),q(g,m,{grabbed:!0}),document.documentElement.addEventListener("pointermove",Y),document.documentElement.addEventListener("pointerup",K),e},n,s,p,h,t=>{m||(o(21,S=W(parseFloat(t.target.value))),S!==$&&($=S,z(S)))},t=>{const e=p[d];q(n/i*e+t.detail[D],e),clearTimeout(X),X=setTimeout((()=>{F(S)}),250)},t=>e=>{clearTimeout(X),tt=t,et=!1,Q=setInterval((()=>{et=!0,J()}),100),document.addEventListener("pointercancel",ot),document.addEventListener("pointerup",ot)},S,P,R,L,z,F,B,_,W,H,V,t=>{const e=p.getBoundingClientRect(),o=t[u]-e[D],n=p[d];return Math.abs(o-a*n)},a,l,c,b,function(t){Si[t?"unshift":"push"]((()=>{p=t,o(16,p)}))},x]}class dl extends ar{constructor(t){super(),rr(this,t,cl,ll,In,{min:0,max:1,step:2,id:3,value:21,valueMin:22,valueMax:23,trackStyle:4,trackClass:5,knobStyle:6,knobClass:7,ongrab:24,onchange:25,onrelease:26,onexceed:27,direction:8,getValue:28,setValue:29,enableSpinButtons:9,enableForceUseKnob:10,enableStopPropagation:30,enablePointerdownListener:11,maxInteractionDistance:31,class:12,eventDistanceToKnob:32,handlePointerDown:13},null,[-1,-1])}get eventDistanceToKnob(){return this.$$.ctx[32]}get handlePointerDown(){return this.$$.ctx[13]}}var ul=(t,e)=>e===t.target||e.contains(t.target);function hl(t){let e,o;return e=new tl({props:{class:"PinturaButtonIcon",$$slots:{default:[pl]},$$scope:{ctx:t}}}),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const n={};134217730&o&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function pl(t){let e;return{c(){e=oi("g")},m(o,n){Qn(o,e,n),e.innerHTML=t[1]},p(t,o){2&o&&(e.innerHTML=t[1])},d(t){t&&ti(e)}}}function ml(t){let e,o;return{c(){e=ei("span"),o=ni(t[0]),li(e,"class",t[9])},m(t,n){Qn(t,e,n),Yn(e,o)},p(t,n){1&n&&di(o,t[0]),512&n&&li(e,"class",t[9])},d(t){t&&ti(e)}}}function gl(t){let e,o,n,i;const r=t[25].default,a=Fn(r,t,t[27],null),s=a||function(t){let e,o,n,i=t[1]&&hl(t),r=t[0]&&ml(t);return{c(){e=ei("span"),i&&i.c(),o=ii(),r&&r.c(),li(e,"class",t[11])},m(t,a){Qn(t,e,a),i&&i.m(e,null),Yn(e,o),r&&r.m(e,null),n=!0},p(t,a){t[1]?i?(i.p(t,a),2&a&&Vi(i,1)):(i=hl(t),i.c(),Vi(i,1),i.m(e,o)):i&&(Hi(),Zi(i,1,1,(()=>{i=null})),Ui()),t[0]?r?r.p(t,a):(r=ml(t),r.c(),r.m(e,null)):r&&(r.d(1),r=null),(!n||2048&a)&&li(e,"class",t[11])},i(t){n||(Vi(i),n=!0)},o(t){Zi(i),n=!1},d(t){t&&ti(e),i&&i.d(),r&&r.d()}}}(t);return{c(){e=ei("button"),s&&s.c(),li(e,"type",t[4]),li(e,"style",t[2]),e.disabled=t[3],li(e,"class",t[10]),li(e,"title",t[0])},m(r,a){Qn(r,e,a),s&&s.m(e,null),t[26](e),o=!0,n||(i=[ai(e,"keydown",(function(){Tn(t[6])&&t[6].apply(this,arguments)})),ai(e,"click",(function(){Tn(t[5])&&t[5].apply(this,arguments)})),ai(e,"pointerdown",(function(){Tn(t[12])&&t[12].apply(this,arguments)})),Hn(t[7].call(null,e))],n=!0)},p(n,[i]){t=n,a?a.p&&(!o||134217728&i)&&Dn(a,r,t,t[27],o?On(r,t[27],i,null):_n(t[27]),null):s&&s.p&&(!o||2563&i)&&s.p(t,o?i:-1),(!o||16&i)&&li(e,"type",t[4]),(!o||4&i)&&li(e,"style",t[2]),(!o||8&i)&&(e.disabled=t[3]),(!o||1024&i)&&li(e,"class",t[10]),(!o||1&i)&&li(e,"title",t[0])},i(t){o||(Vi(s,t),o=!0)},o(t){Zi(s,t),o=!1},d(o){o&&ti(e),s&&s.d(o),t[26](null),n=!1,An(i)}}}function fl(t,e,o){let n,i,r,a,s,l,{$$slots:c={},$$scope:d}=e,{class:u}=e,{label:h}=e,{labelClass:p}=e,{innerClass:m}=e,{hideLabel:g=!1}=e,{icon:f}=e,{style:$}=e,{disabled:y}=e,{type:b="button"}=e,{onclick:x}=e,{onkeydown:v}=e,{onhold:w}=e,{action:C=(()=>{})}=e,{holdThreshold:M=500}=e,{holdSpeedUpFactor:k=.5}=e,{holdSpeedMin:S=20}=e;const P=t=>{o(23,l=setTimeout((()=>{w(),P(Math.max(t*k,S))}),t))};let R;return t.$$set=t=>{"class"in t&&o(13,u=t.class),"label"in t&&o(0,h=t.label),"labelClass"in t&&o(14,p=t.labelClass),"innerClass"in t&&o(15,m=t.innerClass),"hideLabel"in t&&o(16,g=t.hideLabel),"icon"in t&&o(1,f=t.icon),"style"in t&&o(2,$=t.style),"disabled"in t&&o(3,y=t.disabled),"type"in t&&o(4,b=t.type),"onclick"in t&&o(5,x=t.onclick),"onkeydown"in t&&o(6,v=t.onkeydown),"onhold"in t&&o(17,w=t.onhold),"action"in t&&o(7,C=t.action),"holdThreshold"in t&&o(18,M=t.holdThreshold),"holdSpeedUpFactor"in t&&o(19,k=t.holdSpeedUpFactor),"holdSpeedMin"in t&&o(20,S=t.holdSpeedMin),"$$scope"in t&&o(27,d=t.$$scope)},t.$$.update=()=>{25296896&t.$$.dirty&&o(24,i=w?()=>{l&&(clearTimeout(l),o(23,l=void 0),document.documentElement.removeEventListener("pointerup",i))}:Mn),17170432&t.$$.dirty&&o(12,n=w?()=>{document.documentElement.addEventListener("pointerup",i),P(M)}:Mn),32768&t.$$.dirty&&o(11,r=Ts(["PinturaButtonInner",m])),73728&t.$$.dirty&&o(10,a=Ts(["PinturaButton",g&&"PinturaButtonIconOnly",u])),81920&t.$$.dirty&&o(9,s=Ts([g?"implicit":"PinturaButtonLabel",p]))},[h,f,$,y,b,x,v,C,R,s,a,r,n,u,p,m,g,w,M,k,S,t=>ul(t,R),()=>R,l,i,c,function(t){Si[t?"unshift":"push"]((()=>{R=t,o(8,R)}))},d]}class $l extends ar{constructor(t){super(),rr(this,t,fl,gl,In,{class:13,label:0,labelClass:14,innerClass:15,hideLabel:16,icon:1,style:2,disabled:3,type:4,onclick:5,onkeydown:6,onhold:17,action:7,holdThreshold:18,holdSpeedUpFactor:19,holdSpeedMin:20,isEventTarget:21,getElement:22})}get isEventTarget(){return this.$$.ctx[21]}get getElement(){return this.$$.ctx[22]}}function yl(t){let e,o,n,i;const r=[t[4]];function a(e){t[22](e)}var s=t[10];function l(t){let e={};for(let t=0;t<r.length;t+=1)e=Sn(e,r[t]);return void 0!==t[2]&&(e.name=t[2]),{props:e}}return s&&(e=new s(l(t)),Si.push((()=>er(e,"name",a))),t[23](e),e.$on("measure",t[11])),{c(){e&&or(e.$$.fragment),n=ri()},m(t,o){e&&nr(e,t,o),Qn(t,n,o),i=!0},p(t,i){const c=16&i?Qi(r,[tr(t[4])]):{};if(!o&&4&i&&(o=!0,c.name=t[2],zi((()=>o=!1))),s!==(s=t[10])){if(e){Hi();const t=e;Zi(t.$$.fragment,1,0,(()=>{ir(t,1)})),Ui()}s?(e=new s(l(t)),Si.push((()=>er(e,"name",a))),t[23](e),e.$on("measure",t[11]),or(e.$$.fragment),Vi(e.$$.fragment,1),nr(e,n.parentNode,n)):e=null}else s&&e.$set(c)},i(t){i||(e&&Vi(e.$$.fragment,t),i=!0)},o(t){e&&Zi(e.$$.fragment,t),i=!1},d(o){t[23](null),o&&ti(n),e&&ir(e,o)}}}function bl(t){let e,o,n,i=t[5]&&yl(t);return{c(){e=ei("div"),i&&i.c(),li(e,"data-util",t[2]),li(e,"class",o=Ts(["PinturaUtilPanel",t[1]])),li(e,"style",t[6])},m(o,r){Qn(o,e,r),i&&i.m(e,null),t[24](e),n=!0},p(t,[r]){t[5]?i?(i.p(t,r),32&r&&Vi(i,1)):(i=yl(t),i.c(),Vi(i,1),i.m(e,null)):i&&(Hi(),Zi(i,1,1,(()=>{i=null})),Ui()),(!n||4&r)&&li(e,"data-util",t[2]),(!n||2&r&&o!==(o=Ts(["PinturaUtilPanel",t[1]])))&&li(e,"class",o),(!n||64&r)&&li(e,"style",t[6])},i(t){n||(Vi(i),n=!0)},o(t){Zi(i),n=!1},d(o){o&&ti(e),i&&i.d(),t[24](null)}}}function xl(t,e,o){let n,i,r,a,s,l;const c=vi();let{isActive:d=!0}=e,{stores:u}=e,{content:h}=e,{component:p}=e,{locale:m}=e,{class:g}=e;const f=Ci("isAnimated");let $;zn(t,f,(t=>o(21,l=t)));const y=cs(0),b=dr(y,(t=>Pr(t,0,1)));zn(t,b,(t=>o(20,s=t)));let x=!d;const v=cr(d);zn(t,v,(t=>o(25,a=t)));const w={isActive:dr(v,(async(t,e)=>{if(!t)return e(t);await Ei(),e(t)})),isActiveFraction:dr(b,(t=>t)),isVisible:dr(b,(t=>t>0))},C=h.view,M=Ks(C),k=Object.keys(h.props||{}).reduce(((t,e)=>M.includes(e)?(t[e]=h.props[e],t):t),{}),S=Object.keys(w).reduce(((t,e)=>M.includes(e)?(t[e]=w[e],t):t),{});let P,R;const A=t=>{o(17,$={...t.detail}),T&&d&&c("measure",{...$})};let T=!1;return bi((()=>{if(o(19,T=!0),r)return;o(0,p=new C({target:R,props:{...i}})),o(2,P=p.name);const t=p.$on("measure",A);return()=>{t(),p.$destroy()}})),t.$$set=t=>{"isActive"in t&&o(12,d=t.isActive),"stores"in t&&o(13,u=t.stores),"content"in t&&o(14,h=t.content),"component"in t&&o(0,p=t.component),"locale"in t&&o(15,m=t.locale),"class"in t&&o(1,g=t.class)},t.$$.update=()=>{135169&t.$$.dirty&&$&&d&&p&&c("measure",$),2101248&t.$$.dirty&&y.set(d?1:0,{hard:!1===l}),1310720&t.$$.dirty&&(s<=0&&!x?o(18,x=!0):s>0&&x&&o(18,x=!1)),786432&t.$$.dirty&&T&&c(x?"hide":"show"),1048576&t.$$.dirty&&c("fade",s),1048576&t.$$.dirty&&o(6,n=s<1?`opacity: ${s}`:void 0),4096&t.$$.dirty&&Nn(v,a=d,a),40960&t.$$.dirty&&o(4,i={...k,...S,stores:u,locale:m})},o(5,r=!M.includes("external")),[p,g,P,R,i,r,n,f,b,v,C,A,d,u,h,m,y,$,x,T,s,l,function(t){P=t,o(2,P)},function(t){Si[t?"unshift":"push"]((()=>{p=t,o(0,p)}))},function(t){Si[t?"unshift":"push"]((()=>{R=t,o(3,R)}))}]}class vl extends ar{constructor(t){super(),rr(this,t,xl,bl,In,{isActive:12,stores:13,content:14,component:0,locale:15,class:1,opacity:16})}get opacity(){return this.$$.ctx[16]}}const wl=80;var Cl=(t,e={})=>{const{inertia:o=!1,inertiaDurationMultiplier:n=wl,shouldStartInteraction:i=(()=>!0),pinch:r=!1,multiTouch:a,getEventPosition:s=(t=>tt(t.clientX,t.clientY))}=e;function l(e,o){t.dispatchEvent(new CustomEvent(e,{detail:o}))}function c(){x&&x(),x=void 0}const d=[],u=t=>0===t.timeStamp?Date.now():t.timeStamp,h=()=>{const t=nt(d[0].position);if(d[1]){const e=.5*(d[1].position.x-t.x),o=.5*(d[1].position.y-t.y);t.x+=e,t.y+=o}return t},p=t=>{t.origin.x=t.position.x,t.origin.y=t.position.y,t.translation.x=0,t.translation.y=0},m=t=>{const e=(t=>d.findIndex((e=>e.event.pointerId===t.pointerId)))(t);if(!(e<0))return d[e]},g=()=>1===d.length,f=()=>2===d.length;let $,y,b,x,v,w,C,M,k,S=0;function P(e){if(!f()&&!(t=>ro(t.button)&&0!==t.button)(e)&&i(e,t))if(c(),(t=>{const e=u(t),o={timeStamp:e,timeStampInitial:e,position:s(t),origin:s(t),velocity:Q(),velocityHistory:[],velocityAverage:Q(),translation:Q(),interactionState:void 0,event:t};d.push(o),o.interactionState=(t=>{const e=$t(t.map((t=>t.position))),o=((t,e)=>t.reduce(((t,o)=>t+gt(e,o.position)),0)/t.length)(t,e);return{center:e,distance:o,velocity:$t(t.map((t=>t.velocity))),translation:$t(t.map((t=>t.translation)))}})(d)})(e),g())document.documentElement.addEventListener("pointermove",A),document.documentElement.addEventListener("pointerup",T),document.documentElement.addEventListener("pointercancel",T),M=!1,C=1,w=Q(),v=void 0,l("interactionstart",{origin:nt(m(e).origin)});else if(r)M=!0,v=gt(d[0].position,d[1].position),w.x+=d[0].translation.x,w.y+=d[0].translation.y,p(d[0]);else if(!1===a)return d.length=0,document.documentElement.removeEventListener("pointermove",A),document.documentElement.removeEventListener("pointerup",T),document.documentElement.removeEventListener("pointercancel",T),l("interactioncancel")}t.addEventListener("pointerdown",P);let R=Date.now();function A(t){t.preventDefault(),(t=>{const e=m(t);if(!e)return;const o=u(t),n=s(t),i=Math.max(1,o-e.timeStamp);e.velocity.x=(n.x-e.position.x)/i,e.velocity.y=(n.y-e.position.y)/i,e.velocityHistory.push(nt(e.velocity)),e.velocityHistory=e.velocityHistory.slice(-3),e.velocityAverage=e.velocityHistory.reduce(((t,e,o,n)=>(t.x+=e.x/n.length,t.y+=e.y/n.length,t)),Q()),e.translation.x=n.x-e.origin.x,e.translation.y=n.y-e.origin.y,e.timeStamp=o,e.position.x=n.x,e.position.y=n.y,e.event=t})(t);const e=nt(d[0].translation);let o=C;r&&f()&&(o*=gt(d[0].position,d[1].position)/v,dt(e,d[1].translation)),dt(e,w);const n=Date.now();n-R<16||(R=n,l("interactionupdate",{position:h(),translation:e,scalar:r?o:void 0,isMultiTouching:f()}))}function T(t){if(!m(t))return;const e=h(),i=(t=>{const e=((t,e)=>{const o=t.findIndex(e);if(o>=0)return t.splice(o,1)})(d,(e=>e.event.pointerId===t.pointerId));if(e)return e[0]})(t);if(r&&g()){const t=gt(d[0].position,i.position);C*=t/v,w.x+=d[0].translation.x+i.translation.x,w.y+=d[0].translation.y+i.translation.y,p(d[0])}let a=!1,s=!1;if(!M&&i){const t=performance.now(),e=t-i.timeStampInitial,o=mt(i.translation);a=o<64&&e<300,s=!!(k&&a&&t-S<700&&mt(k,i.position)<128),a&&(k=nt(i.position),S=t)}if(d.length>0)return;document.documentElement.removeEventListener("pointermove",A),document.documentElement.removeEventListener("pointerup",T),document.documentElement.removeEventListener("pointercancel",T);const c=nt(i.translation),u=nt(i.velocityAverage);let f=!1;l("interactionrelease",{isTap:a,isDoubleTap:s,position:e,translation:c,scalar:C,preventInertia:()=>f=!0});const P=gt(u);if(f||!o||P<.25)return E(c,{isTap:a,isDoubleTap:s});y=nt(e),b=nt(c),$=ss(nt(c),{easing:is,duration:P*n}),$.set({x:c.x+50*u.x,y:c.y+50*u.y}).then((()=>{x&&E(Ln($),{isTap:a,isDoubleTap:s})})),x=$.subscribe(I)}function I(t){t&&l("interactionupdate",{position:tt(y.x+(t.x-b.x),y.y+(t.y-b.y)),translation:t,scalar:r?C:void 0})}function E(t,e){c(),l("interactionend",{...e,translation:t,scalar:r?C:void 0})}return{destroy(){c(),t.removeEventListener("pointerdown",P)}}};function Ml(t,e){return e?e*Math.sign(t)*Math.log10(1+Math.abs(t)/e):t}const kl=(t,e,o)=>{if(!e||!o)return{...t};const n=t.x+Ml(e.x-t.x,o),i=t.x+t.width+Ml(e.x+e.width-(t.x+t.width),o),r=t.y+Ml(e.y-t.y,o);return{x:n,y:r,width:i-n,height:t.y+t.height+Ml(e.y+e.height-(t.y+t.height),o)-r}},Sl=(t,e,o)=>e&&o?tt(t.x+Ml(e.x-t.x,o),t.y+Ml(e.y-t.y,o)):{...t};var Pl=(t,e)=>{if(t)return/em/.test(t)?16*parseInt(t,10):/px/.test(t)?parseInt(t,10):void 0},Rl=t=>{let e=t.detail||0;const{deltaX:o,deltaY:n,wheelDelta:i,wheelDeltaX:r,wheelDeltaY:a}=t;return ro(r)&&Math.abs(r)>Math.abs(a)?e=r/-120:ro(o)&&Math.abs(o)>Math.abs(n)?e=o/20:(i||a)&&(e=(i||a)/-120),e||(e=n/20),(qa()||Se())&&(e*=2),e},Al={Up:38,Down:40,Left:37,Right:39};function Tl(t){let e,o,n,i,r,a,s;const l=t[36].default,c=Fn(l,t,t[35],null);return{c(){e=ei("div"),o=ei("div"),c&&c.c(),li(o,"style",t[5]),li(e,"class",n=Ts(["PinturaScrollable",t[0]])),li(e,"style",t[4]),li(e,"data-direction",t[1]),li(e,"data-state",t[6])},m(n,l){Qn(n,e,l),Yn(e,o),c&&c.m(o,null),t[38](e),r=!0,a||(s=[ai(o,"interactionstart",t[8]),ai(o,"interactionupdate",t[10]),ai(o,"interactionend",t[11]),ai(o,"interactionrelease",t[9]),Hn(Cl.call(null,o,{inertia:!0})),ai(o,"measure",t[37]),Hn(vs.call(null,o)),ai(e,"wheel",t[13],{passive:!1}),ai(e,"scroll",t[15]),ai(e,"focusin",t[14]),ai(e,"nudge",t[16]),ai(e,"measure",t[12]),Hn(vs.call(null,e,{observePosition:!0})),Hn(i=el.call(null,e,{direction:"x"===t[1]?"horizontal":"vertical",stopKeydownPropagation:!1}))],a=!0)},p(t,a){c&&c.p&&(!r||16&a[1])&&Dn(c,l,t,t[35],r?On(l,t[35],a,null):_n(t[35]),null),(!r||32&a[0])&&li(o,"style",t[5]),(!r||1&a[0]&&n!==(n=Ts(["PinturaScrollable",t[0]])))&&li(e,"class",n),(!r||16&a[0])&&li(e,"style",t[4]),(!r||2&a[0])&&li(e,"data-direction",t[1]),(!r||64&a[0])&&li(e,"data-state",t[6]),i&&Tn(i.update)&&2&a[0]&&i.update.call(null,{direction:"x"===t[1]?"horizontal":"vertical",stopKeydownPropagation:!1})},i(t){r||(Vi(c,t),r=!0)},o(t){Zi(c,t),r=!1},d(o){o&&ti(e),c&&c.d(o),t[38](null),a=!1,An(s)}}}function Il(t,e,o){let n,i,a,s,l,c,d,u,{$$slots:h={},$$scope:p}=e;const m=vi();Object.values(Al),Ci("keysPressed");let g,f,$,y,b="idle",x=cs(0);zn(t,x,(t=>o(34,u=t)));let v,{class:w}=e,{scrollBlockInteractionDist:C=5}=e,{scrollStep:M=10}=e,{scrollFocusMargin:k=64}=e,{scrollDirection:S="x"}=e,{scrollAutoCancel:P=!1}=e,{elasticity:R=0}=e,{onscroll:A=r}=e,{maskFeatherSize:T}=e,{maskFeatherStartOpacity:I}=e,{maskFeatherEndOpacity:E}=e,{scroll:L}=e,z="",F=!0;const B=x.subscribe((t=>{const e=Q();e[S]=t,A(e)})),O=t=>Math.max(Math.min(0,t),$[n]-f[n]);let D,_,W;const j=(t,e={})=>{const{elastic:n=!1,animate:i=!1,preventScrollState:r=!1}=e;Math.abs(t)>C&&"idle"===b&&!y&&!r&&o(27,b="scrolling");const a=O(t),s=n&&R&&!y?a+Ml(t-a,R):a;let l=!0;i?l=!1:F||(l=!y),F=!1,x.set(s,{hard:l}).then((t=>{y&&(F=!0)}))};return xi((()=>{B()})),t.$$set=t=>{"class"in t&&o(0,w=t.class),"scrollBlockInteractionDist"in t&&o(20,C=t.scrollBlockInteractionDist),"scrollStep"in t&&o(21,M=t.scrollStep),"scrollFocusMargin"in t&&o(22,k=t.scrollFocusMargin),"scrollDirection"in t&&o(1,S=t.scrollDirection),"scrollAutoCancel"in t&&o(23,P=t.scrollAutoCancel),"elasticity"in t&&o(24,R=t.elasticity),"onscroll"in t&&o(25,A=t.onscroll),"maskFeatherSize"in t&&o(19,T=t.maskFeatherSize),"maskFeatherStartOpacity"in t&&o(17,I=t.maskFeatherStartOpacity),"maskFeatherEndOpacity"in t&&o(18,E=t.maskFeatherEndOpacity),"scroll"in t&&o(26,L=t.scroll),"$$scope"in t&&o(35,p=t.$$scope)},t.$$.update=()=>{if(2&t.$$.dirty[0]&&o(31,n="x"===S?"width":"height"),2&t.$$.dirty[0]&&o(29,i=S.toUpperCase()),8&t.$$.dirty[0]&&o(33,a=v&&getComputedStyle(v)),8&t.$$.dirty[0]|4&t.$$.dirty[1]&&o(32,s=a&&Pl(a.getPropertyValue("--scrollable-feather-size"))),268828676&t.$$.dirty[0]|11&t.$$.dirty[1]&&null!=u&&$&&null!=s&&f){const t=-1*u/s,e=-($[n]-f[n]-u)/s;o(17,I=Pr(1-t,0,1)),o(18,E=Pr(1-e,0,1)),o(19,T=s),o(4,z=`--scrollable-feather-start-opacity: ${I};--scrollable-feather-end-opacity: ${E}`)}67108872&t.$$.dirty[0]&&v&&void 0!==L&&(ro(L)?j(L):j(L.scrollOffset,L)),268435460&t.$$.dirty[0]|1&t.$$.dirty[1]&&o(30,l=$&&f?f[n]>$[n]:void 0),1207959552&t.$$.dirty[0]&&o(6,c=Ts([b,l?"overflows":void 0])),1610612736&t.$$.dirty[0]|8&t.$$.dirty[1]&&o(5,d=l?`transform: translate${i}(${u}px)`:void 0)},[w,S,f,v,z,d,c,x,()=>{l&&(_=!1,D=!0,W=tt(0,0),y=!1,o(27,b="idle"),g=Ln(x))},({detail:t})=>{l&&(y=!0,o(27,b="idle"))},({detail:t})=>{l&&(_||D&&(D=!1,mt(t.translation)<.1)||(!P||"x"!==S||(t=>{const e=ct(tt(t.x-W.x,t.y-W.y),Math.abs);W=nt(t);const o=mt(e),n=e.x-e.y;return!(o>1&&n<-.5)})(t.translation)?j(g+t.translation[S],{elastic:!0}):_=!0))},({detail:t})=>{if(!l)return;if(_)return;const e=g+t.translation[S],o=O(e);F=!1,x.set(o).then((t=>{y&&(F=!0)}))},({detail:t})=>{o(28,$=t),m("measure",{x:t.x,y:t.y,width:t.width,height:t.height})},t=>{if(!l)return;t.preventDefault(),t.stopPropagation();const e=t.shiftKey,o=Rl(t)*(e?-1:1),n=Ln(x);j(n+o*M,{animate:!0})},t=>{if(!l)return;if(!y)return;let e=t.target;t.target.classList.contains("implicit")&&(e=e.parentNode);const o=e["x"===S?"offsetLeft":"offsetTop"],i=o+e["x"===S?"offsetWidth":"offsetHeight"],r=Ln(x),a=k+T;r+o<a?j(-o+a):r+i>$[n]-a&&j($[n]-i-a,{animate:!0})},()=>{o(3,v["x"===S?"scrollLeft":"scrollTop"]=0,v)},({detail:t})=>{if(v.querySelector("[data-focus-visible]"))return;const e=-2*t[S],o=Ln(x);j(o+e*M,{animate:!0,preventScrollState:!0})},I,E,T,C,M,k,P,R,A,L,b,$,i,l,n,s,a,u,p,h,t=>o(2,f=t.detail),function(t){Si[t?"unshift":"push"]((()=>{v=t,o(3,v)}))}]}class El extends ar{constructor(t){super(),rr(this,t,Il,Tl,In,{class:0,scrollBlockInteractionDist:20,scrollStep:21,scrollFocusMargin:22,scrollDirection:1,scrollAutoCancel:23,elasticity:24,onscroll:25,maskFeatherSize:19,maskFeatherStartOpacity:17,maskFeatherEndOpacity:18,scroll:26},null,[-1,-1])}}function Ll(t,{delay:e=0,duration:o=400,easing:n=kn}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:o,easing:n,css:t=>"opacity: "+t*i}}function zl(t){let e,o,n,i,r;return{c(){e=ei("span"),li(e,"class","PinturaStatusMessage")},m(o,a){Qn(o,e,a),e.innerHTML=t[0],n=!0,i||(r=[ai(e,"measure",(function(){Tn(t[1])&&t[1].apply(this,arguments)})),Hn(vs.call(null,e))],i=!0)},p(o,[i]){t=o,(!n||1&i)&&(e.innerHTML=t[0])},i(t){n||(Li((()=>{o||(o=qi(e,Ll,{duration:500},!0)),o.run(1)})),n=!0)},o(t){o||(o=qi(e,Ll,{duration:500},!1)),o.run(0),n=!1},d(t){t&&ti(e),t&&o&&o.end(),i=!1,An(r)}}}function Fl(t,e,o){let{text:n}=e,{onmeasure:i=r}=e;return t.$$set=t=>{"text"in t&&o(0,n=t.text),"onmeasure"in t&&o(1,i=t.onmeasure)},[n,i]}class Bl extends ar{constructor(t){super(),rr(this,t,Fl,zl,In,{text:0,onmeasure:1})}}function Ol(t){let e,o,n,i,r,a,s,l;return{c(){e=ei("span"),o=oi("svg"),n=oi("g"),i=oi("circle"),r=oi("circle"),a=ii(),s=ei("span"),l=ni(t[3]),li(i,"class","PinturaProgressIndicatorBar"),li(i,"r","8.5"),li(i,"cx","10"),li(i,"cy","10"),li(i,"stroke-linecap","round"),li(i,"opacity",".25"),li(r,"class","PinturaProgressIndicatorFill"),li(r,"r","8.5"),li(r,"stroke-dasharray",t[2]),li(r,"cx","10"),li(r,"cy","10"),li(r,"transform","rotate(-90) translate(-20)"),li(n,"fill","none"),li(n,"stroke","currentColor"),li(n,"stroke-width","2.5"),li(n,"stroke-linecap","round"),li(n,"opacity",t[1]),li(o,"width","20"),li(o,"height","20"),li(o,"viewBox","0 0 20 20"),li(o,"xmlns","http://www.w3.org/2000/svg"),li(o,"aria-hidden","true"),li(o,"focusable","false"),li(s,"class","implicit"),li(e,"class","PinturaProgressIndicator"),li(e,"data-status",t[0])},m(t,c){Qn(t,e,c),Yn(e,o),Yn(o,n),Yn(n,i),Yn(n,r),Yn(e,a),Yn(e,s),Yn(s,l)},p(t,[o]){4&o&&li(r,"stroke-dasharray",t[2]),2&o&&li(n,"opacity",t[1]),8&o&&di(l,t[3]),1&o&&li(e,"data-status",t[0])},i:Mn,o:Mn,d(t){t&&ti(e)}}}function Dl(t,e,o){let n,i,r,a,s,l;const c=vi();let{progress:d}=e,{min:u=0}=e,{max:h=100}=e,{labelBusy:p="Busy"}=e;const m=cs(0,{precision:.01}),g=cs(0,{precision:.01});zn(t,g,(t=>o(10,s=t)));const f=dr([m],(t=>Pr(t,u,h)));zn(t,f,(t=>o(11,l=t)));const $=f.subscribe((t=>{1===d&&Math.round(t)>=100&&c("complete")}));return bi((()=>{g.set(1)})),xi((()=>{$()})),t.$$set=t=>{"progress"in t&&o(6,d=t.progress),"min"in t&&o(7,u=t.min),"max"in t&&o(8,h=t.max),"labelBusy"in t&&o(9,p=t.labelBusy)},t.$$.update=()=>{64&t.$$.dirty&&d&&d!==1/0&&m.set(100*d),2624&t.$$.dirty&&o(3,n=d===1/0?p:`${Math.round(l)}%`),2112&t.$$.dirty&&o(2,i=d===1/0?"26.5 53":l/100*53+" 53"),1024&t.$$.dirty&&o(1,r=s),64&t.$$.dirty&&o(0,a=d===1/0?"busy":"loading")},[a,r,i,n,g,f,d,u,h,p,s,l]}class _l extends ar{constructor(t){super(),rr(this,t,Dl,Ol,In,{progress:6,min:7,max:8,labelBusy:9})}}function Wl(t){let e,o,n;const i=t[5].default,r=Fn(i,t,t[4],null);return{c(){e=ei("span"),r&&r.c(),li(e,"class",o=`PinturaStatusAside ${t[0]}`),li(e,"style",t[1])},m(t,o){Qn(t,e,o),r&&r.m(e,null),n=!0},p(t,[a]){r&&r.p&&(!n||16&a)&&Dn(r,i,t,t[4],n?On(i,t[4],a,null):_n(t[4]),null),(!n||1&a&&o!==(o=`PinturaStatusAside ${t[0]}`))&&li(e,"class",o),(!n||2&a)&&li(e,"style",t[1])},i(t){n||(Vi(r,t),n=!0)},o(t){Zi(r,t),n=!1},d(t){t&&ti(e),r&&r.d(t)}}}function jl(t,e,o){let n,{$$slots:i={},$$scope:r}=e,{offset:a=0}=e,{opacity:s=0}=e,{class:l}=e;return t.$$set=t=>{"offset"in t&&o(2,a=t.offset),"opacity"in t&&o(3,s=t.opacity),"class"in t&&o(0,l=t.class),"$$scope"in t&&o(4,r=t.$$scope)},t.$$.update=()=>{12&t.$$.dirty&&o(1,n=`transform:translateX(${a}px);opacity:${s}`)},[l,n,a,s,r,i]}class Nl extends ar{constructor(t){super(),rr(this,t,jl,Wl,In,{offset:2,opacity:3,class:0})}}function Hl(t){let e,o,n;const i=t[3].default,r=Fn(i,t,t[2],null);let a=[{for:o="_"},t[1]],s={};for(let t=0;t<a.length;t+=1)s=Sn(s,a[t]);return{c(){e=ei("label"),r&&r.c(),ci(e,s)},m(t,o){Qn(t,e,o),r&&r.m(e,null),n=!0},p(t,o){r&&r.p&&(!n||4&o)&&Dn(r,i,t,t[2],n?On(i,t[2],o,null):_n(t[2]),null),ci(e,s=Qi(a,[{for:"_"},2&o&&t[1]]))},i(t){n||(Vi(r,t),n=!0)},o(t){Zi(r,t),n=!1},d(t){t&&ti(e),r&&r.d(t)}}}function Ul(t){let e,o;const n=t[3].default,i=Fn(n,t,t[2],null);let r=[t[1]],a={};for(let t=0;t<r.length;t+=1)a=Sn(a,r[t]);return{c(){e=ei("div"),i&&i.c(),ci(e,a)},m(t,n){Qn(t,e,n),i&&i.m(e,null),o=!0},p(t,s){i&&i.p&&(!o||4&s)&&Dn(i,n,t,t[2],o?On(n,t[2],s,null):_n(t[2]),null),ci(e,a=Qi(r,[2&s&&t[1]]))},i(t){o||(Vi(i,t),o=!0)},o(t){Zi(i,t),o=!1},d(t){t&&ti(e),i&&i.d(t)}}}function Vl(t){let e,o;const n=t[3].default,i=Fn(n,t,t[2],null);let r=[t[1]],a={};for(let t=0;t<r.length;t+=1)a=Sn(a,r[t]);return{c(){e=ei("div"),i&&i.c(),ci(e,a)},m(t,n){Qn(t,e,n),i&&i.m(e,null),o=!0},p(t,s){i&&i.p&&(!o||4&s)&&Dn(i,n,t,t[2],o?On(n,t[2],s,null):_n(t[2]),null),ci(e,a=Qi(r,[2&s&&t[1]]))},i(t){o||(Vi(i,t),o=!0)},o(t){Zi(i,t),o=!1},d(t){t&&ti(e),i&&i.d(t)}}}function Zl(t){let e,o,n,i;const r=[Vl,Ul,Hl],a=[];function s(t,e){return"div"===t[0]?0:"span"===t[0]?1:"label"===t[0]?2:-1}return~(e=s(t))&&(o=a[e]=r[e](t)),{c(){o&&o.c(),n=ri()},m(t,o){~e&&a[e].m(t,o),Qn(t,n,o),i=!0},p(t,[i]){let l=e;e=s(t),e===l?~e&&a[e].p(t,i):(o&&(Hi(),Zi(a[l],1,1,(()=>{a[l]=null})),Ui()),~e?(o=a[e],o?o.p(t,i):(o=a[e]=r[e](t),o.c()),Vi(o,1),o.m(n.parentNode,n)):o=null)},i(t){i||(Vi(o),i=!0)},o(t){Zi(o),i=!1},d(t){~e&&a[e].d(t),t&&ti(n)}}}function Gl(t,e,o){let{$$slots:n={},$$scope:i}=e,{name:r="div"}=e,{attributes:a={}}=e;return t.$$set=t=>{"name"in t&&o(0,r=t.name),"attributes"in t&&o(1,a=t.attributes),"$$scope"in t&&o(2,i=t.$$scope)},[r,a,i,n]}class ql extends ar{constructor(t){super(),rr(this,t,Gl,Zl,In,{name:0,attributes:1})}}var Xl=()=>l()&&window.devicePixelRatio||1;let Yl=null;var Kl=t=>(null===Yl&&(Yl=1===Xl()?Math.round:t=>t),Yl(t)),Jl=(t,e={})=>{if(t){if(e.preventScroll&&Se()){const e=document.body.scrollTop;return t.focus(),void(document.body.scrollTop=e)}t.focus(e)}};const Ql=t=>({}),tc=t=>({}),ec=t=>({}),oc=t=>({});function nc(t){let e,o;const n=[t[7]];let i={$$slots:{default:[rc]},$$scope:{ctx:t}};for(let t=0;t<n.length;t+=1)i=Sn(i,n[t]);return e=new $l({props:i}),t[40](e),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const i=128&o[0]?Qi(n,[tr(t[7])]):{};8192&o[1]&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(o){t[40](null),ir(e,o)}}}function ic(t){let e,o;const n=[t[7]];let i={};for(let t=0;t<n.length;t+=1)i=Sn(i,n[t]);return e=new $l({props:i}),t[39](e),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const i=128&o[0]?Qi(n,[tr(t[7])]):{};e.$set(i)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(o){t[39](null),ir(e,o)}}}function rc(t){let e;const o=t[38].label,n=Fn(o,t,t[44],oc);return{c(){n&&n.c()},m(t,o){n&&n.m(t,o),e=!0},p(t,i){n&&n.p&&(!e||8192&i[1])&&Dn(n,o,t,t[44],e?On(o,t[44],i,ec):_n(t[44]),oc)},i(t){e||(Vi(n,t),e=!0)},o(t){Zi(n,t),e=!1},d(t){n&&n.d(t)}}}function ac(t){let e,o,n,i,r,a,s;const l=t[38].details,c=Fn(l,t,t[44],tc);return{c(){e=ei("div"),c&&c.c(),o=ii(),n=ei("span"),li(n,"class","PinturaPanelTip"),li(n,"style",t[10]),li(e,"class",i=Ts(["PinturaPanel","pintura-editor-panel",t[2]])),li(e,"tabindex","-1"),li(e,"style",t[11])},m(i,l){Qn(i,e,l),c&&c.m(e,null),Yn(e,o),Yn(e,n),t[41](e),r=!0,a||(s=[ai(e,"close",t[42]),ai(e,"keydown",t[18]),ai(e,"measure",t[43]),Hn(vs.call(null,e))],a=!0)},p(t,o){c&&c.p&&(!r||8192&o[1])&&Dn(c,l,t,t[44],r?On(l,t[44],o,Ql):_n(t[44]),tc),(!r||1024&o[0])&&li(n,"style",t[10]),(!r||4&o[0]&&i!==(i=Ts(["PinturaPanel","pintura-editor-panel",t[2]])))&&li(e,"class",i),(!r||2048&o[0])&&li(e,"style",t[11])},i(t){r||(Vi(c,t),r=!0)},o(t){Zi(c,t),r=!1},d(o){o&&ti(e),c&&c.d(o),t[41](null),a=!1,An(s)}}}function sc(t){let e,o,n,i,r,a,s,l,c;const d=[ic,nc],u=[];function h(t,e){return t[1]?0:1}o=h(t),n=u[o]=d[o](t);let p=t[6]&&ac(t);return{c(){e=ii(),n.c(),i=ii(),p&&p.c(),r=ii(),a=ri()},m(n,d){Qn(n,e,d),u[o].m(n,d),Qn(n,i,d),p&&p.m(n,d),Qn(n,r,d),Qn(n,a,d),s=!0,l||(c=[ai(document.body,"pointerdown",(function(){Tn(t[9])&&t[9].apply(this,arguments)})),ai(document.body,"pointerup",(function(){Tn(t[8])&&t[8].apply(this,arguments)}))],l=!0)},p(e,a){let s=o;o=h(t=e),o===s?u[o].p(t,a):(Hi(),Zi(u[s],1,1,(()=>{u[s]=null})),Ui(),n=u[o],n?n.p(t,a):(n=u[o]=d[o](t),n.c()),Vi(n,1),n.m(i.parentNode,i)),t[6]?p?(p.p(t,a),64&a[0]&&Vi(p,1)):(p=ac(t),p.c(),Vi(p,1),p.m(r.parentNode,r)):p&&(Hi(),Zi(p,1,1,(()=>{p=null})),Ui())},i(t){s||(Vi(n),Vi(p),Vi(!1),s=!0)},o(t){Zi(n),Zi(p),Zi(!1),s=!1},d(t){t&&ti(e),u[o].d(t),t&&ti(i),p&&p.d(t),t&&ti(r),t&&ti(a),l=!1,An(c)}}}let lc=12;function cc(t,e,o){let n,i,a,s,l,c,d,u,h,p,m,g,f,$,y,b,x,v,{$$slots:w={},$$scope:C}=e,{buttonClass:M}=e,{buttonLabel:k}=e,{panelClass:S}=e,{isActive:P=!1}=e,{onshow:R=(({panel:t})=>Jl(t,{preventScroll:!0}))}=e,{onhide:A=r}=e;const T=Ci("isAnimated");zn(t,T,(t=>o(37,v=t)));const I=Ci("rootPortal");zn(t,I,(t=>o(32,f=t)));const E=Ci("rootRect");let L,z,F;zn(t,E,(t=>o(36,x=t)));const B=()=>o(22,F=n&&n.getBoundingClientRect());let O=Q(),D=cs(0);zn(t,D,(t=>o(34,y=t)));let _=Q();const W=cr({x:0,y:0});zn(t,W,(t=>o(33,$=t)));const j=cs(-5,{stiffness:.1,damping:.35,precision:.001});zn(t,j,(t=>o(35,b=t)));const N=t=>ul(t,f)||z.isEventTarget(t);let H,U,V=!1;const Z=t=>{P||B(),o(26,U=t),o(0,P=!P)},G=t=>{/down/i.test(t.key)&&(o(0,P=!0),o(26,U=t))};return xi((()=>{if(!f)return;if(!H)return;const t=H;Ei().then((()=>{t.parentNode&&t.remove()}))})),t.$$set=t=>{"buttonClass"in t&&o(19,M=t.buttonClass),"buttonLabel"in t&&o(1,k=t.buttonLabel),"panelClass"in t&&o(2,S=t.panelClass),"isActive"in t&&o(0,P=t.isActive),"onshow"in t&&o(20,R=t.onshow),"onhide"in t&&o(21,A=t.onhide),"$$scope"in t&&o(44,C=t.$$scope)},t.$$.update=()=>{if(16&t.$$.dirty[0]&&(n=z&&z.getElement()),33554433&t.$$.dirty[0]&&o(8,m=P?t=>{V&&(o(25,V=!1),N(t)||o(0,P=!1))}:void 0),1&t.$$.dirty[0]|64&t.$$.dirty[1]&&D.set(P?1:0,{hard:!1===v}),1&t.$$.dirty[0]|64&t.$$.dirty[1]&&j.set(P?0:-5,{hard:!1===v}),16&t.$$.dirty[1]&&o(29,i=1-b/-5),1&t.$$.dirty[0]|32&t.$$.dirty[1]&&x&&P&&B(),4194313&t.$$.dirty[0]|32&t.$$.dirty[1]&&x&&L&&F&&P){let t=F.x-x.x+.5*F.width-.5*L.width,e=F.y-x.y+F.height;const n=lc,i=lc,r=x.width-lc,a=x.height-lc,s=t,l=e,c=s+L.width,d=l+L.height;s<n&&(o(24,_.x=s-n,_),t=n),c>r&&(o(24,_.x=c-r,_),t=r-L.width),d>a?(o(23,O.y=-1,O),i<e-L.height-F.height?(o(24,_.y=0,_),e-=L.height+F.height):(o(24,_.y=e-(d-a),_),e-=d-a)):o(23,O.y=1,O),Nn(W,$=ct(tt(t,e),Kl),$)}8&t.$$.dirty[1]&&o(6,a=y>0),8&t.$$.dirty[1]&&o(31,s=y<1),8388608&t.$$.dirty[0]|20&t.$$.dirty[1]&&o(30,l=`translateX(${Math.round($.x)+O.x*lc}px) translateY(${Math.round($.y)+O.y*lc+O.y*b}px)`),1073741824&t.$$.dirty[0]|9&t.$$.dirty[1]&&o(11,c=s?`opacity: ${y}; pointer-events: ${y<1?"none":"all"}; transform: ${l};`:`transform: ${l}`),536870912&t.$$.dirty[0]&&o(27,d=.5+.5*i),536870912&t.$$.dirty[0]&&o(28,u=i),427819016&t.$$.dirty[0]|4&t.$$.dirty[1]&&o(10,h=$&&L&&`opacity:${u};transform:scaleX(${d})rotate(45deg);top:${O.y<0?_.y+L.height:0}px;left:${_.x+.5*L.width}px`),1&t.$$.dirty[0]&&o(9,p=P?t=>{N(t)||o(25,V=!0)}:void 0),96&t.$$.dirty[0]|2&t.$$.dirty[1]&&a&&f&&H&&H.parentNode!==f&&f.append(H),1&t.$$.dirty[0]&&(P||o(26,U=void 0)),68157537&t.$$.dirty[0]&&P&&a&&H&&R({e:U,panel:H}),2097217&t.$$.dirty[0]&&a&&!P&&A(),524290&t.$$.dirty[0]&&o(7,g={label:k,class:Ts(["PinturaPanelButton",M]),onkeydown:G,onclick:Z})},[P,k,S,L,z,H,a,g,m,p,h,c,T,I,E,D,W,j,t=>{/esc/i.test(t.key)&&(o(0,P=!1),n.focus())},M,R,A,F,O,_,V,U,d,u,i,l,s,f,$,y,b,x,v,w,function(t){Si[t?"unshift":"push"]((()=>{z=t,o(4,z)}))},function(t){Si[t?"unshift":"push"]((()=>{z=t,o(4,z)}))},function(t){Si[t?"unshift":"push"]((()=>{H=t,o(5,H)}))},t=>{t.stopPropagation(),o(0,P=!1)},t=>o(3,L=wt(t.detail)),C]}class dc extends ar{constructor(t){super(),rr(this,t,cc,sc,In,{buttonClass:19,buttonLabel:1,panelClass:2,isActive:0,onshow:20,onhide:21},null,[-1,-1])}}function uc(t){let e,o,n,i,r,a,s,l;const c=t[15].default,d=Fn(c,t,t[14],null);return{c(){e=ei("li"),o=ei("input"),n=ii(),i=ei("label"),d&&d.c(),li(o,"type","radio"),li(o,"class","implicit"),li(o,"id",t[7]),li(o,"name",t[0]),o.value=t[3],o.disabled=t[6],o.hidden=t[5],o.checked=t[4],li(i,"for",t[7]),li(i,"title",t[2]),li(e,"class",r=Ts(["PinturaRadioGroupOption",t[1]])),li(e,"data-hidden",t[5]),li(e,"data-disabled",t[6]),li(e,"data-selected",t[4])},m(r,c){Qn(r,e,c),Yn(e,o),Yn(e,n),Yn(e,i),d&&d.m(i,null),a=!0,s||(l=[ai(o,"change",si(t[16])),ai(o,"keydown",t[9]),ai(o,"click",t[10])],s=!0)},p(t,[n]){(!a||128&n)&&li(o,"id",t[7]),(!a||1&n)&&li(o,"name",t[0]),(!a||8&n)&&(o.value=t[3]),(!a||64&n)&&(o.disabled=t[6]),(!a||32&n)&&(o.hidden=t[5]),(!a||16&n)&&(o.checked=t[4]),d&&d.p&&(!a||16384&n)&&Dn(d,c,t,t[14],a?On(c,t[14],n,null):_n(t[14]),null),(!a||128&n)&&li(i,"for",t[7]),(!a||4&n)&&li(i,"title",t[2]),(!a||2&n&&r!==(r=Ts(["PinturaRadioGroupOption",t[1]])))&&li(e,"class",r),(!a||32&n)&&li(e,"data-hidden",t[5]),(!a||64&n)&&li(e,"data-disabled",t[6]),(!a||16&n)&&li(e,"data-selected",t[4])},i(t){a||(Vi(d,t),a=!0)},o(t){Zi(d,t),a=!1},d(t){t&&ti(e),d&&d.d(t),s=!1,An(l)}}}function hc(t,e,o){let n,i,{$$slots:r={},$$scope:a}=e,{name:s}=e,{class:l}=e,{label:c}=e,{id:d}=e,{value:u}=e,{checked:h}=e,{onkeydown:p}=e,{onclick:m}=e,{hidden:g=!1}=e,{disabled:f=!1}=e;const $=Object.values(Al),y=Ci("keysPressed");return zn(t,y,(t=>o(17,i=t))),t.$$set=t=>{"name"in t&&o(0,s=t.name),"class"in t&&o(1,l=t.class),"label"in t&&o(2,c=t.label),"id"in t&&o(11,d=t.id),"value"in t&&o(3,u=t.value),"checked"in t&&o(4,h=t.checked),"onkeydown"in t&&o(12,p=t.onkeydown),"onclick"in t&&o(13,m=t.onclick),"hidden"in t&&o(5,g=t.hidden),"disabled"in t&&o(6,f=t.disabled),"$$scope"in t&&o(14,a=t.$$scope)},t.$$.update=()=>{2049&t.$$.dirty&&o(7,n=`${s}-${d}`)},[s,l,c,u,h,g,f,n,y,t=>{p(t)},t=>{i.some((t=>$.includes(t)))||m(t)},d,p,m,a,r,function(e){Mi.call(this,t,e)}]}class pc extends ar{constructor(t){super(),rr(this,t,hc,uc,In,{name:0,class:1,label:2,id:11,value:3,checked:4,onkeydown:12,onclick:13,hidden:5,disabled:6})}}var mc=(t=[])=>t.reduce(((t,e)=>(so(e)?so(e[1]):e.options)?t.concat(so(e)?e[1]:e.options):(t.push(e),t)),[]);const gc=(t,e,o)=>{let n;return so(t)?n={id:e,value:t[0],label:t[1],...t[2]||{}}:(n=t,n.id=null!=n.id?n.id:e),o?o(n):n};var fc=(t,e,o)=>w(t)?t(e,o):t;const $c=(t,e)=>t.map((([t,o,n])=>{if(so(o))return[fc(t,e),$c(o,e)];{const i=[t,fc(o,e)];if(n){let t={...n};n.icon&&(t.icon=fc(n.icon,e)),i.push(t)}return i}}));var yc=(t,e)=>$c(t,e),bc=(t,e)=>Array.isArray(t)&&Array.isArray(e)?Ir(t,e):t===e;function xc(t,e,o){const n=t.slice();return n[27]=e[o],n}const vc=t=>({option:1024&t[0]}),wc=t=>({option:t[27]});function Cc(t,e,o){const n=t.slice();return n[27]=e[o],n}const Mc=t=>({option:1024&t[0]}),kc=t=>({option:t[27]}),Sc=t=>({option:1024&t[0]}),Pc=t=>({option:t[27]});function Rc(t){let e,o,n,i,r,a=[],s=new Map,l=t[1]&&Ac(t),c=t[10];const d=t=>t[27].id;for(let e=0;e<c.length;e+=1){let o=xc(t,c,e),n=d(o);s.set(n,a[e]=jc(n,o))}return{c(){e=ei("fieldset"),l&&l.c(),o=ii(),n=ei("ul");for(let t=0;t<a.length;t+=1)a[t].c();li(n,"class","PinturaRadioGroupOptions"),li(e,"class",i=Ts(["PinturaRadioGroup",t[3]])),li(e,"data-layout",t[5]),li(e,"title",t[7])},m(t,i){Qn(t,e,i),l&&l.m(e,null),Yn(e,o),Yn(e,n);for(let t=0;t<a.length;t+=1)a[t].m(n,null);r=!0},p(t,u){t[1]?l?l.p(t,u):(l=Ac(t),l.c(),l.m(e,o)):l&&(l.d(1),l=null),8419153&u[0]&&(c=t[10],Hi(),a=Ji(a,u,d,1,t,c,s,n,Ki,jc,null,xc),Ui()),(!r||8&u[0]&&i!==(i=Ts(["PinturaRadioGroup",t[3]])))&&li(e,"class",i),(!r||32&u[0])&&li(e,"data-layout",t[5]),(!r||128&u[0])&&li(e,"title",t[7])},i(t){if(!r){for(let t=0;t<c.length;t+=1)Vi(a[t]);r=!0}},o(t){for(let t=0;t<a.length;t+=1)Zi(a[t]);r=!1},d(t){t&&ti(e),l&&l.d();for(let t=0;t<a.length;t+=1)a[t].d()}}}function Ac(t){let e,o,n;return{c(){e=ei("legend"),o=ni(t[1]),li(e,"class",n=t[2]&&"implicit")},m(t,n){Qn(t,e,n),Yn(e,o)},p(t,i){2&i[0]&&di(o,t[1]),4&i[0]&&n!==(n=t[2]&&"implicit")&&li(e,"class",n)},d(t){t&&ti(e)}}}function Tc(t){let e,o;return e=new pc({props:{name:t[4],label:t[27].label,id:t[27].id,value:t[27].value,disabled:t[27].disabled,hidden:t[27].hidden,class:t[8],checked:t[12](t[27])===t[0],onkeydown:t[13](t[27]),onclick:t[14](t[27]),$$slots:{default:[Fc]},$$scope:{ctx:t}}}),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const n={};16&o[0]&&(n.name=t[4]),1024&o[0]&&(n.label=t[27].label),1024&o[0]&&(n.id=t[27].id),1024&o[0]&&(n.value=t[27].value),1024&o[0]&&(n.disabled=t[27].disabled),1024&o[0]&&(n.hidden=t[27].hidden),256&o[0]&&(n.class=t[8]),1025&o[0]&&(n.checked=t[12](t[27])===t[0]),1024&o[0]&&(n.onkeydown=t[13](t[27])),1024&o[0]&&(n.onclick=t[14](t[27])),8389696&o[0]&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function Ic(t){let e,o,n,i,r,a,s=[],l=new Map;const c=t[22].group,d=Fn(c,t,t[23],Pc),u=d||function(t){let e,o,n=t[27].label+"";return{c(){e=ei("span"),o=ni(n),li(e,"class","PinturaRadioGroupOptionGroupLabel")},m(t,n){Qn(t,e,n),Yn(e,o)},p(t,e){1024&e[0]&&n!==(n=t[27].label+"")&&di(o,n)},d(t){t&&ti(e)}}}(t);let h=t[27].options;const p=t=>t[27].id;for(let e=0;e<h.length;e+=1){let o=Cc(t,h,e),n=p(o);l.set(n,s[e]=Wc(n,o))}return{c(){e=ei("li"),u&&u.c(),o=ii(),n=ei("ul");for(let t=0;t<s.length;t+=1)s[t].c();i=ii(),li(n,"class","PinturaRadioGroupOptions"),li(e,"class",r=Ts(["PinturaRadioGroupOptionGroup",t[9]]))},m(t,r){Qn(t,e,r),u&&u.m(e,null),Yn(e,o),Yn(e,n);for(let t=0;t<s.length;t+=1)s[t].m(n,null);Yn(e,i),a=!0},p(t,o){d?d.p&&(!a||8389632&o[0])&&Dn(d,c,t,t[23],a?On(c,t[23],o,Sc):_n(t[23]),Pc):u&&u.p&&(!a||1024&o[0])&&u.p(t,a?o:[-1,-1]),8418641&o[0]&&(h=t[27].options,Hi(),s=Ji(s,o,p,1,t,h,l,n,Ki,Wc,null,Cc),Ui()),(!a||512&o[0]&&r!==(r=Ts(["PinturaRadioGroupOptionGroup",t[9]])))&&li(e,"class",r)},i(t){if(!a){Vi(u,t);for(let t=0;t<h.length;t+=1)Vi(s[t]);a=!0}},o(t){Zi(u,t);for(let t=0;t<s.length;t+=1)Zi(s[t]);a=!1},d(t){t&&ti(e),u&&u.d(t);for(let t=0;t<s.length;t+=1)s[t].d()}}}function Ec(t){let e,o;return e=new tl({props:{$$slots:{default:[Lc]},$$scope:{ctx:t}}}),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const n={};8389632&o[0]&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function Lc(t){let e,o=t[27].icon+"";return{c(){e=oi("g")},m(t,n){Qn(t,e,n),e.innerHTML=o},p(t,n){1024&n[0]&&o!==(o=t[27].icon+"")&&(e.innerHTML=o)},d(t){t&&ti(e)}}}function zc(t){let e,o,n=t[27].label+"";return{c(){e=ei("span"),o=ni(n),li(e,"class",t[6])},m(t,n){Qn(t,e,n),Yn(e,o)},p(t,i){1024&i[0]&&n!==(n=t[27].label+"")&&di(o,n),64&i[0]&&li(e,"class",t[6])},d(t){t&&ti(e)}}}function Fc(t){let e;const o=t[22].option,n=Fn(o,t,t[23],wc),i=n||function(t){let e,o,n,i=t[27].icon&&Ec(t),r=!t[27].hideLabel&&zc(t);return{c(){i&&i.c(),e=ii(),r&&r.c(),o=ii()},m(t,a){i&&i.m(t,a),Qn(t,e,a),r&&r.m(t,a),Qn(t,o,a),n=!0},p(t,n){t[27].icon?i?(i.p(t,n),1024&n[0]&&Vi(i,1)):(i=Ec(t),i.c(),Vi(i,1),i.m(e.parentNode,e)):i&&(Hi(),Zi(i,1,1,(()=>{i=null})),Ui()),t[27].hideLabel?r&&(r.d(1),r=null):r?r.p(t,n):(r=zc(t),r.c(),r.m(o.parentNode,o))},i(t){n||(Vi(i),n=!0)},o(t){Zi(i),n=!1},d(t){i&&i.d(t),t&&ti(e),r&&r.d(t),t&&ti(o)}}}(t);return{c(){i&&i.c()},m(t,o){i&&i.m(t,o),e=!0},p(t,r){n?n.p&&(!e||8389632&r[0])&&Dn(n,o,t,t[23],e?On(o,t[23],r,vc):_n(t[23]),wc):i&&i.p&&(!e||1088&r[0])&&i.p(t,e?r:[-1,-1])},i(t){e||(Vi(i,t),e=!0)},o(t){Zi(i,t),e=!1},d(t){i&&i.d(t)}}}function Bc(t){let e,o;return e=new tl({props:{$$slots:{default:[Oc]},$$scope:{ctx:t}}}),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const n={};8389632&o[0]&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function Oc(t){let e,o=t[27].icon+"";return{c(){e=oi("g")},m(t,n){Qn(t,e,n),e.innerHTML=o},p(t,n){1024&n[0]&&o!==(o=t[27].icon+"")&&(e.innerHTML=o)},d(t){t&&ti(e)}}}function Dc(t){let e,o,n=t[27].label+"";return{c(){e=ei("span"),o=ni(n),li(e,"class",t[6])},m(t,n){Qn(t,e,n),Yn(e,o)},p(t,i){1024&i[0]&&n!==(n=t[27].label+"")&&di(o,n),64&i[0]&&li(e,"class",t[6])},d(t){t&&ti(e)}}}function _c(t){let e;const o=t[22].option,n=Fn(o,t,t[23],kc),i=n||function(t){let e,o,n,i=t[27].icon&&Bc(t),r=!t[27].hideLabel&&Dc(t);return{c(){i&&i.c(),e=ii(),r&&r.c(),o=ii()},m(t,a){i&&i.m(t,a),Qn(t,e,a),r&&r.m(t,a),Qn(t,o,a),n=!0},p(t,n){t[27].icon?i?(i.p(t,n),1024&n[0]&&Vi(i,1)):(i=Bc(t),i.c(),Vi(i,1),i.m(e.parentNode,e)):i&&(Hi(),Zi(i,1,1,(()=>{i=null})),Ui()),t[27].hideLabel?r&&(r.d(1),r=null):r?r.p(t,n):(r=Dc(t),r.c(),r.m(o.parentNode,o))},i(t){n||(Vi(i),n=!0)},o(t){Zi(i),n=!1},d(t){i&&i.d(t),t&&ti(e),r&&r.d(t),t&&ti(o)}}}(t);return{c(){i&&i.c()},m(t,o){i&&i.m(t,o),e=!0},p(t,r){n?n.p&&(!e||8389632&r[0])&&Dn(n,o,t,t[23],e?On(o,t[23],r,Mc):_n(t[23]),kc):i&&i.p&&(!e||1088&r[0])&&i.p(t,e?r:[-1,-1])},i(t){e||(Vi(i,t),e=!0)},o(t){Zi(i,t),e=!1},d(t){i&&i.d(t)}}}function Wc(t,e){let o,n,i;return n=new pc({props:{name:e[4],label:e[27].label,id:e[27].id,value:e[27].value,disabled:e[27].disabled,hidden:e[27].hidden,class:e[8],checked:e[12](e[27])===e[0],onkeydown:e[13](e[27]),onclick:e[14](e[27]),$$slots:{default:[_c]},$$scope:{ctx:e}}}),{key:t,first:null,c(){o=ri(),or(n.$$.fragment),this.first=o},m(t,e){Qn(t,o,e),nr(n,t,e),i=!0},p(t,o){e=t;const i={};16&o[0]&&(i.name=e[4]),1024&o[0]&&(i.label=e[27].label),1024&o[0]&&(i.id=e[27].id),1024&o[0]&&(i.value=e[27].value),1024&o[0]&&(i.disabled=e[27].disabled),1024&o[0]&&(i.hidden=e[27].hidden),256&o[0]&&(i.class=e[8]),1025&o[0]&&(i.checked=e[12](e[27])===e[0]),1024&o[0]&&(i.onkeydown=e[13](e[27])),1024&o[0]&&(i.onclick=e[14](e[27])),8389696&o[0]&&(i.$$scope={dirty:o,ctx:e}),n.$set(i)},i(t){i||(Vi(n.$$.fragment,t),i=!0)},o(t){Zi(n.$$.fragment,t),i=!1},d(t){t&&ti(o),ir(n,t)}}}function jc(t,e){let o,n,i,r,a;const s=[Ic,Tc],l=[];function c(t,e){return t[27].options?0:1}return n=c(e),i=l[n]=s[n](e),{key:t,first:null,c(){o=ri(),i.c(),r=ri(),this.first=o},m(t,e){Qn(t,o,e),l[n].m(t,e),Qn(t,r,e),a=!0},p(t,o){let a=n;n=c(e=t),n===a?l[n].p(e,o):(Hi(),Zi(l[a],1,1,(()=>{l[a]=null})),Ui(),i=l[n],i?i.p(e,o):(i=l[n]=s[n](e),i.c()),Vi(i,1),i.m(r.parentNode,r))},i(t){a||(Vi(i),a=!0)},o(t){Zi(i),a=!1},d(t){t&&ti(o),l[n].d(t),t&&ti(r)}}}function Nc(t){let e,o,n,i=t[11].length&&Rc(t);return{c(){i&&i.c(),e=ii(),o=ri()},m(t,r){i&&i.m(t,r),Qn(t,e,r),Qn(t,o,r),n=!0},p(t,o){t[11].length?i?(i.p(t,o),2048&o[0]&&Vi(i,1)):(i=Rc(t),i.c(),Vi(i,1),i.m(e.parentNode,e)):i&&(Hi(),Zi(i,1,1,(()=>{i=null})),Ui())},i(t){n||(Vi(i),Vi(!1),n=!0)},o(t){Zi(i),Zi(!1),n=!1},d(t){i&&i.d(t),t&&ti(e),t&&ti(o)}}}function Hc(t,e,o){let n,i,r,{$$slots:a={},$$scope:s}=e;const l=vi();let{label:c}=e,{hideLabel:d=!0}=e,{class:u}=e,{name:h=`radio-group-${k()}`}=e,{selectedIndex:p=-1}=e,{options:m=[]}=e,{onchange:g}=e,{layout:f}=e,{optionMapper:$}=e,{optionFilter:y}=e,{value:b}=e,{optionLabelClass:x}=e,{title:v}=e,{locale:w}=e,{optionClass:C}=e,{optionGroupClass:M}=e;const S=t=>r.findIndex((e=>e.id===t.id)),P=(t,e)=>{o(0,p=S(t));const n={index:p,...t};((t,...e)=>{t&&t(...e)})(g,n,e),l("change",n)};return t.$$set=t=>{"label"in t&&o(1,c=t.label),"hideLabel"in t&&o(2,d=t.hideLabel),"class"in t&&o(3,u=t.class),"name"in t&&o(4,h=t.name),"selectedIndex"in t&&o(0,p=t.selectedIndex),"options"in t&&o(15,m=t.options),"onchange"in t&&o(16,g=t.onchange),"layout"in t&&o(5,f=t.layout),"optionMapper"in t&&o(17,$=t.optionMapper),"optionFilter"in t&&o(18,y=t.optionFilter),"value"in t&&o(19,b=t.value),"optionLabelClass"in t&&o(6,x=t.optionLabelClass),"title"in t&&o(7,v=t.title),"locale"in t&&o(20,w=t.locale),"optionClass"in t&&o(8,C=t.optionClass),"optionGroupClass"in t&&o(9,M=t.optionGroupClass),"$$scope"in t&&o(23,s=t.$$scope)},t.$$.update=()=>{1343488&t.$$.dirty[0]&&o(11,n=yc(y?m.filter(y):m,w)),133120&t.$$.dirty[0]&&o(10,i=((t=[],e)=>{let o=0;return t.map((t=>(o++,so(t)?so(t[1])?{id:o,label:t[0],options:t[1].map((t=>gc(t,++o,e)))}:gc(t,o,e):t.options?{id:t.id||o,label:t.label,options:t.options.map((t=>gc(t,++o,e)))}:gc(t,o,e))))})(n,$)),1024&t.$$.dirty[0]&&o(21,r=mc(i)),2654209&t.$$.dirty[0]&&p<0&&(o(0,p=r.findIndex((t=>bc(t.value,b)))),p<0&&o(0,p=(t=>t.findIndex((t=>void 0===t[0])))(m)))},[p,c,d,u,h,f,x,v,C,M,i,n,S,t=>e=>{var o;o=e.key,/enter| /i.test(o)&&P(t,e)},t=>e=>{P(t,e)},m,g,$,y,b,w,r,a,s]}class Uc extends ar{constructor(t){super(),rr(this,t,Hc,Nc,In,{label:1,hideLabel:2,class:3,name:4,selectedIndex:0,options:15,onchange:16,layout:5,optionMapper:17,optionFilter:18,value:19,optionLabelClass:6,title:7,locale:20,optionClass:8,optionGroupClass:9},null,[-1,-1])}}const Vc=t=>({}),Zc=t=>({});function Gc(t){let e,o;return e=new tl({props:{class:"PinturaButtonIcon",$$slots:{default:[qc]},$$scope:{ctx:t}}}),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const n={};268435520&o&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function qc(t){let e;return{c(){e=oi("g")},m(o,n){Qn(o,e,n),e.innerHTML=t[6]},p(t,o){64&o&&(e.innerHTML=t[6])},d(t){t&&ti(e)}}}function Xc(t){let e,o,n,i,r,a,s,l=(t[2]||t[18])+"",c=t[6]&&Gc(t);return{c(){e=ei("span"),c&&c.c(),o=ii(),n=ei("span"),li(n,"class",i=Ts(["PinturaButtonLabel",t[3],t[5]&&"implicit"])),li(e,"slot","label"),li(e,"title",r=fc(t[1],t[15])),li(e,"class",a=Ts(["PinturaButtonInner",t[4]]))},m(t,i){Qn(t,e,i),c&&c.m(e,null),Yn(e,o),Yn(e,n),n.innerHTML=l,s=!0},p(t,d){t[6]?c?(c.p(t,d),64&d&&Vi(c,1)):(c=Gc(t),c.c(),Vi(c,1),c.m(e,o)):c&&(Hi(),Zi(c,1,1,(()=>{c=null})),Ui()),(!s||262148&d)&&l!==(l=(t[2]||t[18])+"")&&(n.innerHTML=l),(!s||40&d&&i!==(i=Ts(["PinturaButtonLabel",t[3],t[5]&&"implicit"])))&&li(n,"class",i),(!s||32770&d&&r!==(r=fc(t[1],t[15])))&&li(e,"title",r),(!s||16&d&&a!==(a=Ts(["PinturaButtonInner",t[4]])))&&li(e,"class",a)},i(t){s||(Vi(c),s=!0)},o(t){Zi(c),s=!1},d(t){t&&ti(e),c&&c.d()}}}function Yc(t){let e,o,n=t[30].label+"";return{c(){e=ei("span"),o=ni(n),li(e,"slot","group")},m(t,n){Qn(t,e,n),Yn(e,o)},p(t,e){1073741824&e&&n!==(n=t[30].label+"")&&di(o,n)},d(t){t&&ti(e)}}}function Kc(t){let e,o;return e=new tl({props:{style:w(t[13])?t[13](t[30].value):t[13],$$slots:{default:[Jc]},$$scope:{ctx:t}}}),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const n={};1073750016&o&&(n.style=w(t[13])?t[13](t[30].value):t[13]),1342177280&o&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function Jc(t){let e,o=t[30].icon+"";return{c(){e=oi("g")},m(t,n){Qn(t,e,n),e.innerHTML=o},p(t,n){1073741824&n&&o!==(o=t[30].icon+"")&&(e.innerHTML=o)},d(t){t&&ti(e)}}}function Qc(t){let e,o=t[30].sublabel+"";return{c(){e=ei("span"),li(e,"class","PinturaDropdownOptionSublabel")},m(t,n){Qn(t,e,n),e.innerHTML=o},p(t,n){1073741824&n&&o!==(o=t[30].sublabel+"")&&(e.innerHTML=o)},d(t){t&&ti(e)}}}function td(t){let e,o,n,i,r,a,s,l,c=t[30].label+"",d=t[30].icon&&Kc(t),u=t[30].sublabel&&Qc(t);return{c(){e=ei("span"),d&&d.c(),o=ii(),n=ei("span"),i=new hi(!1),r=ii(),u&&u.c(),i.a=r,li(n,"style",a=w(t[14])?t[14](t[30].value):t[14]),li(n,"class",s=Ts(["PinturaDropdownOptionLabel",t[10]])),li(e,"slot","option")},m(t,a){Qn(t,e,a),d&&d.m(e,null),Yn(e,o),Yn(e,n),i.m(c,n),Yn(n,r),u&&u.m(n,null),l=!0},p(t,r){t[30].icon?d?(d.p(t,r),1073741824&r&&Vi(d,1)):(d=Kc(t),d.c(),Vi(d,1),d.m(e,o)):d&&(Hi(),Zi(d,1,1,(()=>{d=null})),Ui()),(!l||1073741824&r)&&c!==(c=t[30].label+"")&&i.p(c),t[30].sublabel?u?u.p(t,r):(u=Qc(t),u.c(),u.m(n,null)):u&&(u.d(1),u=null),(!l||1073758208&r&&a!==(a=w(t[14])?t[14](t[30].value):t[14]))&&li(n,"style",a),(!l||1024&r&&s!==(s=Ts(["PinturaDropdownOptionLabel",t[10]])))&&li(n,"class",s)},i(t){l||(Vi(d),l=!0)},o(t){Zi(d),l=!1},d(t){t&&ti(e),d&&d.d(),u&&u.d()}}}function ed(t){let e,o,n,i,r,a;const s=t[26].controls,l=Fn(s,t,t[28],Zc);return n=new Uc({props:{class:"PinturaOptionsList PinturaScrollableContent",name:t[7],value:t[9],selectedIndex:t[8],optionFilter:t[11],optionMapper:t[12],optionLabelClass:Ts(["PinturaDropdownOptionLabel",t[10]]),optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:t[16],onchange:t[19],$$slots:{option:[td,({option:t})=>({30:t}),({option:t})=>t?1073741824:0],group:[Yc,({option:t})=>({30:t}),({option:t})=>t?1073741824:0]},$$scope:{ctx:t}}}),{c(){e=ei("div"),l&&l.c(),o=ii(),or(n.$$.fragment),li(e,"slot","details"),li(e,"class","PinturaOptionsListWrapper")},m(s,c){Qn(s,e,c),l&&l.m(e,null),Yn(e,o),nr(n,e,null),i=!0,r||(a=ai(e,"keydown",t[21]),r=!0)},p(t,e){l&&l.p&&(!i||268435456&e)&&Dn(l,s,t,t[28],i?On(s,t[28],e,Vc):_n(t[28]),Zc);const o={};128&e&&(o.name=t[7]),512&e&&(o.value=t[9]),256&e&&(o.selectedIndex=t[8]),2048&e&&(o.optionFilter=t[11]),4096&e&&(o.optionMapper=t[12]),1024&e&&(o.optionLabelClass=Ts(["PinturaDropdownOptionLabel",t[10]])),65536&e&&(o.options=t[16]),1342202880&e&&(o.$$scope={dirty:e,ctx:t}),n.$set(o)},i(t){i||(Vi(l,t),Vi(n.$$.fragment,t),i=!0)},o(t){Zi(l,t),Zi(n.$$.fragment,t),i=!1},d(t){t&&ti(e),l&&l.d(t),ir(n),r=!1,a()}}}function od(t){let e,o,n;function i(e){t[27](e)}let r={onshow:t[20],buttonClass:Ts(["PinturaDropdownButton",t[0],t[5]&&"PinturaDropdownIconOnly"]),$$slots:{details:[ed],label:[Xc]},$$scope:{ctx:t}};return void 0!==t[17]&&(r.isActive=t[17]),e=new dc({props:r}),Si.push((()=>er(e,"isActive",i))),{c(){or(e.$$.fragment)},m(t,o){nr(e,t,o),n=!0},p(t,[n]){const i={};33&n&&(i.buttonClass=Ts(["PinturaDropdownButton",t[0],t[5]&&"PinturaDropdownIconOnly"])),268828670&n&&(i.$$scope={dirty:n,ctx:t}),!o&&131072&n&&(o=!0,i.isActive=t[17],zi((()=>o=!1))),e.$set(i)},i(t){n||(Vi(e.$$.fragment,t),n=!0)},o(t){Zi(e.$$.fragment,t),n=!1},d(t){ir(e,t)}}}function nd(t,e,o){let n,i,a,{$$slots:s={},$$scope:l}=e,{class:c}=e,{title:d}=e,{label:u}=e,{labelClass:h}=e,{innerClass:p}=e,{hideLabel:m=!1}=e,{icon:g}=e,{name:f}=e,{options:$=[]}=e,{selectedIndex:y=-1}=e,{value:b}=e,{optionLabelClass:x}=e,{optionFilter:v}=e,{optionMapper:w}=e,{optionIconStyle:C}=e,{optionLabelStyle:M}=e,{locale:k}=e,{onchange:S=r}=e,{onload:P=r}=e,{ondestroy:R=r}=e;return bi((()=>P({options:$}))),xi((()=>R({options:$}))),t.$$set=t=>{"class"in t&&o(0,c=t.class),"title"in t&&o(1,d=t.title),"label"in t&&o(2,u=t.label),"labelClass"in t&&o(3,h=t.labelClass),"innerClass"in t&&o(4,p=t.innerClass),"hideLabel"in t&&o(5,m=t.hideLabel),"icon"in t&&o(6,g=t.icon),"name"in t&&o(7,f=t.name),"options"in t&&o(22,$=t.options),"selectedIndex"in t&&o(8,y=t.selectedIndex),"value"in t&&o(9,b=t.value),"optionLabelClass"in t&&o(10,x=t.optionLabelClass),"optionFilter"in t&&o(11,v=t.optionFilter),"optionMapper"in t&&o(12,w=t.optionMapper),"optionIconStyle"in t&&o(13,C=t.optionIconStyle),"optionLabelStyle"in t&&o(14,M=t.optionLabelStyle),"locale"in t&&o(15,k=t.locale),"onchange"in t&&o(23,S=t.onchange),"onload"in t&&o(24,P=t.onload),"ondestroy"in t&&o(25,R=t.ondestroy),"$$scope"in t&&o(28,l=t.$$scope)},t.$$.update=()=>{4227072&t.$$.dirty&&o(16,n=k?yc($,k):$),66048&t.$$.dirty&&o(18,i=n.reduce(((t,e)=>{if(t)return t;const o=Array.isArray(e)?e:[e,e],[n,i]=o;return bc(n,b)?i:void 0}),void 0)||(t=>{const e=t.find((t=>void 0===t[0]));if(e)return e[1]})(n)||b)},[c,d,u,h,p,m,g,f,y,b,x,v,w,C,M,k,n,a,i,t=>{if(o(18,i=t.value),S(t),o(17,a=!1),null==i){var e=document.getElementsByClassName("PinturaButtonHidden");e&&e.length>=1&&e[0].click()}},({e:t,panel:e})=>{if(t&&t.key&&/up|down/i.test(t.key))return Jl(e.querySelector("input:not([disabled])"));Jl(e.querySelector("fieldset"))},t=>{/tab/i.test(t.key)&&t.preventDefault()},$,S,P,R,s,function(t){a=t,o(17,a)},l]}class id extends ar{constructor(t){super(),rr(this,t,nd,od,In,{class:0,title:1,label:2,labelClass:3,innerClass:4,hideLabel:5,icon:6,name:7,options:22,selectedIndex:8,value:9,optionLabelClass:10,optionFilter:11,optionMapper:12,optionIconStyle:13,optionLabelStyle:14,locale:15,onchange:23,onload:24,ondestroy:25})}}function rd(t){let e;return{c(){e=ei("div"),li(e,"slot","details")},m(o,n){Qn(o,e,n),t[10](e)},p:Mn,d(o){o&&ti(e),t[10](null)}}}function ad(t){let e,o,n;function i(e){t[11](e)}let r={buttonLabel:t[0],buttonClass:t[1],onshow:t[2],onhide:t[3],$$slots:{details:[rd]},$$scope:{ctx:t}};return void 0!==t[5]&&(r.isActive=t[5]),e=new dc({props:r}),Si.push((()=>er(e,"isActive",i))),{c(){or(e.$$.fragment)},m(t,o){nr(e,t,o),n=!0},p(t,[n]){const i={};1&n&&(i.buttonLabel=t[0]),2&n&&(i.buttonClass=t[1]),4&n&&(i.onshow=t[2]),8&n&&(i.onhide=t[3]),4112&n&&(i.$$scope={dirty:n,ctx:t}),!o&&32&n&&(o=!0,i.isActive=t[5],zi((()=>o=!1))),e.$set(i)},i(t){n||(Vi(e.$$.fragment,t),n=!0)},o(t){Zi(e.$$.fragment,t),n=!1},d(t){ir(e,t)}}}function sd(t,e,o){let n,{buttonLabel:i}=e,{buttonClass:a}=e,{root:s}=e,{ondestroy:l=r}=e,{onshow:c=r}=e,{onhide:d=r}=e,u=!1;return xi(l),t.$$set=t=>{"buttonLabel"in t&&o(0,i=t.buttonLabel),"buttonClass"in t&&o(1,a=t.buttonClass),"root"in t&&o(6,s=t.root),"ondestroy"in t&&o(7,l=t.ondestroy),"onshow"in t&&o(2,c=t.onshow),"onhide"in t&&o(3,d=t.onhide)},t.$$.update=()=>{80&t.$$.dirty&&n&&s&&n.firstChild!==s&&(n.hasChildNodes()?n.replaceChild(s,n.firstChild):n.append(s))},[i,a,c,d,n,u,s,l,()=>o(5,u=!1),()=>o(5,u=!0),function(t){Si[t?"unshift":"push"]((()=>{n=t,o(4,n)}))},function(t){u=t,o(5,u)}]}class ld extends ar{constructor(t){super(),rr(this,t,sd,ad,In,{buttonLabel:0,buttonClass:1,root:6,ondestroy:7,onshow:2,onhide:3,hide:8,show:9})}get hide(){return this.$$.ctx[8]}get show(){return this.$$.ctx[9]}}function cd(t){let e,o;return e=new tl({props:{class:"PinturaButtonIcon",$$slots:{default:[dd]},$$scope:{ctx:t}}}),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const n={};524292&o&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function dd(t){let e;return{c(){e=oi("g")},m(o,n){Qn(o,e,n),e.innerHTML=t[2]},p(t,o){4&o&&(e.innerHTML=t[2])},d(t){t&&ti(e)}}}function ud(t){let e,o,n,i,r,a,s,l,c=t[2]&&cd(t);return{c(){e=ei("span"),c&&c.c(),o=ii(),n=ei("span"),i=ni(t[8]),li(n,"class",r=Ts(["PinturaButtonLabel",t[3],t[5]&&"implicit"])),li(e,"slot","label"),li(e,"title",a=fc(t[1],t[6])),li(e,"class",s=Ts(["PinturaButtonInner",t[4]]))},m(t,r){Qn(t,e,r),c&&c.m(e,null),Yn(e,o),Yn(e,n),Yn(n,i),l=!0},p(t,d){t[2]?c?(c.p(t,d),4&d&&Vi(c,1)):(c=cd(t),c.c(),Vi(c,1),c.m(e,o)):c&&(Hi(),Zi(c,1,1,(()=>{c=null})),Ui()),(!l||256&d)&&di(i,t[8]),(!l||40&d&&r!==(r=Ts(["PinturaButtonLabel",t[3],t[5]&&"implicit"])))&&li(n,"class",r),(!l||66&d&&a!==(a=fc(t[1],t[6])))&&li(e,"title",a),(!l||16&d&&s!==(s=Ts(["PinturaButtonInner",t[4]])))&&li(e,"class",s)},i(t){l||(Vi(c),l=!0)},o(t){Zi(c),l=!1},d(t){t&&ti(e),c&&c.d()}}}function hd(t){let e,o,n,i,r;const a=[t[11],{value:t[7]},{onchange:t[10]}];let s={};for(let t=0;t<a.length;t+=1)s=Sn(s,a[t]);return o=new dl({props:s}),{c(){e=ei("div"),or(o.$$.fragment),li(e,"slot","details")},m(a,s){Qn(a,e,s),nr(o,e,null),n=!0,i||(r=ai(e,"keydown",t[9]),i=!0)},p(t,e){const n=3200&e?Qi(a,[2048&e&&tr(t[11]),128&e&&{value:t[7]},1024&e&&{onchange:t[10]}]):{};o.$set(n)},i(t){n||(Vi(o.$$.fragment,t),n=!0)},o(t){Zi(o.$$.fragment,t),n=!1},d(t){t&&ti(e),ir(o),i=!1,r()}}}function pd(t){let e,o;return e=new dc({props:{panelClass:"PinturaSliderPanel",buttonClass:Ts(["PinturaSliderButton",t[0],t[5]&&"PinturaSliderIconOnly"]),$$slots:{details:[hd],label:[ud]},$$scope:{ctx:t}}}),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,[o]){const n={};33&o&&(n.buttonClass=Ts(["PinturaSliderButton",t[0],t[5]&&"PinturaSliderIconOnly"])),526846&o&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function md(t,e,o){const n=["class","title","label","icon","labelClass","innerClass","hideLabel","locale","value","onchange"];let i=jn(e,n),{class:a}=e,{title:s}=e,{label:l=Math.round}=e,{icon:c}=e,{labelClass:d}=e,{innerClass:u}=e,{hideLabel:h=!1}=e,{locale:p}=e,{value:m}=e,{onchange:g=r}=e;const{min:f,max:$,getValue:y=O}=i;let b;const x=t=>o(8,b=(t=>w(l)?l(y(t),f,$):l)(t));return t.$$set=t=>{e=Sn(Sn({},e),Wn(t)),o(11,i=jn(e,n)),"class"in t&&o(0,a=t.class),"title"in t&&o(1,s=t.title),"label"in t&&o(12,l=t.label),"icon"in t&&o(2,c=t.icon),"labelClass"in t&&o(3,d=t.labelClass),"innerClass"in t&&o(4,u=t.innerClass),"hideLabel"in t&&o(5,h=t.hideLabel),"locale"in t&&o(6,p=t.locale),"value"in t&&o(7,m=t.value),"onchange"in t&&o(13,g=t.onchange)},t.$$.update=()=>{4224&t.$$.dirty&&x(m)},[a,s,c,d,u,h,p,m,b,t=>{/tab/i.test(t.key)&&t.preventDefault()},t=>{x(t),g(t)},i,l,g]}class gd extends ar{constructor(t){super(),rr(this,t,md,pd,In,{class:0,title:1,label:12,icon:2,labelClass:3,innerClass:4,hideLabel:5,locale:6,value:7,onchange:13})}}function fd(t,e,o){const n=t.slice();return n[9]=e[o][0],n[0]=e[o][1],n[10]=e[o][2],n[2]=e[o][3],n}function $d(t){let e,o,n;const i=[t[10]];var r=t[3][t[9]]||t[9];function a(t){let e={};for(let t=0;t<i.length;t+=1)e=Sn(e,i[t]);return{props:e}}return r&&(e=new r(a())),{c(){e&&or(e.$$.fragment),o=ri()},m(t,i){e&&nr(e,t,i),Qn(t,o,i),n=!0},p(t,n){const s=4&n?Qi(i,[tr(t[10])]):{};if(r!==(r=t[3][t[9]]||t[9])){if(e){Hi();const t=e;Zi(t.$$.fragment,1,0,(()=>{ir(t,1)})),Ui()}r?(e=new r(a()),or(e.$$.fragment),Vi(e.$$.fragment,1),nr(e,o.parentNode,o)):e=null}else r&&e.$set(s)},i(t){n||(e&&Vi(e.$$.fragment,t),n=!0)},o(t){e&&Zi(e.$$.fragment,t),n=!1},d(t){t&&ti(o),e&&ir(e,t)}}}function yd(t){let e,o;return e=new ql({props:{name:t[9],attributes:t[4](t[10]),$$slots:{default:[wd]},$$scope:{ctx:t}}}),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const n={};4&o&&(n.name=t[9]),4&o&&(n.attributes=t[4](t[10])),8196&o&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function bd(t){let e,o,n=t[10].innerHTML+"";return{c(){e=new hi(!1),o=ri(),e.a=o},m(t,i){e.m(n,t,i),Qn(t,o,i)},p(t,o){4&o&&n!==(n=t[10].innerHTML+"")&&e.p(n)},i:Mn,o:Mn,d(t){t&&ti(o),t&&e.d()}}}function xd(t){let e,o=t[10].textContent+"";return{c(){e=ni(o)},m(t,o){Qn(t,e,o)},p(t,n){4&n&&o!==(o=t[10].textContent+"")&&di(e,o)},i:Mn,o:Mn,d(t){t&&ti(e)}}}function vd(t){let e,o;return e=new Sd({props:{items:t[2],discardEmptyItems:!0}}),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const n={};4&o&&(n.items=t[2]),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function wd(t){let e,o,n,i;const r=[vd,xd,bd],a=[];function s(t,e){return t[2]&&t[2].length?0:t[10].textContent?1:t[10].innerHTML?2:-1}return~(e=s(t))&&(o=a[e]=r[e](t)),{c(){o&&o.c(),n=ii()},m(t,o){~e&&a[e].m(t,o),Qn(t,n,o),i=!0},p(t,i){let l=e;e=s(t),e===l?~e&&a[e].p(t,i):(o&&(Hi(),Zi(a[l],1,1,(()=>{a[l]=null})),Ui()),~e?(o=a[e],o?o.p(t,i):(o=a[e]=r[e](t),o.c()),Vi(o,1),o.m(n.parentNode,n)):o=null)},i(t){i||(Vi(o),i=!0)},o(t){Zi(o),i=!1},d(t){~e&&a[e].d(t),t&&ti(n)}}}function Cd(t,e){let o,n,i,r,a,s;const l=[yd,$d],c=[];function d(t,e){return 4&e&&(n=null),null==n&&(n=!t[5](t[9])),n?0:1}return i=d(e,-1),r=c[i]=l[i](e),{key:t,first:null,c(){o=ri(),r.c(),a=ri(),this.first=o},m(t,e){Qn(t,o,e),c[i].m(t,e),Qn(t,a,e),s=!0},p(t,o){let n=i;i=d(e=t,o),i===n?c[i].p(e,o):(Hi(),Zi(c[n],1,1,(()=>{c[n]=null})),Ui(),r=c[i],r?r.p(e,o):(r=c[i]=l[i](e),r.c()),Vi(r,1),r.m(a.parentNode,a))},i(t){s||(Vi(r),s=!0)},o(t){Zi(r),s=!1},d(t){t&&ti(o),c[i].d(t),t&&ti(a)}}}function Md(t){let e,o,n=[],i=new Map,r=t[2];const a=t=>t[0]+t[1];for(let e=0;e<r.length;e+=1){let o=fd(t,r,e),s=a(o);i.set(s,n[e]=Cd(s,o))}return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=ri()},m(t,i){for(let e=0;e<n.length;e+=1)n[e].m(t,i);Qn(t,e,i),o=!0},p(t,[o]){62&o&&(r=t[2],Hi(),n=Ji(n,o,a,1,t,r,i,e.parentNode,Ki,Cd,e,fd),Ui())},i(t){if(!o){for(let t=0;t<r.length;t+=1)Vi(n[t]);o=!0}},o(t){for(let t=0;t<n.length;t+=1)Zi(n[t]);o=!1},d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&ti(e)}}}function kd(t,e,o){let n,i,{items:r}=e,{discardEmptyItems:a=!0}=e,{key:s=""}=e;const l={Button:$l,Dropdown:id,Panel:ld,Slider:gd},c=t=>!v(t)||!!l[t],d=t=>{if(!t)return!1;const[e,,o,n=[]]=t;return!!c(e)||n.some(d)||o.textContent||o.innerHTML};return t.$$set=t=>{"items"in t&&o(6,r=t.items),"discardEmptyItems"in t&&o(7,a=t.discardEmptyItems),"key"in t&&o(0,s=t.key)},t.$$.update=()=>{1&t.$$.dirty&&o(1,n=s),192&t.$$.dirty&&o(2,i=(r&&a?r.filter(d):r)||[])},[s,n,i,l,(t={})=>{const{textContent:e,innerHTML:o,...n}=t;return n},c,r,a]}class Sd extends ar{constructor(t){super(),rr(this,t,kd,Md,In,{items:6,discardEmptyItems:7,key:0})}}const Pd=["aspectRatio","isRotatedSideways","flip","cropSize"],Rd=zr.map((([t])=>t)).filter((t=>!Pd.includes(t)));var Ad=(t,e)=>new CustomEvent("ping",{detail:{type:t,data:e},cancelable:!0,bubbles:!0}),Td=t=>/textarea/i.test(t.nodeName)||(t=>/date|email|number|search|text|url/.test(t.type))(t)||t.isContentEditable,Id=(t,e)=>(e?Ma(t,e):t).replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase(),Ed=(t,e=O)=>{const{subscribe:o,set:n}=cr(void 0),i=((t,e)=>{const o=matchMedia(t);return o.addListener(e),e(o),{get matches(){return o.matches},destroy:()=>o.removeListener(e)}})(t,(({matches:t})=>n(e(t))));return{subscribe:o,destroy:i.destroy}},Ld=t=>/video/.test(t.type),zd=(t,e,o)=>new Promise(((n,i)=>{(async()=>{Ld(t)&&n(await(t=>new Promise(((e,o)=>{const n=h("video");n.onseeked=()=>{const t=h("canvas");Re(n).then((({width:o,height:i})=>{t.width=o,t.height=i;const r=t.getContext("2d"),a=()=>{r.drawImage(n,0,0,t.width,t.height);const o=r.getImageData(0,0,t.width,t.height);m(t),e(o)};Se()?setTimeout(a,16):a()}))},n.onloadeddata=()=>{n.currentTime=0},n.onerror=t=>{console.error(t),o(t)},n.src=URL.createObjectURL(t),n.load()})))(t));const r=await e.read(t),a=t=>R(t,o).then((t=>e.apply(t,r))).then(n).catch(i);if(M(t)||!C()||Se()||Ue())return a(t);let s;try{s=await P(((t,e)=>createImageBitmap(t).then((t=>e(null,t))).catch(e)),[t])}catch(t){}s&&s.width?await d()?l()&&window.chrome&&r>1?n(await(async t=>u(await f(t)))(s)):n(s):n(e.apply(s,r)):a(t)})()})),Fd=(t,e)=>new Promise((async o=>{if(t.width<e.width&&t.height<e.height)return o(t);const n=Math.min(e.width/t.width,e.height/t.height),i=n*t.width,r=n*t.height,a=h("canvas",{width:i,height:r}),s=a.getContext("2d"),l=g(t)?await f(t):t;s.drawImage(l,0,0,i,r),o(u(a))}));let Bd=null;var Od=()=>{if(null===Bd){let t=h("canvas");Bd=!!Da(t),m(t),t=void 0}return Bd};const Dd=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],_d={precision:1e-4},Wd={precision:.01*_d.precision};var jd=t=>t[0]<.25&&t[1]<.25&&t[2]<.25;let Nd=null;var Hd=t=>Math.round(100*t),Ud=t=>tt(t.clientX,t.clientY),Vd=(t,e,o)=>{const n=Ud(t);return ut(ut(n,e),o)};function Zd(t,e,o){let n,i,r,a,s,l,c,d,u,h,p,m,g,f,$,y,b,x,v,w,{root:C}=e,{locale:M}=e,{stores:k}=e,{allowPan:S=!0}=e,{allowZoom:P=!0}=e,{enablePan:R=!0}=e,{enableZoom:A=!0}=e,{enableZoomControls:T=A}=e,{enableZoomInput:I=!0}=e,{enablePanInput:E=!0}=e,{enablePanLimit:L=!0}=e,{panLimitGutterScalar:z=0}=e,{zoomOptions:F=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=e,{zoomAdjustStep:B=.25}=e,{zoomAdjustFactor:O=.1}=e,{zoomAdjustWheelFactor:D=1}=e,{elasticity:_=5}=e,{imageSelectionRectCentered:W}=e,{imageSelectionRectScalar:j}=e,{zoomLevel:N=null}=e,{zoomControls:H}=e,{zoomMultiTouching:U=!1}=e;const{isAnimated:V,isInteracting:Z,rootRect:G,stageRect:q,stageScalar:X,imageSelectionPan:Y,imageSelectionZoom:K,imageSelectionStageFitScalar:J,imageSelectionRect:et,imageSelectionStoredState:ot,imagePreviewUpscale:it}=k;zn(t,V,(t=>o(64,v=t))),zn(t,Z,(t=>o(63,b=t))),zn(t,G,(t=>o(62,f=t))),zn(t,q,(t=>o(61,g=t))),zn(t,X,(t=>o(45,x=t))),zn(t,Y,(t=>o(59,h=t))),zn(t,K,(t=>o(42,p=t))),zn(t,J,(t=>o(43,$=t))),zn(t,et,(t=>o(60,m=t))),zn(t,ot,(t=>o(65,w=t))),zn(t,it,(t=>o(44,y=t)));let rt,st,lt,ct,dt=!1;const pt=t=>{const e=C.querySelector(".PinturaMain > .PinturaUtilMain")||C.querySelector('div[tabindex="0"] .PinturaUtilMain');return!!e&&!!e.contains(t.target)&&!Td(t.target)},mt=(t={})=>{const{pan:e=h,zoom:o=p}=t;Nn(ot,w={translation:e,zoom:o},w)},gt=()=>h&&0===h.x&&0===h.y,ft=()=>{Nn(K,p=void 0,p),gt()||Nn(Y,h=Q(),h),yt.set(void 0,{hard:!0})},$t=()=>{ft(),mt()},yt=cs(void 0,{precision:.01});yt.subscribe((t=>{if(void 0===t)return Nn(K,p=void 0,p),void(gt()||Nn(Y,h=Q(),h));const e=p;t<=1?gt()||Nn(Y,h=Q(),h):t<=e&&Nn(Y,h=ht(h,.8),h),Nn(K,p=t,p)}));const bt=t=>{yt.update((e=>{const o=t(e||$);return mt({zoom:o}),o}))},xt=t=>{t?yt.set(t,{hard:!1===v}):(t=void 0,yt.set(void 0,{hard:!0})),Nn(K,p=t,p),mt({zoom:t})},vt=(t,e)=>{const o=j*e,n={...W},i=1-Pr(z,0,1);Zt(n,o<i?o:i);const r={...W};Zt(r,o),Vt(r,t);const a={...r};return r.x>n.x&&(a.x=n.x),r.y>n.y&&(a.y=n.y),r.x+r.width<n.x+n.width&&(a.x=n.x+n.width-r.width),r.y+r.height<n.y+n.height&&(a.y=n.y+n.height-r.height),ut(Ut(a),Ut(n))},wt=({translation:t,zoom:e=1,elastify:o=!0})=>{if(!rt)return;let n=t;const i=tt(rt.x+n.x,rt.y+n.y);if(!L)return i;const r=vt(i,e);return o?Sl(r,i,_):r};let Ct,Mt;const kt=()=>{Mt=void 0,Nn(Z,b=!0,b),o(33,dt=E),Ct=!1,lt=!1,rt={...h},st=y?p||$:r?p||1:p||$},St=t=>{const{scalar:e,translation:i,isMultiTouching:r}=t.detail;if(!rt||!r&&!E)return;r&&ht(i,.5),(E||r)&&(Ct=!0),U||o(12,U=r);const a=n?Pr(st*e,s,l):1,c=wt({translation:i,zoom:a,elastify:!0}),d=at(c);ct=at(h),lt=d<ct,n&&K.set(a),Y.set(c),Mt=U&&{translation:t.detail.translation,scalar:e}},Pt=t=>{Nn(Z,b=!1,b),o(33,dt=!1),o(12,U=!1),lt&&ct<50&&(rt=void 0,st=void 0,Y.set(Q()))},Rt=t=>{Nn(Z,b=!1,b),o(33,dt=!1),o(12,U=!1),Promise.resolve().then((()=>{if(Ct&&rt){const e=Mt||t.detail,o=n?Pr(st*e.scalar,s,l):1,i=wt({elastify:!1,translation:e.translation,zoom:o});Y.set(i)}rt=void 0,st=void 0,E&&t.detail.isDoubleTap&&$t(),mt()}))};let At,Tt=Date.now(),It=0,Et=!1,Lt=!1;const zt=t=>{if(!pt(t))return;if(t.preventDefault(),t.stopPropagation(),Lt)return;clearTimeout(At);const e=Q(),o=h,n=Date.now(),i=n-Tt;Tt=n;const a=i<24;It=a?It+1:0;const c=-1*Rl(t)*D,d=y?$:r?1:$,u=y?p||$:r?p||1:p||$,b=u*(1+c/(a?50:100)),x=Math.abs(b-d),v=b<u,w=u>d&&v||u<d&&b>u,C=It>=5;if(a||(Et=!1),It>0&&!Et&&(Et=w),C&&Et)return $t(),Lt=!0,void setTimeout((()=>{Lt=!1}),100);if(C)return;!a&&w&&x<=.05&&(At=setTimeout((()=>{$t()}),250)),Nn(K,p=Pr(b,s,l),p);const M=Vd(t,f,g),k=Ot(m);Zt(k,u),Vt(k,o);const S=Ut(k),P=Ot(k);Zt(P,p-u+1,M);const R=Ut(P),A=(I=u,(T=ut(R,S)).x/=I,T.y/=I,T);var T,I;((t,e,o)=>{t.x=e,t.y=o})(e,o.x+A.x,o.y+A.y),Nn(Y,h=v&&a?ht(nt(h),.85):vt(e,u),h),mt()},Ft=t=>(t?"add":"remove")+"EventListener",Bt=t=>{C[Ft(t)]("wheel",zt)},Dt=t=>{const e=Ft(t);C[e]("interactionstart",kt),C[e]("interactionupdate",St),C[e]("interactionrelease",Pt),C[e]("interactionend",Rt)};let _t;return bi((()=>{_t=Cl(C,{drag:!0,pinch:!0,inertia:!0,inertiaDurationMultiplier:10,shouldStartInteraction:pt})})),xi((()=>{Bt(!1),Dt(!1),_t.destroy(),_t=void 0})),t.$$set=t=>{"root"in t&&o(13,C=t.root),"locale"in t&&o(14,M=t.locale),"stores"in t&&o(15,k=t.stores),"allowPan"in t&&o(16,S=t.allowPan),"allowZoom"in t&&o(17,P=t.allowZoom),"enablePan"in t&&o(18,R=t.enablePan),"enableZoom"in t&&o(19,A=t.enableZoom),"enableZoomControls"in t&&o(20,T=t.enableZoomControls),"enableZoomInput"in t&&o(21,I=t.enableZoomInput),"enablePanInput"in t&&o(22,E=t.enablePanInput),"enablePanLimit"in t&&o(23,L=t.enablePanLimit),"panLimitGutterScalar"in t&&o(24,z=t.panLimitGutterScalar),"zoomOptions"in t&&o(25,F=t.zoomOptions),"zoomAdjustStep"in t&&o(26,B=t.zoomAdjustStep),"zoomAdjustFactor"in t&&o(27,O=t.zoomAdjustFactor),"zoomAdjustWheelFactor"in t&&o(28,D=t.zoomAdjustWheelFactor),"elasticity"in t&&o(29,_=t.elasticity),"imageSelectionRectCentered"in t&&o(30,W=t.imageSelectionRectCentered),"imageSelectionRectScalar"in t&&o(31,j=t.imageSelectionRectScalar),"zoomLevel"in t&&o(32,N=t.zoomLevel),"zoomControls"in t&&o(11,H=t.zoomControls),"zoomMultiTouching"in t&&o(12,U=t.zoomMultiTouching)},t.$$.update=()=>{var e,m;2752512&t.$$.dirty[0]&&o(35,n=P&&A&&I),327680&t.$$.dirty[0]&&o(34,i=S&&R),196608&t.$$.dirty[0]&&(S||P?(Nn(K,p=A?w.zoom:void 0,p),Nn(Y,h=R?nt(w.translation):gt()?h:Q(),h),yt.set(p)):ft()),16384&t.$$.dirty[1]&&(r=x>=1),33570816&t.$$.dirty[0]|28672&t.$$.dirty[1]&&o(39,a=[(y||x<1)&&[$,Hd($)+"%",{sublabel:M.labelZoomFit}],...F.map((t=>[t,Hd(t)+"%"]))].filter(Boolean).map((t=>(1===t[0]&&(t[2]={sublabel:M.labelZoomActual}),t))).sort(((t,e)=>{const o=t[0]||$,n=e[0]||$;return o<n?-1:n<o?1:0}))),4352&t.$$.dirty[1]&&o(37,s=Math.min(a.reduce(((t,[e])=>e<t?e:t),Number.MAX_SAFE_INTEGER),$)),256&t.$$.dirty[1]&&o(36,l=a.reduce(((t,[e])=>e>t?e:t),Number.MIN_SAFE_INTEGER)),2&t.$$.dirty[1]&&null!==N&&xt(N),30720&t.$$.dirty[1]&&o(41,d=p||(y||x<1?$:1)),1280&t.$$.dirty[1]&&o(38,(e=a.map((([t])=>t)),m=d,c=e.findIndex((t=>t===m)))),1024&t.$$.dirty[1]&&o(40,u=Hd(d)+"%"),202522624&t.$$.dirty[0]|3040&t.$$.dirty[1]&&o(11,H=(P||P)&&T?[["Button","zoom-out",{hideLabel:!0,label:M.labelZoomOut,icon:M.iconZoomOut,disabled:p===s,onclick:()=>bt((t=>Math.max(s,t-B))),onhold:()=>bt((t=>Math.max(s,t*(1-O))))}],["Dropdown","zoom-level",{label:u,labelClass:"PinturaFixedWidthCharacters",options:a,selectedIndex:c,onchange:t=>xt(t.value)}],["Button","zoom-in",{hideLabel:!0,label:M.labelZoomIn,icon:M.iconZoomIn,disabled:p===l,onclick:()=>bt((t=>Math.min(l,t+B))),onhold:()=>bt((t=>Math.min(l,t*(1+O))))}]]:[]),8192&t.$$.dirty[0]|16&t.$$.dirty[1]&&C&&Bt(n),8192&t.$$.dirty[0]|8&t.$$.dirty[1]&&C&&Dt(i),4202496&t.$$.dirty[0]|12&t.$$.dirty[1]&&C&&C.style.setProperty("--cursor",i&&E?dt?"grabbing":"grab":"")},[V,Z,G,q,X,Y,K,J,et,ot,it,H,U,C,M,k,S,P,R,A,T,I,E,L,z,F,B,O,D,_,W,j,N,dt,i,n,l,s,c,a,u,d,p,$,y,x]}class Gd extends ar{constructor(t){super(),rr(this,t,Zd,null,In,{root:13,locale:14,stores:15,allowPan:16,allowZoom:17,enablePan:18,enableZoom:19,enableZoomControls:20,enableZoomInput:21,enablePanInput:22,enablePanLimit:23,panLimitGutterScalar:24,zoomOptions:25,zoomAdjustStep:26,zoomAdjustFactor:27,zoomAdjustWheelFactor:28,elasticity:29,imageSelectionRectCentered:30,imageSelectionRectScalar:31,zoomLevel:32,zoomControls:11,zoomMultiTouching:12},null,[-1,-1,-1])}}const{window:qd}=Xi;function Xd(t){let e,o,n,i=t[39]&&Yd(t),r=t[37]&&ru(t);return{c(){i&&i.c(),e=ii(),r&&r.c(),o=ri()},m(t,a){i&&i.m(t,a),Qn(t,e,a),r&&r.m(t,a),Qn(t,o,a),n=!0},p(t,n){t[39]?i?(i.p(t,n),256&n[1]&&Vi(i,1)):(i=Yd(t),i.c(),Vi(i,1),i.m(e.parentNode,e)):i&&(Hi(),Zi(i,1,1,(()=>{i=null})),Ui()),t[37]?r?(r.p(t,n),64&n[1]&&Vi(r,1)):(r=ru(t),r.c(),Vi(r,1),r.m(o.parentNode,o)):r&&(Hi(),Zi(r,1,1,(()=>{r=null})),Ui())},i(t){n||(Vi(i),Vi(r),n=!0)},o(t){Zi(i),Zi(r),n=!1},d(t){i&&i.d(t),t&&ti(e),r&&r.d(t),t&&ti(o)}}}function Yd(t){let e,o,n,i,r,a;const s=[Jd,Kd],l=[];function c(t,e){return t[38]?0:t[33]?1:-1}return~(n=c(t))&&(i=l[n]=s[n](t)),{c(){e=ei("div"),o=ei("p"),i&&i.c(),li(o,"style",t[67]),li(e,"class","PinturaStatus"),li(e,"style",r=`opacity: ${t[51]}`)},m(t,i){Qn(t,e,i),Yn(e,o),~n&&l[n].m(o,null),a=!0},p(t,d){let u=n;n=c(t),n===u?~n&&l[n].p(t,d):(i&&(Hi(),Zi(l[u],1,1,(()=>{l[u]=null})),Ui()),~n?(i=l[n],i?i.p(t,d):(i=l[n]=s[n](t),i.c()),Vi(i,1),i.m(o,null)):i=null),(!a||32&d[2])&&li(o,"style",t[67]),(!a||1048576&d[1]&&r!==(r=`opacity: ${t[51]}`))&&li(e,"style",r)},i(t){a||(Vi(i),a=!0)},o(t){Zi(i),a=!1},d(t){t&&ti(e),~n&&l[n].d()}}}function Kd(t){let e,o,n,i;e=new Bl({props:{text:t[33].text||"",onmeasure:t[187]}});let r=t[33].aside&&Qd(t);return{c(){or(e.$$.fragment),o=ii(),r&&r.c(),n=ri()},m(t,a){nr(e,t,a),Qn(t,o,a),r&&r.m(t,a),Qn(t,n,a),i=!0},p(t,o){const i={};4&o[1]&&(i.text=t[33].text||""),e.$set(i),t[33].aside?r?(r.p(t,o),4&o[1]&&Vi(r,1)):(r=Qd(t),r.c(),Vi(r,1),r.m(n.parentNode,n)):r&&(Hi(),Zi(r,1,1,(()=>{r=null})),Ui())},i(t){i||(Vi(e.$$.fragment,t),Vi(r),i=!0)},o(t){Zi(e.$$.fragment,t),Zi(r),i=!1},d(t){ir(e,t),t&&ti(o),r&&r.d(t),t&&ti(n)}}}function Jd(t){let e,o,n,i;return e=new Bl({props:{text:t[38],onmeasure:t[187]}}),n=new Nl({props:{class:"PinturaStatusIcon",offset:t[77],opacity:t[78],$$slots:{default:[iu]},$$scope:{ctx:t}}}),{c(){or(e.$$.fragment),o=ii(),or(n.$$.fragment)},m(t,r){nr(e,t,r),Qn(t,o,r),nr(n,t,r),i=!0},p(t,o){const i={};128&o[1]&&(i.text=t[38]),e.$set(i);const r={};32768&o[2]&&(r.offset=t[77]),65536&o[2]&&(r.opacity=t[78]),8&o[0]|512&o[16]&&(r.$$scope={dirty:o,ctx:t}),n.$set(r)},i(t){i||(Vi(e.$$.fragment,t),Vi(n.$$.fragment,t),i=!0)},o(t){Zi(e.$$.fragment,t),Zi(n.$$.fragment,t),i=!1},d(t){ir(e,t),t&&ti(o),ir(n,t)}}}function Qd(t){let e,o;return e=new Nl({props:{class:"PinturaStatusButton",offset:t[77],opacity:t[78],$$slots:{default:[ou]},$$scope:{ctx:t}}}),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const n={};32768&o[2]&&(n.offset=t[77]),65536&o[2]&&(n.opacity=t[78]),4&o[1]|512&o[16]&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function tu(t){let e,o;return e=new _l({props:{progress:t[33].progressIndicator.progress}}),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const n={};4&o[1]&&(n.progress=t[33].progressIndicator.progress),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function eu(t){let e,o;const n=[t[33].closeButton,{hideLabel:!0}];let i={};for(let t=0;t<n.length;t+=1)i=Sn(i,n[t]);return e=new $l({props:i}),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const i=4&o[1]?Qi(n,[tr(t[33].closeButton),n[1]]):{};e.$set(i)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function ou(t){let e,o,n,i=t[33].progressIndicator.visible&&tu(t),r=t[33].closeButton&&t[33].text&&eu(t);return{c(){i&&i.c(),e=ii(),r&&r.c(),o=ri()},m(t,a){i&&i.m(t,a),Qn(t,e,a),r&&r.m(t,a),Qn(t,o,a),n=!0},p(t,n){t[33].progressIndicator.visible?i?(i.p(t,n),4&n[1]&&Vi(i,1)):(i=tu(t),i.c(),Vi(i,1),i.m(e.parentNode,e)):i&&(Hi(),Zi(i,1,1,(()=>{i=null})),Ui()),t[33].closeButton&&t[33].text?r?(r.p(t,n),4&n[1]&&Vi(r,1)):(r=eu(t),r.c(),Vi(r,1),r.m(o.parentNode,o)):r&&(Hi(),Zi(r,1,1,(()=>{r=null})),Ui())},i(t){n||(Vi(i),Vi(r),n=!0)},o(t){Zi(i),Zi(r),n=!1},d(t){i&&i.d(t),t&&ti(e),r&&r.d(t),t&&ti(o)}}}function nu(t){let e,o=t[3].iconSupportError+"";return{c(){e=oi("g")},m(t,n){Qn(t,e,n),e.innerHTML=o},p(t,n){8&n[0]&&o!==(o=t[3].iconSupportError+"")&&(e.innerHTML=o)},d(t){t&&ti(e)}}}function iu(t){let e,o;return e=new tl({props:{$$slots:{default:[nu]},$$scope:{ctx:t}}}),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const n={};8&o[0]|512&o[16]&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function ru(t){let e,o,n,i,r,a,s,l,c,d,u,h,p,m,g=t[9]&&au(t),f=t[43]&&t[42]&&su(t);const $=[hu,uu],y=[];function b(t,e){return t[43]?0:1}function x(e){t[366](e)}function v(e){t[367](e)}function w(e){t[368](e)}n=b(t),i=y[n]=$[n](t),a=new As({props:{isAnimated:t[50],isTransparent:t[18],pixelRatio:t[54],textPixelRatio:t[10],backgroundColor:t[53],maskRect:t[55],maskOpacity:t[68]?t[68].maskOpacity:1,maskMarkupOpacity:t[6],maskFrameOpacity:t[5],clipAnnotationsToImage:t[80],images:t[52],interfaceImages:t[81],loadImageData:t[26],willRequest:t[76]||t[82],willRender:t[363],didRender:t[364]}});let C={root:t[2],locale:t[3],stores:t[177],allowPan:t[84],enablePan:t[15],enablePanLimit:t[19],panLimitGutterScalar:t[20],enablePanInput:t[85],allowZoom:t[86],enableZoom:t[16],enableZoomInput:void 0!==t[17]?t[17]:t[87],enableZoomControls:t[88],zoomOptions:t[11]||t[21],zoomAdjustStep:t[12]||t[22],zoomAdjustFactor:t[13]||t[23],zoomAdjustWheelFactor:t[14]||t[24],imageSelectionRectCentered:t[89],imageSelectionRectScalar:t[90],elasticity:fu*t[7]};return void 0!==t[0]&&(C.zoomLevel=t[0]),void 0!==t[31]&&(C.zoomControls=t[31]),void 0!==t[32]&&(C.zoomMultiTouching=t[32]),d=new Gd({props:C}),Si.push((()=>er(d,"zoomLevel",x))),Si.push((()=>er(d,"zoomControls",v))),Si.push((()=>er(d,"zoomMultiTouching",w))),{c(){g&&g.c(),e=ii(),f&&f.c(),o=ii(),i.c(),r=ii(),or(a.$$.fragment),s=ii(),l=ei("div"),c=ii(),or(d.$$.fragment),li(l,"class","PinturaRootPortal")},m(i,u){g&&g.m(i,u),Qn(i,e,u),f&&f.m(i,u),Qn(i,o,u),y[n].m(i,u),Qn(i,r,u),nr(a,i,u),Qn(i,s,u),Qn(i,l,u),t[365](l),Qn(i,c,u),nr(d,i,u),m=!0},p(t,s){t[9]?g?(g.p(t,s),512&s[0]&&Vi(g,1)):(g=au(t),g.c(),Vi(g,1),g.m(e.parentNode,e)):g&&(Hi(),Zi(g,1,1,(()=>{g=null})),Ui()),t[43]&&t[42]?f?(f.p(t,s),6144&s[1]&&Vi(f,1)):(f=su(t),f.c(),Vi(f,1),f.m(o.parentNode,o)):f&&(Hi(),Zi(f,1,1,(()=>{f=null})),Ui());let l=n;n=b(t),n===l?y[n].p(t,s):(Hi(),Zi(y[l],1,1,(()=>{y[l]=null})),Ui(),i=y[n],i?i.p(t,s):(i=y[n]=$[n](t),i.c()),Vi(i,1),i.m(r.parentNode,r));const c={};524288&s[1]&&(c.isAnimated=t[50]),262144&s[0]&&(c.isTransparent=t[18]),8388608&s[1]&&(c.pixelRatio=t[54]),1024&s[0]&&(c.textPixelRatio=t[10]),4194304&s[1]&&(c.backgroundColor=t[53]),16777216&s[1]&&(c.maskRect=t[55]),64&s[2]&&(c.maskOpacity=t[68]?t[68].maskOpacity:1),64&s[0]&&(c.maskMarkupOpacity=t[6]),32&s[0]&&(c.maskFrameOpacity=t[5]),262144&s[2]&&(c.clipAnnotationsToImage=t[80]),2097152&s[1]&&(c.images=t[52]),524288&s[2]&&(c.interfaceImages=t[81]),67108864&s[0]&&(c.loadImageData=t[26]),1064960&s[2]&&(c.willRequest=t[76]||t[82]),256&s[0]|376840&s[1]|2097152&s[2]&&(c.willRender=t[363]),2080374784&s[1]&&(c.didRender=t[364]),a.$set(c);const m={};4&s[0]&&(m.root=t[2]),8&s[0]&&(m.locale=t[3]),4194304&s[2]&&(m.allowPan=t[84]),32768&s[0]&&(m.enablePan=t[15]),524288&s[0]&&(m.enablePanLimit=t[19]),1048576&s[0]&&(m.panLimitGutterScalar=t[20]),8388608&s[2]&&(m.enablePanInput=t[85]),16777216&s[2]&&(m.allowZoom=t[86]),65536&s[0]&&(m.enableZoom=t[16]),131072&s[0]|33554432&s[2]&&(m.enableZoomInput=void 0!==t[17]?t[17]:t[87]),67108864&s[2]&&(m.enableZoomControls=t[88]),2099200&s[0]&&(m.zoomOptions=t[11]||t[21]),4198400&s[0]&&(m.zoomAdjustStep=t[12]||t[22]),8396800&s[0]&&(m.zoomAdjustFactor=t[13]||t[23]),16793600&s[0]&&(m.zoomAdjustWheelFactor=t[14]||t[24]),134217728&s[2]&&(m.imageSelectionRectCentered=t[89]),268435456&s[2]&&(m.imageSelectionRectScalar=t[90]),128&s[0]&&(m.elasticity=fu*t[7]),!u&&1&s[0]&&(u=!0,m.zoomLevel=t[0],zi((()=>u=!1))),!h&&1&s[1]&&(h=!0,m.zoomControls=t[31],zi((()=>h=!1))),!p&&2&s[1]&&(p=!0,m.zoomMultiTouching=t[32],zi((()=>p=!1))),d.$set(m)},i(t){m||(Vi(g),Vi(f),Vi(i),Vi(a.$$.fragment,t),Vi(d.$$.fragment,t),m=!0)},o(t){Zi(g),Zi(f),Zi(i),Zi(a.$$.fragment,t),Zi(d.$$.fragment,t),m=!1},d(i){g&&g.d(i),i&&ti(e),f&&f.d(i),i&&ti(o),y[n].d(i),i&&ti(r),ir(a,i),i&&ti(s),i&&ti(l),t[365](null),i&&ti(c),ir(d,i)}}}function au(t){let e,o,n,i,r;return o=new Sd({props:{items:t[64]}}),{c(){e=ei("div"),or(o.$$.fragment),li(e,"class","PinturaNav PinturaNavTools")},m(a,s){Qn(a,e,s),nr(o,e,null),n=!0,i||(r=[ai(e,"measure",t[350]),Hn(vs.call(null,e))],i=!0)},p(t,e){const n={};4&e[2]&&(n.items=t[64]),o.$set(n)},i(t){n||(Vi(o.$$.fragment,t),n=!0)},o(t){Zi(o.$$.fragment,t),n=!1},d(t){t&&ti(e),ir(o),i=!1,An(r)}}}function su(t){let e,o,n;return o=new El({props:{elasticity:t[7]*yu,scrollDirection:t[70]?"y":"x",$$slots:{default:[du]},$$scope:{ctx:t}}}),{c(){e=ei("div"),or(o.$$.fragment),li(e,"class","PinturaNav PinturaNavMain")},m(t,i){Qn(t,e,i),nr(o,e,null),n=!0},p(t,e){const n={};128&e[0]&&(n.elasticity=t[7]*yu),256&e[2]&&(n.scrollDirection=t[70]?"y":"x"),1024&e[1]|6144&e[2]|512&e[16]&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){n||(Vi(o.$$.fragment,t),n=!0)},o(t){Zi(o.$$.fragment,t),n=!1},d(t){t&&ti(e),ir(o)}}}function lu(t){let e,o=t[504].icon+"";return{c(){e=oi("g")},m(t,n){Qn(t,e,n),e.innerHTML=o},p(t,n){256&n[16]&&o!==(o=t[504].icon+"")&&(e.innerHTML=o)},d(t){t&&ti(e)}}}function cu(t){let e,o,n,i,r,a=t[504].label+"";return e=new tl({props:{$$slots:{default:[lu]},$$scope:{ctx:t}}}),{c(){or(e.$$.fragment),o=ii(),n=ei("span"),i=ni(a)},m(t,a){nr(e,t,a),Qn(t,o,a),Qn(t,n,a),Yn(n,i),r=!0},p(t,o){const n={};768&o[16]&&(n.$$scope={dirty:o,ctx:t}),e.$set(n),(!r||256&o[16])&&a!==(a=t[504].label+"")&&di(i,a)},i(t){r||(Vi(e.$$.fragment,t),r=!0)},o(t){Zi(e.$$.fragment,t),r=!1},d(t){ir(e,t),t&&ti(o),t&&ti(n)}}}function du(t){let e,o;const n=[t[74],{tabs:t[73]}];let i={$$slots:{default:[cu,({tab:t})=>({504:t}),({tab:t})=>[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t?256:0]]},$$scope:{ctx:t}};for(let t=0;t<n.length;t+=1)i=Sn(i,n[t]);return e=new Ds({props:i}),e.$on("select",t[351]),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const i=6144&o[2]?Qi(n,[4096&o[2]&&tr(t[74]),2048&o[2]&&{tabs:t[73]}]):{};768&o[16]&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function uu(t){let e,o,n;function i(e){t[359](e)}let r={class:"PinturaMain",content:{...t[44].find(t[358]),props:t[25][t[41]]},locale:t[3],stores:t[177]};return void 0!==t[1][t[41]]&&(r.component=t[1][t[41]]),e=new vl({props:r}),Si.push((()=>er(e,"component",i))),e.$on("measure",t[199]),e.$on("show",t[360]),e.$on("hide",t[361]),e.$on("fade",t[362]),{c(){or(e.$$.fragment)},m(t,o){nr(e,t,o),n=!0},p(t,n){const i={};33554432&n[0]|9216&n[1]&&(i.content={...t[44].find(t[358]),props:t[25][t[41]]}),8&n[0]&&(i.locale=t[3]),!o&&2&n[0]|1024&n[1]&&(o=!0,i.component=t[1][t[41]],zi((()=>o=!1))),e.$set(i)},i(t){n||(Vi(e.$$.fragment,t),n=!0)},o(t){Zi(e.$$.fragment,t),n=!1},d(t){ir(e,t)}}}function hu(t){let e,o;const n=[{class:"PinturaMain"},{visible:t[56]},t[74],{panels:t[72]}];let i={$$slots:{default:[pu,({panel:t,panelIsActive:e})=>({502:t,503:e}),({panel:t,panelIsActive:e})=>[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(t?64:0)|(e?128:0)]]},$$scope:{ctx:t}};for(let t=0;t<n.length;t+=1)i=Sn(i,n[t]);return e=new Ys({props:i}),e.$on("measure",t[357]),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const i=33554432&o[1]|5120&o[2]?Qi(n,[n[0],33554432&o[1]&&{visible:t[56]},4096&o[2]&&tr(t[74]),1024&o[2]&&{panels:t[72]}]):{};33554442&o[0]|33562656&o[1]|704&o[16]&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function pu(t){let e,o,n;function i(...e){return t[352](t[502],...e)}function r(e){t[353](e,t[502])}let a={content:{...t[44].find(i),props:t[25][t[502]]},locale:t[3],isActive:t[503],stores:t[177]};return void 0!==t[1][t[502]]&&(a.component=t[1][t[502]]),e=new vl({props:a}),Si.push((()=>er(e,"component",r))),e.$on("measure",t[199]),e.$on("show",(function(){return t[354](t[502])})),e.$on("hide",(function(){return t[355](t[502])})),e.$on("fade",(function(...e){return t[356](t[502],...e)})),{c(){or(e.$$.fragment)},m(t,o){nr(e,t,o),n=!0},p(n,r){t=n;const a={};33554432&r[0]|8192&r[1]|64&r[16]&&(a.content={...t[44].find(i),props:t[25][t[502]]}),8&r[0]&&(a.locale=t[3]),128&r[16]&&(a.isActive=t[503]),!o&&2&r[0]|64&r[16]&&(o=!0,a.component=t[1][t[502]],zi((()=>o=!1))),e.$set(a)},i(t){n||(Vi(e.$$.fragment,t),n=!0)},o(t){Zi(e.$$.fragment,t),n=!1},d(t){ir(e,t)}}}function mu(t){let e,o;return{c(){e=ei("span"),li(e,"class","PinturaEditorOverlay"),li(e,"style",o=`opacity:${t[91]}`)},m(t,o){Qn(t,e,o)},p(t,n){536870912&n[2]&&o!==(o=`opacity:${t[91]}`)&&li(e,"style",o)},d(t){t&&ti(e)}}}function gu(t){let e,o,n,i,a;Li(t[349]);let s=t[63]&&Xd(t),l=t[91]>0&&mu(t);return{c(){e=ei("div"),s&&s.c(),o=ii(),l&&l.c(),li(e,"id",t[4]),li(e,"class",t[71]),li(e,"data-env",t[69])},m(c,d){Qn(c,e,d),s&&s.m(e,null),Yn(e,o),l&&l.m(e,null),t[369](e),n=!0,i||(a=[ai(qd,"keydown",t[190]),ai(qd,"keyup",t[191]),ai(qd,"blur",t[192]),ai(qd,"paste",t[196]),ai(qd,"resize",t[349]),ai(e,"ping",(function(){Tn(t[62])&&t[62].apply(this,arguments)})),ai(e,"contextmenu",t[193]),ai(e,"touchstart",t[188],{passive:!1}),ai(e,"touchmove",(function(){Tn(t[66])&&t[66].apply(this,arguments)})),ai(e,"pointermove",(function(){Tn(t[65])&&t[65].apply(this,arguments)})),ai(e,"transitionend",t[178]),ai(e,"dropfiles",t[194]),ai(e,"measure",t[370]),ai(e,"click",(function(){Tn(t[40]?t[195]:r)&&(t[40]?t[195]:r).apply(this,arguments)})),Hn(vs.call(null,e,{observeViewRect:!0})),Hn(ws.call(null,e)),Hn(Ms.call(null,e))],i=!0)},p(i,r){(t=i)[63]?s?(s.p(t,r),2&r[2]&&Vi(s,1)):(s=Xd(t),s.c(),Vi(s,1),s.m(e,o)):s&&(Hi(),Zi(s,1,1,(()=>{s=null})),Ui()),t[91]>0?l?l.p(t,r):(l=mu(t),l.c(),l.m(e,null)):l&&(l.d(1),l=null),(!n||16&r[0])&&li(e,"id",t[4]),(!n||512&r[2])&&li(e,"class",t[71]),(!n||128&r[2])&&li(e,"data-env",t[69])},i(t){n||(Vi(s),n=!0)},o(t){Zi(s),n=!1},d(o){o&&ti(e),s&&s.d(),l&&l.d(),t[369](null),i=!1,An(a)}}}const fu=1,$u="stage-overlay",yu=10;function bu(t,e,o){let n,i,a,s,l,c,d,p,g,f,$,y,b,x,w,C,M,S,P,R,A,T,I,E,L,z,F,B,D,_,W,j,N,H,U,V,Z,G,q,X,Y,J,ot,rt,at,st,lt,ht,pt,mt,gt,ft,$t,yt,bt,xt,vt,wt,Ct,Mt,St,Pt,Rt,At,Tt,It,Et,Lt,zt,Ft,Bt,Wt,Nt,Gt,qt,Qt,te,ne,ie,se,ce,ue,he,pe,me,ge,fe,be,xe,ve,we,Ce,Me,ke,Se,Pe,Re,Ae,Te,Ie,Ee,Le,ze,Fe,Be,Oe,_e,We,je,He,Ve,Ze,Ge,qe,Xe,Ye,Ke,Je,Qe,to,eo,oo,no,io,ao,so,co,uo,ho,po,mo,fo,$o,yo,bo,xo,vo,wo,Co,Mo,ko,So,Po,Ro,Ao,To,Eo,Lo,Bo,Oo,_o,jo,No,Ho,Uo,Vo,Zo,Go,qo,Xo,Yo,Ko,en,on,rn,an,sn,ln,cn,dn,un,hn,pn,mn,gn,fn,$n,yn,bn,xn,vn,kn=Mn,Sn=Mn;zn(t,ds,(t=>o(346,Go=t))),t.$$.on_destroy.push((()=>kn())),t.$$.on_destroy.push((()=>Sn()));const Pn=go(),Rn=vi();let{class:An}=e,{layout:Tn}=e,{stores:In}=e,{locale:Fn}=e,{id:Bn}=e,{util:On}=e,{utils:Dn}=e,{animations:_n="auto"}=e,{disabled:Wn=!1}=e,{status:jn}=e,{previewUpscale:Hn=!1}=e,{previewPad:Un=!1}=e,{previewMaskOpacity:Vn=.95}=e,{markupMaskOpacity:Zn=1}=e,{elasticityMultiplier:Gn=10}=e,{willRevert:qn=(()=>Promise.resolve(!0))}=e,{willProcessImage:Xn=(()=>Promise.resolve(!0))}=e,{willRenderCanvas:Yn=O}=e,{willRenderToolbar:Kn=O}=e,{willSetHistoryInitialState:Jn=O}=e,{enableButtonExport:Qn=!0}=e,{enableButtonRevert:ti=!0}=e,{enableNavigateHistory:ei=!0}=e,{enableToolbar:oi=!0}=e,{enableUtils:ni=!0}=e,{enableButtonClose:ii=!1}=e,{enableDropImage:ri=!0}=e,{enablePasteImage:ai=!1}=e,{enableBrowseImage:si=!1}=e,{previewImageDataMaxSize:li}=e,{previewImageTextPixelRatio:ci}=e,{layoutDirectionPreference:di="auto"}=e,{layoutHorizontalUtilsPreference:ui="left"}=e,{layoutVerticalUtilsPreference:hi="bottom"}=e,{layoutVerticalToolbarPreference:pi="top"}=e,{layoutVerticalControlGroupsPreference:mi="bottom"}=e,{layoutVerticalControlTabsPreference:gi="bottom"}=e,{markupEditorZoomLevel:fi=null}=e,{markupEditorZoomLevels:$i}=e,{markupEditorZoomAdjustStep:yi}=e,{markupEditorZoomAdjustFactor:bi}=e,{markupEditorZoomAdjustWheelFactor:Ci}=e,{markupEditorInteractionMode:Mi=!1}=e,{enablePan:ki=!0}=e,{enableZoom:Pi=!0}=e,{enableZoomControls:Ri=!0}=e,{enableZoomInput:Ai}=e,{enablePanInput:Ti}=e,{enableCanvasAlpha:Ii=!1}=e,{enablePanLimit:Ei}=e,{panLimitGutterScalar:Li}=e,{zoomPresetOptions:zi=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=e,{zoomAdjustStep:Fi=.25}=e,{zoomAdjustFactor:Bi=.1}=e,{zoomAdjustWheelFactor:Oi=1}=e,{zoomLevel:Di=null}=e,{imagePreviewSrc:_i}=e,{imageOrienter:Wi={read:()=>1,apply:t=>t}}=e,{pluginComponents:ji}=e,{pluginOptions:Ni={}}=e;const Hi=Pn.sub,Ui={};let{root:Vi}=e;const Zi=cr({});zn(t,Zi,(t=>o(49,Oe=t))),wi("redrawTrigger",Zi);const Gi=cr(Gn);zn(t,Gi,(t=>o(410,an=t))),wi("elasticityMultiplier",Gi);let qi=[];const Xi=cs();zn(t,Xi,(t=>o(91,vn=t)));const Yi=Za()||1024,Ki=kt(Yi,Yi),Ji=Nr(),Qi=t=>Promise.resolve(rn&&rn(t,{resourceType:"image"})).then((e=>{if(!1===e)return;const{headers:o,credentials:n}=e||{};return fetch(t,{headers:o,credentials:n}).then((t=>{if(200!==t.status)throw`${t.status} (${t.statusText})`;return t.blob()})).then((t=>zd(t,Wi,Ji))).then((t=>Fd(t,a)))}));let{imageSourceToImageData:tr=(t=>v(t)?Qi(t):$e(t)?new Promise((e=>e(u(t)))):De(t)||ye(t)?zd(t,Wi,Ji).then((t=>Fd(t,a))):void 0)}=e;const er=(()=>{let t,e;const o=Rd.reduce(((t,o)=>(t[o]=function(t,n,i){let r=[];return{set:t=>{e&&e.stores[o].set(t)},update:t=>{e&&e.stores[o].update(t)},publish:t=>{r.forEach((e=>e(t)))},subscribe:t=>(r.push(t),(t=>{if(!e)return t();e.stores[o].subscribe(t)()})(t),()=>{r=r.filter((e=>e!==t))})}}(),t)),{});return{update:n=>{if(e=n,t&&(t.forEach((t=>t())),t=void 0),!n)return o.file.publish(void 0),void o.loadState.publish(void 0);t=Rd.map((t=>n.stores[t].subscribe((e=>{o[t].publish(e)}))))},stores:o,destroy:()=>{t&&t.forEach((t=>t()))}}})(),{file:or,size:nr,duration:ir,trim:rr,loadState:ar,processState:sr,cropAspectRatio:ur,cropLimitToImage:hr,crop:pr,cropMinSize:mr,cropMaxSize:gr,cropRange:fr,cropOrigin:$r,cropRectAspectRatio:yr,rotation:br,rotationRange:xr,targetSize:vr,flipX:wr,flipY:Cr,backgroundColor:Mr,backgroundImage:kr,colorMatrix:Rr,convolutionMatrix:Ar,gamma:Tr,vignette:Ir,noise:Er,decoration:Lr,annotation:zr,redaction:Fr,frame:Br,state:Or}=er.stores;zn(t,or,(t=>o(333,mo=t))),zn(t,nr,(t=>o(303,be=t))),zn(t,ir,(t=>o(330,so=t))),zn(t,rr,(t=>o(409,on=t))),zn(t,ar,(t=>o(322,Ye=t))),zn(t,sr,(t=>o(321,Xe=t))),zn(t,ur,(t=>o(406,qo=t))),zn(t,hr,(t=>o(80,dn=t))),zn(t,pr,(t=>o(342,Ao=t))),zn(t,br,(t=>o(306,we=t))),zn(t,wr,(t=>o(305,ve=t))),zn(t,Cr,(t=>o(304,xe=t))),zn(t,Mr,(t=>o(312,Ee=t))),zn(t,Lr,(t=>o(46,fe=t))),zn(t,zr,(t=>o(47,Ce=t))),zn(t,Fr,(t=>o(311,Ie=t))),zn(t,Br,(t=>o(45,ge=t))),zn(t,Or,(t=>o(394,ho=t)));const Dr=(t,e,o=0)=>new Promise(((n,i)=>{if(Ld(t))return void(qa()?(async t=>{const e=await(o=t,new Promise((t=>{const e=new FileReader;e.onload=()=>t(e.result),e.readAsArrayBuffer(o)})));var o;return((t,{limit:e=1024}={})=>{let o=0;if(o+=4,1718909296!==t.getUint32(o))return 0;if(o+=4,1836069938!==t.getUint32(o))return 0;let n=!1,i=-1;for(let r=o;r<e;r++)if(n||1953653099!==t.getUint32(r)||(n=!0,r+=4),n&&64==t.getUint8(r)){i=r;break}if(i<0)return 0;const r=t.getUint32(i-28),a=t.getUint32(i-20),s=t.getUint32(i-32),l=t.getUint32(i-16);return 65536===r&&4294901760===a?90:4294901760===s&&4294901760===l?180:4294901760===r&&65536===a?270:0})(new DataView(e))})(t):Promise.resolve()).then((e=>{const o=document.createElement("video");o.playsInline=!0,o.preload="auto",o.onloadeddata=()=>{o.dataset.rotation=e,o.currentTime=o.duration*(on?(([t,e])=>t+.5*(e-t))(on[0]):.5),n(o)},o.src=URL.createObjectURL(t),o.load()}));let r,a=!1;e.cancel=()=>a=!0;const s=Date.now();tr(t).then((t=>{const e=Date.now()-s;clearTimeout(r),r=setTimeout((()=>{a||n(t)}),Math.max(0,o-e))})).catch(i)})),{images:_r,shapePreprocessor:Wr,imageScrambler:jr,willRequest:Hr,willRequestResource:Ur}=In;let Vr;zn(t,_r,(t=>o(348,en=t))),zn(t,Wr,(t=>o(347,Ko=t))),zn(t,jr,(t=>o(313,Le=t))),zn(t,Hr,(t=>o(76,rn=t))),zn(t,Ur,(t=>o(82,hn=t)));const Zr=dr(kr,((t,e)=>{t&&(Vr&&(Vr.cancel(),Vr=void 0),Vr={cancel:r},Dr(t,Vr).then(e).catch((t=>{})))})),Gr=Or.subscribe((t=>Pn.pub("update",t))),qr=cr();wi("ui",cr({}));const Xr=cr(!0);zn(t,Xr,(t=>o(84,mn=t)));const Yr=cr(!0);zn(t,Yr,(t=>o(86,fn=t)));const Kr=cr(!0);zn(t,Kr,(t=>o(407,Xo=t)));const Jr=cr(!0);zn(t,Jr,(t=>o(87,$n=t)));const Qr=cr();zn(t,Qr,(t=>o(88,yn=t)));const ta=cr();zn(t,ta,(t=>o(408,Yo=t)));const ea=dr([ta,Kr],(()=>void 0!==Yo?Yo:Xo));zn(t,ea,(t=>o(85,gn=t)));const oa=cr([0,0,0]);zn(t,oa,(t=>o(53,bo=t)));const na=cr([1,1,1]);zn(t,na,(t=>o(391,Ae=t)));const ia=cs([1,1,1]);zn(t,ia,(t=>o(390,Re=t)));const ra=cr(),aa=cr();zn(t,aa,(t=>o(48,Fe=t)));const sa=cr();zn(t,sa,(t=>o(308,ke=t)));const la=cr(Dt());zn(t,la,(t=>o(75,po=t)));const ca=cr(Dt());zn(t,ca,(t=>o(79,cn=t)));const da=cr();zn(t,da,(t=>o(388,me=t)));const ua=Ed("(pointer: fine)",(t=>t?"pointer-fine":"pointer-coarse"));zn(t,ua,(t=>o(328,io=t)));const ha=Ed("(hover: hover)",(t=>t?"pointer-hover":"pointer-no-hover"));zn(t,ha,(t=>o(327,no=t)));const pa=cr(!1),ma=cr(!1);zn(t,ma,(t=>o(309,Pe=t)));const ga=lr(void 0,(t=>{const e=cs(0),o=[ma.subscribe((t=>{e.set(t?1:0)})),e.subscribe(t)];return()=>o.forEach((t=>t()))}));zn(t,ga,(t=>o(389,Se=t)));const fa=cr();zn(t,fa,(t=>o(393,to=t)));const $a=cr();zn(t,$a,(t=>o(50,We=t))),wi("isAnimated",$a);const ya=cr(Hn);zn(t,ya,(t=>o(331,co=t)));const ba=cr(!1);zn(t,ba,(t=>o(399,Bo=t))),wi("imageIsStatic",ba);const xa=cr();zn(t,xa,(t=>o(400,Oo=t)));const va=cr();zn(t,va,(t=>o(397,Eo=t)));const wa=lr(void 0,(t=>{const e=cr(void 0),o=[pr.subscribe((()=>{if(!Ao)return;if(Bo)return e.set(Ot(Ao));const t=kl(Ao,Eo,5*Gn);e.set(t)})),e.subscribe(t)];return()=>o.forEach((t=>t()))})),Ca=cr();zn(t,Ca,(t=>o(396,Ro=t)));const ka=cr();zn(t,ka,(t=>o(398,Lo=t)));const Sa=cr(void 0);zn(t,Sa,(t=>o(404,Uo=t)));const Pa=cr(Q());zn(t,Pa,(t=>o(405,Vo=t)));const Ra=(t,e)=>{if(!e||!t)return{top:0,right:0,bottom:0,left:0};const o=tn(e,t,s),n=Qo(o,t);return{top:Math.abs(n.top),right:Math.abs(n.right),bottom:Math.abs(n.bottom),left:Math.abs(n.left)}},Aa=cr({}),Ta=dr([da,la,ca,Aa],(([t,e,o,i],r)=>{if(!t)return r(void 0);let a=0;1!==S.length||n||(a=o.y+o.height),r(Ht(t.x+e.x,t.y+e.y+a,t.width,t.height))}));let Ia={left:0,right:0,top:0,bottom:0};const Ea=cr(!1),La=dr([Ea,Br,Ta,ma],(([t,e,o,n],i)=>{if(!o)return i({left:0,right:0,top:0,bottom:0});if(!t)return;const r=Math.min(o.width,o.height),a=Ra({width:r,height:r},e);K(Ia.top,4)===K(a.top,4)&&K(Ia.bottom,4)===K(a.bottom,4)&&K(Ia.right,4)===K(a.right,4)&&K(Ia.left,4)===K(a.left,4)||(Ia=a,i(a))}));zn(t,La,(t=>o(340,ko=t)));const za=dr([Ea,La],(([t,e],o)=>{if(!t)return o(!1);o(Object.values(e).some((t=>t>0)))}));zn(t,za,(t=>o(341,So=t)));const Fa=dr([Ea,da,za,La],(([t,e,o,n],i)=>{if(e)return t&&o?void i(Ht(e.x+n.left,e.y+n.top,e.width-n.left-n.right,e.height-n.top-n.bottom)):i({...e})})),Ba=dr([Ta,za,La],(([t,e,o],n)=>t?e?void n(Ht(t.x+o.left,t.y+o.top,t.width-o.left-o.right,t.height-o.top-o.bottom)):n(t):n(void 0)));zn(t,Ba,(t=>o(307,Me=t)));const Oa=dr([ba,nr,br],(([t,e,o],n)=>{if(!t||!e)return n(void 0);const i=_t(e);n(ee(i,o))})),Da=dr([Oa],(([t],e)=>{if(!t)return e(void 0);const o=jt(t);e(de(o))}));zn(t,Da,(t=>o(343,To=t)));const _a=dr([Ba,pr,Da,ya],(([t,e,o,n],i)=>{if(!t||!e||Oo||Eo)return;const{width:r,height:a}=o||e,s=Math.min(t.width/r,t.height/a);i(n?s:Math.min(1,s))}));zn(t,_a,(t=>o(402,jo=t)));const Wa=dr([ba,nr,br,Ba,da,_a],(([t,e,o,n,i,r],a)=>{if(!(t&&n&&i&&e))return a(void 0);const s=_t(e),l=de(Zt(s,r)),c=oe(n,l);l.x=c.x,l.y=c.y,a(ee(l,o))}));wi("imageStaticVisualCorners",Wa);const ja=cr(void 0);zn(t,ja,(t=>o(345,Zo=t)));const Na=dr([pr,Ba],(([t,e])=>{if(e&&t)return Math.min(e.width/t.width,e.height/t.height)})),Ha=dr([pr,Ca],(([t,e])=>t&&e?Math.min(t.width/e.width,t.height/e.height):1));zn(t,Ha,(t=>o(90,xn=t)));const Ua=dr([ja,Ha],(([t,e])=>t&&e?e*t:1));zn(t,Ua,(t=>o(403,No=t)));const Va=cr(Q());zn(t,Va,(t=>o(344,Ho=t)));const Ga=cr({scalar:No,translation:Ho}),Xa=()=>{Ga.set({scalar:void 0,translation:Q()})},Ya=lr(void 0,(t=>{const e=cs(void 0,{precision:1e-4}),o=1===Xl()?t=>le(t,Math.round):O,n=()=>{if(!Ro)return;const t=Pe||!to;if(Bo){const o=Ot(Ro);return Vt(o,Vo),Vt(o,Me),e.set(o,{hard:t})}const n=kl(Ro,Uo,fu*Gn);n.width<0&&(n.width=0,n.x=Ro.x),n.height<0&&(n.height=0,n.y=Ro.y),Vt(n,Me),Vt(n,Ho),Zt(n,No),!t&&o(n),e.set(n,{hard:t})},i=[Ba.subscribe(n),Ca.subscribe(n),Ua.subscribe(n),Va.subscribe(n),Br.subscribe(n),e.subscribe(t)];return()=>i.forEach((t=>t()))}));zn(t,Ya,(t=>o(55,Mo=t)));const Ka=cr(1);zn(t,Ka,(t=>o(395,Po=t)));const Ja=()=>{if(!Ao||!Me)return;let t=Xt(Ot(Ao),jo||1);const e=oe(Me,Xt(Ot(To),jo));Vt(t,e);const o=me.width/t.width,n=me.height/t.height,i=Math.min(1,o,n);Ka.set(i),Zt(t,i),((t,e)=>{const[o,n,i,r]=ae(t);o<e.y&&(t.y=Math.max(e.y,t.y)),n>e.width&&(t.x=e.width-t.width),i>e.height&&(t.y=e.height-t.height),r<e.x&&(t.x=Math.max(e.x,t.x))})(t,{...me,x:0,y:0}),Ca.set(t)},Qa=dr([Ba,_a,pr,nr],(([t,e,o,n],i)=>{t&&(o||n)&&i(ts(t,e||1,o||n))}));zn(t,Qa,(t=>o(89,bn=t)));const ts=(t,e,o)=>o.width<=t.width&&o.height<=t.height?oe(t,Xt(Ot(o),e)):re(t,Jt(o));let es,os;const ns=t=>{if(n&&es&&Kt(es,t)&&os===jo)return;if(Bo)return Ja();es=t,os=jo;const e=ts(t,jo,Ao||be);Ca.set(e)};let is=!1;const rs=_a.subscribe((t=>{!is&&void 0!==t&&Ao&&(ns(Me),is=!0)})),as=Ba.subscribe((t=>{t&&void 0!==jo&&Ao&&ns(t)})),ls=ba.subscribe((t=>{!t&&Me&&ns(Me)}));let us;const hs=ka.subscribe((t=>{if(!t)return us=void 0,void Nn(xa,Oo=void 0,Oo);us=_o;const e=Ot(Ao);xa.set(e)})),ps=Ca.subscribe((t=>{if(!t||!Lo)return;const e=(o=Ot(t),n=Lo,o.x-=n.x,o.y-=n.y,o.width-=n.width,o.height-=n.height,o);var o,n;Yt(e,us);const i=((t,e)=>(t.x+=e.x,t.y+=e.y,t.width+=e.width,t.height+=e.height,t))(Ot(Oo),e);pr.set(i)})),ms=pr.subscribe((t=>{if(!t||!Ro)return;if(Bo)return void(Lo||Ja());if(Pe||Lo||Eo)return;const e=Jt(Ro),o=Jt(t);if(K(e,6)===K(o,6))return;const{width:n,height:i}=To||Ao,r=Math.min(Me.width/n,Me.height/i),a=kt(t.width*r,t.height*r),s=.5*(Ro.width-a.width),l=.5*(Ro.height-a.height),c=Ht(Ro.x+s,Ro.y+l,a.width,a.height);Ca.set(c)})),gs=dr([_a,pr,Ca,ba],(([t,e,o,n],i)=>{if(!t||!e||!o)return;if(n)return i(Po);const r=o.width/e.width,a=o.height/e.height;i(Math.max(r,a)/t)})),fs=dr([_a,gs],(([t,e],o)=>{e&&o(t*e)}));zn(t,fs,(t=>o(401,_o=t)));let $s={left:0,right:0,top:0,bottom:0};const ys=dr([Br,Ca],(([t,e],o)=>{if(!e)return o($s);const n=Ra(e,t);K($s.top,4)===K(n.top,4)&&K($s.bottom,4)===K(n.bottom,4)&&K($s.right,4)===K(n.right,4)&&K($s.left,4)===K(n.left,4)||($s=n,o(n))})),bs=dr([ys],(([t],e)=>{e(Object.values(t).some((t=>t>0)))})),xs=cs(.075,{stiffness:.03,damping:.4,precision:.001}),vs=dr([ia,oa,xs,Ya,Ua,Br,bs,ys,za],(([t,e,o,i,r,a,s,l,c],d)=>{if(!i||n)return d([]);let{x:u,y:h,width:p,height:m}=i;u+=.5,h+=.5,p-=.5,m-=.5;const g=[];if(a){if(s){let{left:t,right:o,top:n,bottom:i}=l;t*=r,o*=r,n*=r,i*=r;const a=jd(e)?[1,1,1,.125]:[0,0,0,.075];g.push({x:u-t-.5,y:h-n-.5,width:p+t+o+1,height:m+n+i+1,strokeWidth:1,strokeColor:a,opacity:c?1:.5})}const n=jd(t);a&&a.frameColor&&jd(a.frameColor)||n||(g.push({x:u-1,y:h-1,width:p+2,height:m+2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:o}),g.push({x:u+1,y:h+1,width:p-2,height:m-2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:o}))}d([...g,{x:u,y:h,width:p,height:m,strokeWidth:1,strokeColor:t,opacity:o}])})),ws=cr([]);zn(t,ws,(t=>o(334,fo=t)));const Cs=dr([vs,ws],(([t,e],o)=>{o([...t,...e])}));zn(t,Cs,(t=>o(83,pn=t)));const Ms=cs(0,{precision:.001});zn(t,Ms,(t=>o(336,yo=t)));const ks=cs();zn(t,ks,(t=>o(339,wo=t)));const Ps=cs();zn(t,Ps,(t=>o(338,vo=t)));const Rs=cs();zn(t,Rs,(t=>o(337,xo=t)));const As=cs();zn(t,As,(t=>o(335,$o=t)));const Is=cr(!1);zn(t,Is,(t=>o(320,qe=t)));const Es=cr();let Ls;zn(t,Es,(t=>o(323,Ke=t)));const zs=dr([Is,Es],(([t,e],n)=>{if(!t||!e)return void n(void 0);if(Ls&&(Ls.cancel(),o(239,Ls=void 0)),nn(e))return n((t=>{const e=h("canvas",{width:t.width,height:t.height});return e.getContext("2d").drawImage(t,0,0),e})(e));const i=Qs.length?0:We?250:0;o(239,Ls={cancel:r}),Dr(e,Ls,i).then(n).catch((t=>{Nn(ar,Ye.error=t,Ye)})).finally((()=>{o(239,Ls=void 0)}))}));kn(),kn=En(zs,(t=>o(310,Te=t)));let{imagePreviewCurrent:Fs}=e;const Bs=cr({});zn(t,Bs,(t=>o(325,eo=t)));const Os=cr([]);zn(t,Os,(t=>o(81,un=t)));const Ds=dr([Ba,sa,nr,wa,Ca,fs,br,wr,Cr,Ua,Va,pa],(([t,e,o,n,i,r,a,s,l,c,d,u],h)=>{if(!t||!i)return;const p=((t,e,o,n,i,r,a,s,l,c,d)=>{if(!(t&&e&&o&&n&&s))return;s*=r;const u=de(Ot(e)),h=Ut(u),p=Ut(t),m=_t(o),g=Ut(m),f=Sr(o,n,l),$=Ut(f),y=ut(nt(g),$),b=ut(nt(p),h);y.x+=b.x,y.y+=b.y;const x=it(nt(y));x.x+=b.x,x.y+=b.y;const v=Ut(Vt(Vt(Ot(i),a),t)),w=ut(v,p);return dt(y,w),{origin:x,translation:y,rotation:{x:d?Math.PI:0,y:c?Math.PI:0,z:l},scale:s}})(t,e,o,n,i,c,d,r,a,s,l);!u&&w(p),h(p)}));zn(t,Ds,(t=>o(326,oo=t)));const _s=dr([Rr,Ar,Tr,Ir,Er],(([t,e,o,n,i],r)=>{const a=t&&Object.keys(t).map((e=>t[e])).filter(Boolean);r({gamma:o||void 0,vignette:n||void 0,noise:i||void 0,convolutionMatrix:e||void 0,colorMatrix:a&&a.length&&wn(a)})}));let Ws,js;const Ns=(()=>{if(!Ue())return!1;const t=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/i)||[],[,e,o]=t.map((t=>parseInt(t,10)||0));return e>13||13===e&&o>=4})(),Hs=cr({});zn(t,Hs,(t=>o(314,Be=t)));const Us=Xl(),Vs=lr(Us,(t=>{const e=()=>t(Xl()),o=matchMedia(`(resolution: ${Us}dppx)`);return o.addListener(e),()=>o.removeListener(e)}));zn(t,Vs,(t=>o(54,Co=t)));const Zs=((t,e)=>{const{sub:o,pub:n}=go(),i=[],r=cr(0),a=[],s=()=>a.forEach((t=>t({index:Ln(r),length:i.length}))),l={get index(){return Ln(r)},set index(t){t=Number.isInteger(t)?t:0,t=Pr(t,0,i.length-1),r.set(t),e(i[l.index]),s()},get state(){return i[i.length-1]},length:()=>i.length,undo(){const t=l.index--;return n("undo",t),t},redo(){const t=l.index++;return n("redo",l.index),t},revert(){i.length=1,l.index=0,n("revert")},write(o){o&&e({...t(),...o});const n=t(),a=i[i.length-1];JSON.stringify(n)!==JSON.stringify(a)&&(i.length=l.index+1,i.push(n),r.set(i.length-1),s())},set(t={}){i.length=0,l.index=0;const e=Array.isArray(t)?t:[t];i.push(...e),l.index=i.length-1},get:()=>[...i],subscribe:t=>(a.push(t),t({index:l.index,length:i.length}),()=>a.splice(a.indexOf(t),1)),on:o};return l})((()=>ho),(t=>{Nn(Or,ho=t,ho),la.set(po)}));Sn(),Sn=En(Zs,(t=>o(332,uo=t)));const Gs=()=>{const t={x:0,y:0,...be},e=le(re(t,ho.cropAspectRatio),Math.round),o=Jn({...ho,rotation:0,crop:e},ho),n=[o];JSON.stringify(o)!==JSON.stringify(ho)&&n.push({...ho}),Zs.set(n)},qs=ar.subscribe((t=>{t&&t.complete&&Gs()})),Xs=()=>qn().then((t=>t&&Zs.revert())),Ys=cr(!1);zn(t,Ys,(t=>o(315,_e=t)));const Ks=()=>{window.start=Date.now(),Nn(Ys,_e=!0,_e),Xn().then((t=>{if(!t)return void Nn(Ys,_e=!1,_e);let e;e=fl.subscribe((t=>{1===t&&(e&&e(),Rn("processImage"))}))}))},Js=sr.subscribe((t=>{if(!t)return;Nn(Ys,_e=!0,_e);const{complete:e,abort:o}=t;(e||o)&&Nn(Ys,_e=!1,_e)})),Qs=(()=>{const t=[],e=[],o=[],n=()=>{e.forEach((t=>t(o)))},i=e=>{e.unsub=e.subscribe((i=>((e,i)=>{const r=t.indexOf(e);r<0||(o[r]=i,n())})(e,i))),n()};return{get length(){return t.length},clear:()=>{t.forEach((t=>t.unsub())),t.length=0,o.length=0},unshift:e=>{t.unshift(e),i(e)},get:e=>t[e],push:e=>{t.push(e),i(e)},remove:e=>{e.unsub();const n=t.indexOf(e);t.splice(n,1),o.splice(n,1)},forEach:e=>t.forEach(e),filter:e=>t.filter(e),subscribe:t=>(e.push(t),t(o),()=>{e.splice(e.indexOf(t),1)})}})();zn(t,Qs,(t=>o(52,Je=t)));const tl=dr([Qs],(([t],e)=>{if(!t.length)return e();const{origin:o,translation:n,rotation:i,scale:r}=t[0];e({origin:o,translation:n,rotation:i,scale:r})})),el=cr();zn(t,el,(t=>o(329,ao=t)));let ol,nl=[];const il=cr(),rl=cr(),al=dr([ja,rl,_a,Na],(([t,e,o,n])=>t||(e||o<1?n:1))),sl={...In,imageFile:or,imageSize:nr,mediaDuration:ir,mediaTrim:rr,imageBackgroundColor:Mr,imageCropAspectRatio:ur,imageCropMinSize:mr,imageCropMaxSize:gr,imageCropLimitToImage:hr,imageCropRect:pr,imageCropRectOrigin:$r,imageCropRectSnapshot:xa,imageCropRectAspectRatio:yr,imageCropRange:fr,imageRotation:br,imageRotationRange:xr,imageFlipX:wr,imageFlipY:Cr,imageOutputSize:vr,imageColorMatrix:Rr,imageConvolutionMatrix:Ar,imageGamma:Tr,imageVignette:Ir,imageNoise:Er,imageDecoration:Lr,imageAnnotation:zr,imageRedaction:Fr,imageFrame:Br,imagePreview:zs,imagePreviewSource:Es,imageTransforms:Ds,imagePreviewModifiers:Bs,history:Zs,animation:fa,pixelRatio:Vs,elasticityMultiplier:Gn,scrollElasticity:yu,rangeInputElasticity:5,redrawTrigger:Zi,pointerAccuracy:ua,pointerHoverable:ha,env:Hs,rootRect:sa,stageRect:Ba,stageRectBase:Ta,stageRecenter:Aa,stageScalar:_a,stagePadding:La,stagePadded:za,presentationScalar:fs,imagePreviewUpscale:rl,utilRect:da,utilRectPadded:Fa,allowPan:Xr,allowZoom:Yr,enableZoomInput:Jr,enableZoomControls:Qr,enablePanInput:Kr,enablePanInputStatus:ea,imageSelectionMultiTouching:il,rootBackgroundColor:oa,rootForegroundColor:na,rootLineColor:ia,rootColorSecondary:ra,imageOutlineOpacity:xs,utilTools:el,imageSelectionPan:Va,imageSelectionZoom:ja,imageSelectionZoomCurrent:al,imageSelectionStageFitScalar:Na,imageSelectionStoredState:Ga,imageOverlayMarkup:ws,interfaceImages:Os,isInteracting:ma,isTransformingImage:pa,isInteractingFraction:ga,imageCropRectIntent:va,imageCropRectPresentation:wa,imageSelectionRect:Ca,imageSelectionRectIntent:Sa,imageSelectionRectPresentation:Ya,imageSelectionRectSnapshot:ka,imageScalar:gs,imageTransformsInterpolated:tl,imageEffects:_s};delete sl.image;const ll=`util-${k()}`;let cl=[],dl=Ue();const ul=(t,e)=>{const o=(t=>{const e=pt.getPropertyValue(t);return o=(o=e).trim(),/^rgba/.test(o)?o.substr(5).split(",").map(parseFloat).map(((t,e)=>t/(3===e?1:255))):/^rgb/.test(o)?o.substr(4).split(",").map(parseFloat).map((t=>t/255)):/^#/.test(o)?(t=>{const[,e,o,n]=t.split("");t=4===t.length?`#${e}${e}${o}${o}${n}${n}`:t;const[,i,r,a]=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return[i,r,a].map((t=>parseInt(t,16)/255))})(o):/[0-9]{1,3}\s?,\s?[0-9]{1,3}\s?,\s?[0-9]{1,3}/.test(o)?o.split(",").map((t=>parseInt(t,10))).map((t=>t/255)):void 0;var o})(t);o&&0!==o[3]&&(o.length=3,e.set(o,{hard:!We}))},hl=()=>{ul("color",na),ul(Ii?"--color-background":"background-color",oa),ul("outline-color",ia),ul("--color-secondary",ra)},pl=dr([Ds,_s,Mr,Zr],(([t,e,o,n])=>t&&{...t,...e,backgroundColor:o,backgroundImage:n}));zn(t,pl,(t=>o(324,Qe=t)));const ml=t=>{Qs.forEach(((e,o)=>{const n=0===o?1:0;e.set({...t,opacity:n,resize:1},to)}))};let gl;const fl=ss(void 0,{duration:500});let $l;zn(t,fl,(t=>o(51,Ze=t)));const yl=cr(!1);let bl;zn(t,yl,(t=>o(319,Ge=t)));const xl=cs(void 0,{stiffness:.1,damping:.7,precision:.25});zn(t,xl,(t=>o(77,sn=t)));const vl=cs(0,{stiffness:.1,precision:.05});zn(t,vl,(t=>o(78,ln=t)));const wl=cs(0,{stiffness:.02,damping:.5,precision:.25});zn(t,wl,(t=>o(317,He=t)));const Cl=cs(void 0,{stiffness:.02,damping:.5,precision:.25});zn(t,Cl,(t=>o(318,Ve=t)));const Ml=cs(void 0,{stiffness:.02,damping:.5,precision:.25});let Sl;zn(t,Ml,(t=>o(316,je=t)));const Pl=()=>{Rn("abortLoadImage")},Rl=()=>{Rn("abortProcessImage"),Nn(Ys,_e=!1,_e)},Al=t=>t.preventDefault(),Tl=Ns?t=>{const e=t.touches?t.touches[0]:t;e.pageX>20&&e.pageX<window.innerWidth-20||Al(t)}:r,Il=cr([]);zn(t,Il,(t=>o(392,ze=t))),wi("keysPressed",Il);const El=t=>{!t||lo(t)&&!(t=>/^image/.test(t.type)&&!/svg/.test(t.type))(t)||!lo(t)&&!/^http/.test(t)||Rn("loadImage",t)},Ll=t=>{t&&El(t)},zl=()=>{si&&((t={})=>new Promise((e=>{const{accept:o="image/*"}=t,n=h("input",{style:"position:absolute;visibility:hidden;width:0;height:0;",type:"file",accept:o}),i=()=>{const[t]=n.files;n.parentNode&&n.remove(),n.removeEventListener("change",i),e(t)};n.addEventListener("change",i),Ue()&&document.body.append(n),n.click()})))().then(Ll)};let Fl,Bl,Ol=[];const Dl=cr();wi("rootPortal",Dl),wi("rootRect",sa);const _l=()=>({foregroundColor:[...Ae],lineColor:[...Re],utilVisibility:{...I},isInteracting:Pe,isInteractingFraction:Se,rootRect:Ot(ke),stageRect:Ot(Me),annotationShapesDirty:Ql,decorationShapesDirty:ec,frameShapesDirty:oc,blendShapesDirty:nc}),Wl=(t,e,o)=>Jo(t,kt(e.width/o,e.height/o)),jl=(t,e,o)=>(t._translate=et(e),t._scale=o,t),Nl=t=>{const e=[];return t.forEach((t=>e.push(Hl(t)))),e.filter(Boolean)},Hl=t=>Do(t)?(t.points=[tt(t.x1,t.y1),tt(t.x2,t.y2)],t):(!(t=>zo(t)&&!t.text.length)(t)||t.backgroundColor&&0!==t.backgroundColor[3]||(Fo(t)&&(t.width=5,t.height=t.lineHeight),t.strokeWidth=1,t.strokeColor=[1,1,1,.5],t.backgroundColor=[0,0,0,.1]),t);let Ul,Vl=[],Zl=[],Gl=[],ql=[],Yl=[],Kl={};const Jl=(t,e,o,n,i,r)=>{const{annotationShapesDirty:a,decorationShapesDirty:l,frameShapesDirty:c,blendShapesDirty:d,selectionRect:u,scale:h}=t,p=Ul!==h,m=p||!Kt(Kl,u);m&&(Ul=h,Kl=u),(a||o!==Ce)&&(Vl=o.filter(Wo).map(Io).sort(((t,e)=>t.alwaysOnTop?1:e.alwaysOnTop?-1:0)).map((t=>Jo(t,be)))),(p||tc||a||o!==Ce)&&(Zl=Nl(Vl.map((t=>s(t,{flipX:ve,flipY:xe,rotation:we,scale:h,context:_t(be)}))).flat())),d&&(Gl=e.filter(Wo).map((t=>Jo(t,be)))),(l||n!==fe||m)&&(ql=Nl(n.filter(Wo).map(Io).sort(((t,e)=>t.alwaysOnTop?1:e.alwaysOnTop?-1:0)).map((t=>Wl(t,u,h))).map((t=>s(t,{context:u}))).flat().map((t=>jl(t,u,h))))),(c||r!==ge||m)&&(Yl=r?Nl([r].map(Io).map((t=>Wl(t,u,h))).map(s).flat().map((t=>jl(t,u,h)))):[]);const g=Nl(i.filter(Wo));return{blendShapesDirty:d,blendShapes:Gl,annotationShapesDirty:a,annotationShapes:Zl,decorationShapesDirty:l,decorationShapes:ql,frameShapesDirty:c,frameShapes:Yl,interfaceShapes:g}};let Ql=!0,tc=!0,ec=!0,oc=!0,nc=!0;return xi((()=>{Gr(),as(),rs(),ls(),hs(),ps(),ms(),qs(),Js(),ua.destroy(),ha.destroy(),er.destroy(),Qs.clear(),Vl.length=0,Zl.length=0,Gl.length=0,ql.length=0,Yl.length=0;try{o(201,Fs=void 0),o(240,gl=void 0)}catch(t){}})),t.$$set=t=>{"class"in t&&o(202,An=t.class),"layout"in t&&o(203,Tn=t.layout),"stores"in t&&o(204,In=t.stores),"locale"in t&&o(3,Fn=t.locale),"id"in t&&o(4,Bn=t.id),"util"in t&&o(205,On=t.util),"utils"in t&&o(206,Dn=t.utils),"animations"in t&&o(207,_n=t.animations),"disabled"in t&&o(208,Wn=t.disabled),"status"in t&&o(200,jn=t.status),"previewUpscale"in t&&o(209,Hn=t.previewUpscale),"previewPad"in t&&o(210,Un=t.previewPad),"previewMaskOpacity"in t&&o(5,Vn=t.previewMaskOpacity),"markupMaskOpacity"in t&&o(6,Zn=t.markupMaskOpacity),"elasticityMultiplier"in t&&o(7,Gn=t.elasticityMultiplier),"willRevert"in t&&o(211,qn=t.willRevert),"willProcessImage"in t&&o(212,Xn=t.willProcessImage),"willRenderCanvas"in t&&o(8,Yn=t.willRenderCanvas),"willRenderToolbar"in t&&o(213,Kn=t.willRenderToolbar),"willSetHistoryInitialState"in t&&o(214,Jn=t.willSetHistoryInitialState),"enableButtonExport"in t&&o(215,Qn=t.enableButtonExport),"enableButtonRevert"in t&&o(216,ti=t.enableButtonRevert),"enableNavigateHistory"in t&&o(217,ei=t.enableNavigateHistory),"enableToolbar"in t&&o(9,oi=t.enableToolbar),"enableUtils"in t&&o(218,ni=t.enableUtils),"enableButtonClose"in t&&o(219,ii=t.enableButtonClose),"enableDropImage"in t&&o(220,ri=t.enableDropImage),"enablePasteImage"in t&&o(221,ai=t.enablePasteImage),"enableBrowseImage"in t&&o(222,si=t.enableBrowseImage),"previewImageDataMaxSize"in t&&o(223,li=t.previewImageDataMaxSize),"previewImageTextPixelRatio"in t&&o(10,ci=t.previewImageTextPixelRatio),"layoutDirectionPreference"in t&&o(224,di=t.layoutDirectionPreference),"layoutHorizontalUtilsPreference"in t&&o(225,ui=t.layoutHorizontalUtilsPreference),"layoutVerticalUtilsPreference"in t&&o(226,hi=t.layoutVerticalUtilsPreference),"layoutVerticalToolbarPreference"in t&&o(227,pi=t.layoutVerticalToolbarPreference),"layoutVerticalControlGroupsPreference"in t&&o(228,mi=t.layoutVerticalControlGroupsPreference),"layoutVerticalControlTabsPreference"in t&&o(229,gi=t.layoutVerticalControlTabsPreference),"markupEditorZoomLevel"in t&&o(230,fi=t.markupEditorZoomLevel),"markupEditorZoomLevels"in t&&o(11,$i=t.markupEditorZoomLevels),"markupEditorZoomAdjustStep"in t&&o(12,yi=t.markupEditorZoomAdjustStep),"markupEditorZoomAdjustFactor"in t&&o(13,bi=t.markupEditorZoomAdjustFactor),"markupEditorZoomAdjustWheelFactor"in t&&o(14,Ci=t.markupEditorZoomAdjustWheelFactor),"markupEditorInteractionMode"in t&&o(231,Mi=t.markupEditorInteractionMode),"enablePan"in t&&o(15,ki=t.enablePan),"enableZoom"in t&&o(16,Pi=t.enableZoom),"enableZoomControls"in t&&o(232,Ri=t.enableZoomControls),"enableZoomInput"in t&&o(17,Ai=t.enableZoomInput),"enablePanInput"in t&&o(233,Ti=t.enablePanInput),"enableCanvasAlpha"in t&&o(18,Ii=t.enableCanvasAlpha),"enablePanLimit"in t&&o(19,Ei=t.enablePanLimit),"panLimitGutterScalar"in t&&o(20,Li=t.panLimitGutterScalar),"zoomPresetOptions"in t&&o(21,zi=t.zoomPresetOptions),"zoomAdjustStep"in t&&o(22,Fi=t.zoomAdjustStep),"zoomAdjustFactor"in t&&o(23,Bi=t.zoomAdjustFactor),"zoomAdjustWheelFactor"in t&&o(24,Oi=t.zoomAdjustWheelFactor),"zoomLevel"in t&&o(0,Di=t.zoomLevel),"imagePreviewSrc"in t&&o(234,_i=t.imagePreviewSrc),"imageOrienter"in t&&o(235,Wi=t.imageOrienter),"pluginComponents"in t&&o(236,ji=t.pluginComponents),"pluginOptions"in t&&o(25,Ni=t.pluginOptions),"root"in t&&o(2,Vi=t.root),"imageSourceToImageData"in t&&o(26,tr=t.imageSourceToImageData),"imagePreviewCurrent"in t&&o(201,Fs=t.imagePreviewCurrent)},t.$$.update=()=>{if(1&t.$$.dirty[0]|8192&t.$$.dirty[7]&&o(0,Di=null===Di?fi:Di),128&t.$$.dirty[0]&&Nn(Gi,an=Gn,an),131072&t.$$.dirty[6]&&o(299,n="overlay"===Tn),2&t.$$.dirty[7]|1048576&t.$$.dirty[9]&&o(42,i=ni&&!n),33554434&t.$$.dirty[0]&&Ni&&Object.entries(Ni).forEach((([t,e])=>{Object.entries(e).forEach((([e,n])=>{Ui[t]&&o(1,Ui[t][e]=n,Ui)}))})),2&t.$$.dirty[0]|524288&t.$$.dirty[7]){let t=!1;ji.forEach((([e])=>{Ui[e]||(o(1,Ui[e]={},Ui),t=!0)})),t&&o(238,qi=[...ji])}var e,u,h,w;if(4194304&t.$$.dirty[6]&&Xi.set(Wn?1:0),64&t.$$.dirty[7]&&(a=li?(e=li,u=Ki,kt(Math.min(e.width,u.width),Math.min(e.height,u.height))):Ki),128&t.$$.dirty[11]&&er.update(en[0]),64&t.$$.dirty[11]&&(s=Ko?(t,e)=>Ko(t,{flipX:void 0,flipY:void 0,rotation:void 0,...e,isPreview:!0}):O),32768&t.$$.dirty[7]&&Qr.set(Ri),81920&t.$$.dirty[7]&&ta.set("pan"===Mi||Ti),131072&t.$$.dirty[1]&&Fe&&sa.set(Ht(Fe.x,Fe.y,Fe.width,Fe.height)),537919488&t.$$.dirty[9]|4096&t.$$.dirty[10]&&ke&&n&&Ye&&Ye.complete&&(()=>{const t=qo,e=Jt(ke);t&&t===e||(ur.set(Jt(ke)),Gs())})(),8&t.$$.dirty[0]|1048576&t.$$.dirty[6]|2097152&t.$$.dirty[7]&&o(290,S=Fn&&qi.length?Dn||qi.map((([t])=>t)):[]),2048&t.$$.dirty[9]&&o(43,F=S.length>1),4096&t.$$.dirty[1]&&(F||la.set(Dt())),512&t.$$.dirty[0]&&(oi||ca.set(Dt())),1077936128&t.$$.dirty[9]&&o(302,c=!Pe&&l),32&t.$$.dirty[11]&&o(300,d=!Go),2097152&t.$$.dirty[6]|10485760&t.$$.dirty[9]&&Nn(fa,to="always"===_n?c:"never"!==_n&&c&&d,to),2097152&t.$$.dirty[6]|6291456&t.$$.dirty[9]&&Nn($a,We="always"===_n?l:"never"!==_n&&l&&d,We),8388608&t.$$.dirty[6]|1048576&t.$$.dirty[9]&&ya.set(Hn||n),16777216&t.$$.dirty[6]&&Ea.set(Un),4&t.$$.dirty[0]|16&t.$$.dirty[11]&&Vi&&(Vi.dispatchEvent(Ad("markupzoom",Zo)),Vi.dispatchEvent(Ad("zoom",Zo))),4&t.$$.dirty[0]|8&t.$$.dirty[11]&&Vi&&(Vi.dispatchEvent(Ad("markuppan",Ho)),Vi.dispatchEvent(Ad("pan",Ho))),2&t.$$.dirty[11]&&Ao&&Xa(),4&t.$$.dirty[11]&&To&&Ja(),2097152&t.$$.dirty[7]|2048&t.$$.dirty[9]|1048576&t.$$.dirty[10]&&o(291,P=qi.filter((([t])=>S.includes(t))).filter((([,{isSupported:t}])=>t({duration:so}))).map((([t,e])=>[t,e.Component]))),4096&t.$$.dirty[9]&&o(246,R=P.length),524288&t.$$.dirty[6]|536870912&t.$$.dirty[7]|4096&t.$$.dirty[9]&&o(41,T=On&&"string"==typeof On&&P.find((([t])=>t===On))?On:R>0?P[0][0]:void 0),525312&t.$$.dirty[1]&&T&&xs.set(.075,{hard:!We}),1073741824&t.$$.dirty[10]|1&t.$$.dirty[11]&&o(298,p=So?-Math.max(...Object.values(ko)):0),17301504&t.$$.dirty[1]|268959744&t.$$.dirty[9]&&Mo){let t=Mo.x-Me.x,e=Me.x+Me.width-(Mo.x+Mo.width),o=Mo.y-Me.y,n=Me.y+Me.height-(Mo.y+Mo.height),i=Math.min(t,o,e,n);Ms.set(i>p?0:Math.min(.85,Math.abs(i/64)),{hard:!We})}if(8388608&t.$$.dirty[1]&&o(297,g=.55/Co),524288&t.$$.dirty[1]|268697600&t.$$.dirty[9]&&Me&&ks.set({x:0,y:Me.y,width:Me.x<64?0:Me.x,height:Me.height+g},{hard:!We}),524288&t.$$.dirty[1]|805568512&t.$$.dirty[9]&&Me&&Ps.set({x:0,y:0,width:ke.width,height:Me.y+g},{hard:!We}),524288&t.$$.dirty[1]|805568512&t.$$.dirty[9]&&Me){let t=Me.x+Me.width,e=ke.width-(Me.x+Me.width);e<64&&(t+=e,e=0),Rs.set({x:t,y:Me.y,width:e,height:Me.height+g},{hard:!We})}if(524288&t.$$.dirty[1]|805306368&t.$$.dirty[9]&&Me&&As.set({x:0,y:Me.y+Me.height,width:ke.width,height:ke.height-(Me.y+Me.height)},{hard:!We}),4194304&t.$$.dirty[1]|603979776&t.$$.dirty[10]&&o(293,f=wo&&{id:$u,backgroundColor:bo,opacity:yo,...wo}),4194304&t.$$.dirty[1]|335544320&t.$$.dirty[10]&&o(296,$=vo&&{id:$u,backgroundColor:bo,opacity:yo,...vo}),4194304&t.$$.dirty[1]|201326592&t.$$.dirty[10]&&o(295,y=xo&&{id:$u,backgroundColor:bo,opacity:yo,...xo}),4194304&t.$$.dirty[1]|100663296&t.$$.dirty[10]&&o(294,b=$o&&{id:$u,backgroundColor:bo,opacity:yo,...$o}),245760&t.$$.dirty[9]&&o(292,x=[$,y,b,f].filter(Boolean)),8192&t.$$.dirty[9]|16777216&t.$$.dirty[10]&&x&&fo){const t=fo.filter((t=>t.id!==$u));ws.set([...t,...x])}if(131072&t.$$.dirty[7]|8388608&t.$$.dirty[10]&&Es.set(_i||mo||void 0),4&t.$$.dirty[0]|32768&t.$$.dirty[6]|1&t.$$.dirty[10]&&(o(201,Fs=Te),Te&&Vi.dispatchEvent(Ad("loadpreview",Fs))),8192&t.$$.dirty[10]&&Ke&&(Va.set(Q()),ja.set(void 0),Xa(),Os.set([])),4194304&t.$$.dirty[10]&&o(251,C=uo.index>0),4194304&t.$$.dirty[10]&&o(250,M=uo.index<uo.length-1),2&t.$$.dirty[1]&&il.set(ol),2097152&t.$$.dirty[10]&&rl.set(co),8&t.$$.dirty[0]|6144&t.$$.dirty[9]&&o(44,A=S.map((t=>{const e=P.find((([e])=>t===e));if(e)return{id:t,view:e[1],tabIcon:Fn[`${t}Icon`],tabLabel:Fn[`${t}Label`]}})).filter(Boolean)||[]),1024&t.$$.dirty[1]&&qr.set(T),8224&t.$$.dirty[1]&&o(36,I=A.reduce(((t,e)=>(t[e.id]=I&&I[e.id]||0,t)),{})),1024&t.$$.dirty[1]&&o(74,E={name:ll,selected:T}),8192&t.$$.dirty[1]&&o(73,L=A.map((t=>({id:t.id,icon:t.tabIcon,label:t.tabLabel})))),8192&t.$$.dirty[1]&&o(72,z=A.map((t=>t.id))),65536&t.$$.dirty[6]&&o(71,B=Ts(["PinturaRoot","PinturaRootComponent",An])),536870912&t.$$.dirty[9]&&o(286,D=ke&&(ke.width>1e3?"wide":ke.width<600?"narrow":void 0)),536870912&t.$$.dirty[9]&&o(273,_=ke&&(ke.width<=320||ke.height<=460)),536870912&t.$$.dirty[9]&&o(285,W=ke&&(ke.height>1e3?"tall":ke.height<600?"short":void 0)),4&t.$$.dirty[0]&&o(253,j=Vi&&Vi.parentNode&&Vi.parentNode.classList.contains("PinturaModal")),536870912&t.$$.dirty[0]|32&t.$$.dirty[8]|536870912&t.$$.dirty[9]&&o(278,N=j&&ke&&Ws>ke.width),1073741824&t.$$.dirty[0]|32&t.$$.dirty[8]|536870912&t.$$.dirty[9]&&o(277,H=j&&ke&&js>ke.height),1610612736&t.$$.dirty[8]&&o(279,U=N&&H),262144&t.$$.dirty[0]&&o(276,V=Ii),128&t.$$.dirty[9]&&o(248,Z="narrow"===D),128&t.$$.dirty[7]|536870912&t.$$.dirty[9]&&o(287,(h=ke,w=di,G=ke?"auto"===w?h.width>h.height?"landscape":"portrait":"horizontal"===w?h.width<500?"portrait":"landscape":"vertical"===w?h.height<400?"landscape":"portrait":void 0:"landscape")),256&t.$$.dirty[9]&&o(70,q="landscape"===G),1&t.$$.dirty[8]|64&t.$$.dirty[9]&&o(275,X=Z||"short"===W),536870912&t.$$.dirty[0]|536870912&t.$$.dirty[9]&&o(274,Y=dl&&ke&&Ws===ke.width&&!Ns),1&t.$$.dirty[1]|524288&t.$$.dirty[10]&&o(249,J=[...ao||[],...nl].filter(Boolean)),256&t.$$.dirty[7]&&o(284,ot=`has-navigation-preference-${ui}`),512&t.$$.dirty[7]&&o(283,rt=`has-navigation-preference-${hi}`),1024&t.$$.dirty[7]&&o(280,at=`has-toolbar-preference-${pi}`),2048&t.$$.dirty[7]&&o(282,st=`has-controlgroups-preference-${mi}`),4096&t.$$.dirty[7]&&o(281,lt=`has-controltabs-preference-${gi}`),536870912&t.$$.dirty[9]&&o(289,ht=void 0!==ke&&ke.width>0&&ke.height>0),4&t.$$.dirty[0]|1024&t.$$.dirty[9]&&o(288,pt=ht&&Vi&&getComputedStyle(Vi)),512&t.$$.dirty[9]&&pt&&hl(),512&t.$$.dirty[0]|530432&t.$$.dirty[1]|4325376&t.$$.dirty[6]|2113929248&t.$$.dirty[8]|511&t.$$.dirty[9]|393232&t.$$.dirty[10]&&Hs.set({...Be,layoutMode:Tn,orientation:G,horizontalSpace:D,verticalSpace:W,navigationHorizontalPreference:ot,navigationVerticalPreference:rt,controlGroupsVerticalPreference:st,controlTabsVerticalpreference:lt,toolbarVerticalPreference:at,isModal:j,isDisabled:Wn,isCentered:U,isCenteredHorizontally:N,isCenteredVertically:H,isAnimated:We,isTransparent:V,pointerAccuracy:io,pointerHoverable:no,isCompact:X,hasSwipeNavigation:Y,hasLimitedSpace:_,hasToolbar:oi,hasNavigation:F&&i,isIOS:dl}),16&t.$$.dirty[10]&&o(69,mt=Object.entries(Be).map((([t,e])=>/^is|has/.test(t)?e?Id(t):void 0:e)).filter(Boolean).join(" ")),1024&t.$$.dirty[1]&&T&&el.set([]),98304&t.$$.dirty[10]&&o(68,gt=oo&&Object.entries(eo).filter((([,t])=>null!=t)).reduce(((t,[,e])=>({...t,...e})),{})),4096&t.$$.dirty[10]&&o(270,bt=Ye&&"any-to-file"===Ye.task),4194304&t.$$.dirty[8]&&bt&&Qs&&Qs.clear(),16384&t.$$.dirty[10]&&o(272,ft=!!Qe&&!!Qe.translation),8388608&t.$$.dirty[7]|16777216&t.$$.dirty[8]|1&t.$$.dirty[10]&&ft&&Te&&Te!==gl&&(o(240,gl=Te),(()=>{const t=Qs.length?void 0:{resize:1.05},e=((t,e,o={})=>{const{resize:n=1,opacity:i=0}=o,r={opacity:[cs(i,{..._d,stiffness:.1}),O],resize:[cs(n,{..._d,stiffness:.1}),O],translation:[cs(void 0,_d),O],rotation:[cs(void 0,Wd),O],origin:[cs(void 0,_d),O],scale:[cs(void 0,Wd),O],gamma:[cs(void 0,Wd),t=>t||1],vignette:[cs(void 0,Wd),t=>t||0],colorMatrix:[cs([...Dd],_d),t=>t||[...Dd]],convolutionMatrix:[cr(void 0),t=>t&&t.clarity||void 0],backgroundColor:[cs(void 0,_d),O],backgroundImage:[cr(void 0),O]},a=Object.entries(r).map((([t,e])=>[t,e[0]])),s=a.map((([,t])=>t)),l=Object.entries(r).reduce(((t,[e,o])=>{const[n,i]=o;return t[e]=(t,e)=>n.set(i(t),e),t}),{});let c;const d=dr(s,(o=>(c=o.reduce(((t,e,o)=>(t[a[o][0]]=e,t)),{}),c.data=t,c.size=e,c.scale*=o[1],c)));return d.get=()=>c,d.set=(t,e)=>{const o={hard:!e};Object.entries(t).forEach((([t,e])=>{l[t]&&l[t](e,o)}))},d})(Te,be,t);Qs.unshift(e),ml(Qe)})()),16777216&t.$$.dirty[8]|16384&t.$$.dirty[10]&&ft&&ml(Qe),2097152&t.$$.dirty[1]&&Je&&Je.length>1){let t=[];Qs.forEach(((e,o)=>{0!==o&&e.get().opacity<=0&&t.push(e)})),t.forEach((t=>Qs.remove(t)))}if(8&t.$$.dirty[0]|8388608&t.$$.dirty[8]&&o(38,yt=Fn&&$t.length&&Fn.labelSupportError($t)),4096&t.$$.dirty[10]&&o(262,xt=Ye&&!!Ye.error),4096&t.$$.dirty[10]&&o(40,vt=!Ye||!Ye.complete&&void 0===Ye.task),4096&t.$$.dirty[10]&&o(263,wt=Ye&&(Ye.taskLengthComputable?Ye.taskProgress:1/0)),4194304&t.$$.dirty[8]&&bt&&Nn(Is,qe=!1,qe),524288&t.$$.dirty[1]|16777216&t.$$.dirty[7]|4096&t.$$.dirty[10]&&Ye&&Ye.complete){const t=We?250:0;clearTimeout($l),o(241,$l=setTimeout((()=>{Nn(Is,qe=!0,qe)}),t))}if(512&t.$$.dirty[1]|16384&t.$$.dirty[8]|5120&t.$$.dirty[10]&&o(267,Ct=Ye&&!xt&&!vt&&!qe),4194304&t.$$.dirty[7]|8193&t.$$.dirty[10]&&o(266,Mt=!(!Ke||Te&&!Ls)),2080&t.$$.dirty[10]&&o(261,St=_e||Xe&&void 0!==Xe.progress&&!Xe.complete),512&t.$$.dirty[1]|4096&t.$$.dirty[10]&&o(264,Pt=Ye&&!(Ye.error||vt)),8&t.$$.dirty[0]|4096&t.$$.dirty[10]&&o(265,Rt=Fn&&(Ye?!Ye.complete||Ye.error?Ma(Fn.statusLabelLoadImage(Ye),Ye.error&&Ye.error.metadata,"{","}"):Fn.statusLabelLoadImage({progress:1/0,task:"blob-to-bitmap"}):Fn.statusLabelLoadImage(Ye))),8&t.$$.dirty[0]|2048&t.$$.dirty[10]&&o(260,At=Xe&&Fn&&Fn.statusLabelProcessImage(Xe)),2048&t.$$.dirty[10]&&o(258,Tt=Xe&&(Xe.taskLengthComputable?Xe.taskProgress:1/0)),2048&t.$$.dirty[10]&&o(259,It=Xe&&!Xe.error),2048&t.$$.dirty[10]&&o(257,Et=Xe&&Xe.error),8&t.$$.dirty[0]|512&t.$$.dirty[1]|16384&t.$$.dirty[6]|1048064&t.$$.dirty[8])if(jn){let t,e,n,i,r;v(jn)&&(t=jn),ro(jn)?e=jn:Array.isArray(jn)&&([t,e,r]=jn,!1===e&&(i=!0),ro(e)&&(n=!0)),o(33,bl=(t||e)&&{text:t,aside:i||n,progressIndicator:{visible:n,progress:e},closeButton:i&&{label:Fn.statusLabelButtonClose,icon:Fn.statusIconButtonClose,onclick:r||(()=>o(200,jn=void 0))}})}else o(33,bl=Fn&&vt||xt||Ct||Mt?{text:Rt,aside:xt||Pt,progressIndicator:{visible:Pt,progress:wt},closeButton:xt&&{label:Fn.statusLabelButtonClose,icon:Fn.statusIconButtonClose,onclick:Pl}}:Fn&&St&&At?{text:At,aside:Et||It,progressIndicator:{visible:It,progress:Tt},closeButton:Et&&{label:Fn.statusLabelButtonClose,icon:Fn.statusIconButtonClose,onclick:Rl}}:void 0);if(16384&t.$$.dirty[6]&&o(269,Lt=void 0!==jn),524288&t.$$.dirty[1]|32&t.$$.dirty[8]|2048&t.$$.dirty[10]&&j&&Xe&&Xe.complete&&(yl.set(!0),setTimeout((()=>yl.set(!1)),We?100:0)),4&t.$$.dirty[0]|1024&t.$$.dirty[1]|1024&t.$$.dirty[10]&&qe&&Vi&&Vi.dispatchEvent(Ad("selectutil",T)),640&t.$$.dirty[1]|2908160&t.$$.dirty[8]|512&t.$$.dirty[10]&&o(268,zt=Ge||yt||vt||xt||Ct||Mt||St||Lt),1048576&t.$$.dirty[8]&&Nn(fl,Ze=zt?1:0,Ze),524288&t.$$.dirty[1]|1048576&t.$$.dirty[8]&&fl.set(zt?1:0,{duration:We?500:1}),1048576&t.$$.dirty[1]&&o(39,Ft=Ze>0),4&t.$$.dirty[1]&&o(256,Bt=!(!bl||!bl.aside)),524548&t.$$.dirty[1]|33554432&t.$$.dirty[7]|256&t.$$.dirty[8]|256&t.$$.dirty[10]&&Ft&&bl){clearTimeout(Sl);const t={hard:!1===We};if(Bt){const e=!!bl.error||!We;vl.set(1,t),xl.set(Ve,{hard:e}),o(242,Sl=setTimeout((()=>{wl.set(16,t)}),1))}else vl.set(0,t),o(242,Sl=setTimeout((()=>{wl.set(0,t)}),1))}if(256&t.$$.dirty[1]&&(Ft||(Ml.set(void 0,{hard:!0}),xl.set(void 0,{hard:!0}),wl.set(0,{hard:!0}))),128&t.$$.dirty[10]&&o(255,Wt=.5*He),128&t.$$.dirty[8]|64&t.$$.dirty[10]&&o(67,Nt=`transform: translateX(${je-Wt}px)`),128&t.$$.dirty[1]|1&t.$$.dirty[10]&&o(37,pe=Te&&!yt),64&t.$$.dirty[1]|96&t.$$.dirty[8]&&o(252,qt=Gt&&(pe||j)?Al:r),16&t.$$.dirty[8]&&o(66,Qt=qt),16&t.$$.dirty[8]&&o(65,te=qt),8&t.$$.dirty[0]|262144&t.$$.dirty[1]|1744830464&t.$$.dirty[6]|5&t.$$.dirty[7]|15&t.$$.dirty[8]|16&t.$$.dirty[10]&&o(64,ne=Fn&&Oe&&(t=>{try{return t()}catch(t){console.error(t)}})((()=>Kn([["div","alpha",{class:"PinturaNavGroup"},[["div","alpha-set",{class:"PinturaNavSet"},[ii&&["Button","close",{label:Fn.labelClose,icon:Fn.iconButtonClose,onclick:()=>Rn("close"),hideLabel:!0}],ti&&["Button","revert",{label:Fn.labelButtonRevert,icon:Fn.iconButtonRevert,disabled:!C,onclick:Xs,hideLabel:!0}]]]]],["div","beta",{class:"PinturaNavGroup PinturaNavGroupFloat"},[ei&&["div","history",{class:"PinturaNavSet"},[["Button","undo",{label:Fn.labelButtonUndo,icon:Fn.iconButtonUndo,disabled:!C,onclick:Zs.undo,hideLabel:!0}],["Button","redo",{label:Fn.labelButtonRedo,icon:Fn.iconButtonRedo,disabled:!M,onclick:Zs.redo,hideLabel:!0}]]],J.length&&["div","plugin-tools",{class:"PinturaNavSet"},J.filter(Boolean).map((([t,e,o])=>[t,e,{...o}]))]]],["div","gamma",{class:"PinturaNavGroup"},[["Button","select",{label:"Select Image",icon:Z&&Fn.iconButtonSelectImage,class:"PinturaButtonExport",onclick:zl,hideLabel:Z}],Qn&&["Button","export",{label:"Download",icon:Z&&Fn.iconButtonExport,class:"PinturaButtonExport",onclick:Ks,hideLabel:Z}]]]],{...Be},(()=>Zi.set({})))))),131072&t.$$.dirty[1]&&o(247,ie=Fe&&Fe.width>0&&Fe.height>0),8&t.$$.dirty[0]|1610612736&t.$$.dirty[7]&&o(63,se=ie&&Fn&&R),2&t.$$.dirty[10]&&o(245,ce=Ie&&!!Ie.length),268435456&t.$$.dirty[7]|16777216&t.$$.dirty[9]|2&t.$$.dirty[10]&&o(244,ue=ce&&Cn(be,Ie)),402653184&t.$$.dirty[7]|13&t.$$.dirty[10]&&ce&&((t,e,n,i)=>{if(!e)return;const r={dataSizeScalar:n};i&&i[3]>0&&(r.backgroundColor=[...i]),e(t,r).then((t=>{Fl&&m(Fl),o(243,Fl=t)}))})(Te,Le,ue,Ee),67108864&t.$$.dirty[7]|16777216&t.$$.dirty[9]|2&t.$$.dirty[10]&&Ie&&Fl&&be){const{width:t,height:e}=be;o(34,Ol=Ie.map((o=>{const n=Ht(o.x,o.y,o.width,o.height),i=ee(Ot(n),o.rotation).map((o=>tt(o.x/t,o.y/e)));return{...o,id:"redaction",flipX:!1,flipY:!1,cornerRadius:0,strokeWidth:0,strokeColor:void 0,backgroundColor:[0,0,0],backgroundImage:Fl,backgroundImageRendering:"pixelated",backgroundCorners:i}})))}16&t.$$.dirty[1]&&Bl&&Dl.set(Bl),4&t.$$.dirty[0]|64&t.$$.dirty[1]&&pe&&Vi.dispatchEvent(Ad("ready")),65536&t.$$.dirty[1]&&o(57,Ql=!0),251658240&t.$$.dirty[9]&&o(58,tc=!0),32768&t.$$.dirty[1]&&o(59,ec=!0),16384&t.$$.dirty[1]&&o(60,oc=!0),8&t.$$.dirty[1]&&o(61,nc=!0)},o(301,l=!Ss()),w=1===Xl()?t=>{t&&(ct(t.origin,Math.round),ct(t.translation,Math.round))}:O,o(271,$t=[!Od()&&"WebGL"].filter(Boolean)),o(254,Gt=Ue()||(null===Nd&&(Nd=Ne(/Android/)),Nd&&qa())),o(62,he=((t,e=!0)=>o=>{"ping"===o.type&&(e&&o.stopPropagation(),t(o.detail.type,o.detail.data))})(Pn.pub)),[Di,Ui,Vi,Fn,Bn,Vn,Zn,Gn,Yn,oi,ci,$i,yi,bi,Ci,ki,Pi,Ai,Ii,Ei,Li,zi,Fi,Bi,Oi,Ni,tr,zs,Zs,Ws,js,nl,ol,bl,Ol,Bl,I,pe,yt,Ft,vt,T,i,F,A,ge,fe,Ce,Fe,Oe,We,Ze,Je,bo,Co,Mo,cl,Ql,tc,ec,oc,nc,he,se,ne,te,Qt,Nt,gt,mt,q,B,z,L,E,po,rn,sn,ln,cn,dn,un,hn,pn,mn,gn,fn,$n,yn,bn,xn,vn,Zi,Gi,Xi,or,nr,ir,rr,ar,sr,ur,hr,pr,br,wr,Cr,Mr,Lr,zr,Fr,Br,Or,_r,Wr,jr,Hr,Ur,Xr,Yr,Kr,Jr,Qr,ta,ea,oa,na,ia,aa,sa,la,ca,da,ua,ha,ma,ga,fa,$a,ya,ba,xa,va,Ca,ka,Sa,Pa,La,za,Ba,Da,_a,ja,Ha,Ua,Va,Ya,Ka,Qa,fs,ws,Cs,Ms,ks,Ps,Rs,As,Is,Es,Bs,Os,Ds,Hs,Vs,Ys,Qs,el,sl,({target:t,propertyName:e})=>{t===Vi&&/background|outline/.test(e)&&pt&&hl()},pl,fl,yl,xl,vl,wl,Cl,Ml,t=>{const e=!(!bl||!bl.closeButton)||!We;Cl.set(t.detail.width,{hard:e}),Ml.set(Math.round(.5*-t.detail.width),{hard:e})},Tl,Il,t=>{const{keyCode:e,metaKey:o,ctrlKey:n,shiftKey:i}=t;if(9===e&&Wn)return void t.preventDefault();if(t.target&&32===e&&Vi.contains(t.target)&&!Td(t.target)&&t.preventDefault(),90===e&&(o||n))return void(i&&o?Zs.redo():Zs.undo());if(89===e&&n)return void Zs.redo();if(229===e)return;if(o||n)return;const r=new Set([...ze,e]);Il.set(Array.from(r))},({key:t,keyCode:e})=>{if("Meta"===t)return Il.set([]);Il.set(ze.filter((t=>t!==e)))},()=>{Il.set([])},t=>{Td(t.target)||t.preventDefault()},t=>{ri&&El(t.detail.resources[0])},zl,t=>{if(!ai)return;const e=Pr((window.innerWidth-Math.abs(ke.x))/ke.width,0,1),o=Pr((window.innerHeight-Math.abs(ke.y))/ke.height,0,1);e<.75&&o<.75||El((t.clipboardData||window.clipboardData).files[0])},_l,Jl,t=>{me&&Kt(t.detail,me)||Nn(da,me=t.detail,me)},jn,Fs,An,Tn,In,On,Dn,_n,Wn,Hn,Un,qn,Xn,Kn,Jn,Qn,ti,ei,ni,ii,ri,ai,si,li,di,ui,hi,pi,mi,gi,fi,Mi,Ri,Ti,_i,Wi,ji,Hi,qi,Ls,gl,$l,Sl,Fl,ue,ce,R,ie,Z,J,M,C,qt,j,Gt,Wt,Bt,Et,Tt,It,At,St,xt,wt,Pt,Rt,Mt,Ct,zt,Lt,bt,$t,ft,_,Y,X,V,H,N,U,at,lt,st,rt,ot,W,D,G,pt,ht,S,P,x,f,b,y,$,g,p,n,d,l,c,be,xe,ve,we,Me,ke,Pe,Te,Ie,Ee,Le,Be,_e,je,He,Ve,Ge,qe,Xe,Ye,Ke,Qe,eo,oo,no,io,ao,so,co,uo,mo,fo,$o,yo,xo,vo,wo,ko,So,Ao,To,Ho,Zo,Go,Ko,en,function(){o(29,Ws=qd.innerWidth),o(30,js=qd.innerHeight)},t=>Nn(ca,cn=t.detail,cn),({detail:t})=>o(41,T=t),(t,e)=>e.id===t,function(e,n){t.$$.not_equal(Ui[n],e)&&(Ui[n]=e,o(1,Ui),o(25,Ni),o(236,ji))},t=>o(56,cl=cl.concat(t)),t=>o(56,cl=cl.filter((e=>e!==t))),(t,{detail:e})=>o(36,I[t]=e,I),t=>Nn(la,po=t.detail,po),t=>t.id===T,function(e){t.$$.not_equal(Ui[T],e)&&(Ui[T]=e,o(1,Ui),o(25,Ni),o(236,ji))},()=>o(56,cl=cl.concat(T)),()=>o(56,cl=cl.filter((t=>t!==T))),({detail:t})=>o(36,I[T]=t,I),t=>{const e={...t,..._l()},{annotationShapes:o,decorationShapes:n,interfaceShapes:i,frameShapes:r}=Yn({annotationShapes:Ce,decorationShapes:fe,interfaceShapes:pn,frameShapes:ge},e);return Jl(e,Ol,o,n,i,r)},()=>{o(57,Ql=!1),o(58,tc=!1),o(59,ec=!1),o(60,oc=!1),o(61,nc=!1)},function(t){Si[t?"unshift":"push"]((()=>{Bl=t,o(35,Bl)}))},function(t){Di=t,o(0,Di),o(230,fi)},function(t){nl=t,o(31,nl)},function(t){ol=t,o(32,ol)},function(t){Si[t?"unshift":"push"]((()=>{Vi=t,o(2,Vi)}))},t=>Nn(aa,Fe=t.detail,Fe)]}class xu extends ar{constructor(t){super(),rr(this,t,bu,gu,In,{class:202,layout:203,stores:204,locale:3,id:4,util:205,utils:206,animations:207,disabled:208,status:200,previewUpscale:209,previewPad:210,previewMaskOpacity:5,markupMaskOpacity:6,elasticityMultiplier:7,willRevert:211,willProcessImage:212,willRenderCanvas:8,willRenderToolbar:213,willSetHistoryInitialState:214,enableButtonExport:215,enableButtonRevert:216,enableNavigateHistory:217,enableToolbar:9,enableUtils:218,enableButtonClose:219,enableDropImage:220,enablePasteImage:221,enableBrowseImage:222,previewImageDataMaxSize:223,previewImageTextPixelRatio:10,layoutDirectionPreference:224,layoutHorizontalUtilsPreference:225,layoutVerticalUtilsPreference:226,layoutVerticalToolbarPreference:227,layoutVerticalControlGroupsPreference:228,layoutVerticalControlTabsPreference:229,markupEditorZoomLevel:230,markupEditorZoomLevels:11,markupEditorZoomAdjustStep:12,markupEditorZoomAdjustFactor:13,markupEditorZoomAdjustWheelFactor:14,markupEditorInteractionMode:231,enablePan:15,enableZoom:16,enableZoomControls:232,enableZoomInput:17,enablePanInput:233,enableCanvasAlpha:18,enablePanLimit:19,panLimitGutterScalar:20,zoomPresetOptions:21,zoomAdjustStep:22,zoomAdjustFactor:23,zoomAdjustWheelFactor:24,zoomLevel:0,imagePreviewSrc:234,imageOrienter:235,pluginComponents:236,pluginOptions:25,sub:237,pluginInterface:1,root:2,imageSourceToImageData:26,imagePreview:27,imagePreviewCurrent:201,history:28},null,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}get class(){return this.$$.ctx[202]}set class(t){this.$$set({class:t}),Di()}get layout(){return this.$$.ctx[203]}set layout(t){this.$$set({layout:t}),Di()}get stores(){return this.$$.ctx[204]}set stores(t){this.$$set({stores:t}),Di()}get locale(){return this.$$.ctx[3]}set locale(t){this.$$set({locale:t}),Di()}get id(){return this.$$.ctx[4]}set id(t){this.$$set({id:t}),Di()}get util(){return this.$$.ctx[205]}set util(t){this.$$set({util:t}),Di()}get utils(){return this.$$.ctx[206]}set utils(t){this.$$set({utils:t}),Di()}get animations(){return this.$$.ctx[207]}set animations(t){this.$$set({animations:t}),Di()}get disabled(){return this.$$.ctx[208]}set disabled(t){this.$$set({disabled:t}),Di()}get status(){return this.$$.ctx[200]}set status(t){this.$$set({status:t}),Di()}get previewUpscale(){return this.$$.ctx[209]}set previewUpscale(t){this.$$set({previewUpscale:t}),Di()}get previewPad(){return this.$$.ctx[210]}set previewPad(t){this.$$set({previewPad:t}),Di()}get previewMaskOpacity(){return this.$$.ctx[5]}set previewMaskOpacity(t){this.$$set({previewMaskOpacity:t}),Di()}get markupMaskOpacity(){return this.$$.ctx[6]}set markupMaskOpacity(t){this.$$set({markupMaskOpacity:t}),Di()}get elasticityMultiplier(){return this.$$.ctx[7]}set elasticityMultiplier(t){this.$$set({elasticityMultiplier:t}),Di()}get willRevert(){return this.$$.ctx[211]}set willRevert(t){this.$$set({willRevert:t}),Di()}get willProcessImage(){return this.$$.ctx[212]}set willProcessImage(t){this.$$set({willProcessImage:t}),Di()}get willRenderCanvas(){return this.$$.ctx[8]}set willRenderCanvas(t){this.$$set({willRenderCanvas:t}),Di()}get willRenderToolbar(){return this.$$.ctx[213]}set willRenderToolbar(t){this.$$set({willRenderToolbar:t}),Di()}get willSetHistoryInitialState(){return this.$$.ctx[214]}set willSetHistoryInitialState(t){this.$$set({willSetHistoryInitialState:t}),Di()}get enableButtonExport(){return this.$$.ctx[215]}set enableButtonExport(t){this.$$set({enableButtonExport:t}),Di()}get enableButtonRevert(){return this.$$.ctx[216]}set enableButtonRevert(t){this.$$set({enableButtonRevert:t}),Di()}get enableNavigateHistory(){return this.$$.ctx[217]}set enableNavigateHistory(t){this.$$set({enableNavigateHistory:t}),Di()}get enableToolbar(){return this.$$.ctx[9]}set enableToolbar(t){this.$$set({enableToolbar:t}),Di()}get enableUtils(){return this.$$.ctx[218]}set enableUtils(t){this.$$set({enableUtils:t}),Di()}get enableButtonClose(){return this.$$.ctx[219]}set enableButtonClose(t){this.$$set({enableButtonClose:t}),Di()}get enableDropImage(){return this.$$.ctx[220]}set enableDropImage(t){this.$$set({enableDropImage:t}),Di()}get enablePasteImage(){return this.$$.ctx[221]}set enablePasteImage(t){this.$$set({enablePasteImage:t}),Di()}get enableBrowseImage(){return this.$$.ctx[222]}set enableBrowseImage(t){this.$$set({enableBrowseImage:t}),Di()}get previewImageDataMaxSize(){return this.$$.ctx[223]}set previewImageDataMaxSize(t){this.$$set({previewImageDataMaxSize:t}),Di()}get previewImageTextPixelRatio(){return this.$$.ctx[10]}set previewImageTextPixelRatio(t){this.$$set({previewImageTextPixelRatio:t}),Di()}get layoutDirectionPreference(){return this.$$.ctx[224]}set layoutDirectionPreference(t){this.$$set({layoutDirectionPreference:t}),Di()}get layoutHorizontalUtilsPreference(){return this.$$.ctx[225]}set layoutHorizontalUtilsPreference(t){this.$$set({layoutHorizontalUtilsPreference:t}),Di()}get layoutVerticalUtilsPreference(){return this.$$.ctx[226]}set layoutVerticalUtilsPreference(t){this.$$set({layoutVerticalUtilsPreference:t}),Di()}get layoutVerticalToolbarPreference(){return this.$$.ctx[227]}set layoutVerticalToolbarPreference(t){this.$$set({layoutVerticalToolbarPreference:t}),Di()}get layoutVerticalControlGroupsPreference(){return this.$$.ctx[228]}set layoutVerticalControlGroupsPreference(t){this.$$set({layoutVerticalControlGroupsPreference:t}),Di()}get layoutVerticalControlTabsPreference(){return this.$$.ctx[229]}set layoutVerticalControlTabsPreference(t){this.$$set({layoutVerticalControlTabsPreference:t}),Di()}get markupEditorZoomLevel(){return this.$$.ctx[230]}set markupEditorZoomLevel(t){this.$$set({markupEditorZoomLevel:t}),Di()}get markupEditorZoomLevels(){return this.$$.ctx[11]}set markupEditorZoomLevels(t){this.$$set({markupEditorZoomLevels:t}),Di()}get markupEditorZoomAdjustStep(){return this.$$.ctx[12]}set markupEditorZoomAdjustStep(t){this.$$set({markupEditorZoomAdjustStep:t}),Di()}get markupEditorZoomAdjustFactor(){return this.$$.ctx[13]}set markupEditorZoomAdjustFactor(t){this.$$set({markupEditorZoomAdjustFactor:t}),Di()}get markupEditorZoomAdjustWheelFactor(){return this.$$.ctx[14]}set markupEditorZoomAdjustWheelFactor(t){this.$$set({markupEditorZoomAdjustWheelFactor:t}),Di()}get markupEditorInteractionMode(){return this.$$.ctx[231]}set markupEditorInteractionMode(t){this.$$set({markupEditorInteractionMode:t}),Di()}get enablePan(){return this.$$.ctx[15]}set enablePan(t){this.$$set({enablePan:t}),Di()}get enableZoom(){return this.$$.ctx[16]}set enableZoom(t){this.$$set({enableZoom:t}),Di()}get enableZoomControls(){return this.$$.ctx[232]}set enableZoomControls(t){this.$$set({enableZoomControls:t}),Di()}get enableZoomInput(){return this.$$.ctx[17]}set enableZoomInput(t){this.$$set({enableZoomInput:t}),Di()}get enablePanInput(){return this.$$.ctx[233]}set enablePanInput(t){this.$$set({enablePanInput:t}),Di()}get enableCanvasAlpha(){return this.$$.ctx[18]}set enableCanvasAlpha(t){this.$$set({enableCanvasAlpha:t}),Di()}get enablePanLimit(){return this.$$.ctx[19]}set enablePanLimit(t){this.$$set({enablePanLimit:t}),Di()}get panLimitGutterScalar(){return this.$$.ctx[20]}set panLimitGutterScalar(t){this.$$set({panLimitGutterScalar:t}),Di()}get zoomPresetOptions(){return this.$$.ctx[21]}set zoomPresetOptions(t){this.$$set({zoomPresetOptions:t}),Di()}get zoomAdjustStep(){return this.$$.ctx[22]}set zoomAdjustStep(t){this.$$set({zoomAdjustStep:t}),Di()}get zoomAdjustFactor(){return this.$$.ctx[23]}set zoomAdjustFactor(t){this.$$set({zoomAdjustFactor:t}),Di()}get zoomAdjustWheelFactor(){return this.$$.ctx[24]}set zoomAdjustWheelFactor(t){this.$$set({zoomAdjustWheelFactor:t}),Di()}get zoomLevel(){return this.$$.ctx[0]}set zoomLevel(t){this.$$set({zoomLevel:t}),Di()}get imagePreviewSrc(){return this.$$.ctx[234]}set imagePreviewSrc(t){this.$$set({imagePreviewSrc:t}),Di()}get imageOrienter(){return this.$$.ctx[235]}set imageOrienter(t){this.$$set({imageOrienter:t}),Di()}get pluginComponents(){return this.$$.ctx[236]}set pluginComponents(t){this.$$set({pluginComponents:t}),Di()}get pluginOptions(){return this.$$.ctx[25]}set pluginOptions(t){this.$$set({pluginOptions:t}),Di()}get sub(){return this.$$.ctx[237]}get pluginInterface(){return this.$$.ctx[1]}get root(){return this.$$.ctx[2]}set root(t){this.$$set({root:t}),Di()}get imageSourceToImageData(){return this.$$.ctx[26]}set imageSourceToImageData(t){this.$$set({imageSourceToImageData:t}),Di()}get imagePreview(){return this.$$.ctx[27]}get imagePreviewCurrent(){return this.$$.ctx[201]}set imagePreviewCurrent(t){this.$$set({imagePreviewCurrent:t}),Di()}get history(){return this.$$.ctx[28]}}const vu=["klass","stores","isVisible","isActive","isActiveFraction","locale"],wu=["history","klass","stores","navButtons","pluginComponents","pluginInterface","pluginOptions","sub","imagePreviewSrc","imagePreview","imagePreviewCurrent"],Cu=["locale"];let Mu;const ku=new Set([]),Su={},Pu=new Map;var Ru=[...Br,"init","undo","redo","update","revert","destroy","show","hide","close","ready","zoom","pan","loadpreview","selectshape","updateshape","addshape","removeshape","selectstyle","markuptap","markupzoom","markuppan","selectutil","selectcontrol"],Au={finetuneControlConfiguration:{gamma:{base:1,min:.15,max:4,getLabel:t=>Hd(t<1?(t-.15)/.85-1:(t-1)/3),getStore:({imageGamma:t})=>t},brightness:{base:0,min:-.25,max:.25,getLabel:t=>Hd(t/.25),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.brightness)return t.brightness[4]},setValue:(t,e)=>t.update((t=>({...t,brightness:[1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0]})))},contrast:{base:1,min:.5,max:1.5,getLabel:t=>Hd(2*(t-.5)-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.contrast)return t.contrast[0]},setValue:(t,e)=>t.update((t=>({...t,contrast:[e,0,0,0,.5*(1-e),0,e,0,0,.5*(1-e),0,0,e,0,.5*(1-e),0,0,0,1,0]})))},saturation:{base:1,min:0,max:2,getLabel:t=>Hd(t-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.saturation)return(t.saturation[0]-.213)/.787},setValue:(t,e)=>t.update((t=>({...t,saturation:[.213+.787*e,.715-.715*e,.072-.072*e,0,0,.213-.213*e,.715+.285*e,.072-.072*e,0,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,0,1,0]})))},exposure:{base:1,min:.5,max:1.5,getLabel:t=>Hd(2*(t-.5)-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.exposure)return t.exposure[0]},setValue:(t,e)=>t.update((t=>({...t,exposure:[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0]})))},temperature:{base:0,min:-1,max:1,getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(!t.temperature)return;const e=t.temperature[0];return e>=1?(e-1)/.1:(1-e)/-.15},setValue:(t,e)=>t.update((t=>({...t,temperature:e>0?[1+.1*e,0,0,0,0,0,1,0,0,0,0,0,1+.1*-e,0,0,0,0,0,1,0]:[1+.15*e,0,0,0,0,0,1+.05*e,0,0,0,0,0,1+.15*-e,0,0,0,0,0,1,0]})))},clarity:{base:0,min:-1,max:1,getStore:({imageConvolutionMatrix:t})=>t,getValue:t=>{if(t.clarity)return 0===t.clarity[0]?t.clarity[1]/-1:t.clarity[1]/-2},setValue:(t,e)=>{t.update((t=>({...t,clarity:e>=0?[0,-1*e,0,-1*e,1+4*e,-1*e,0,-1*e,0]:[-1*e,-2*e,-1*e,-2*e,1+-3*e,-2*e,-1*e,-2*e,-1*e]})))}},vignette:{base:0,min:-1,max:1,getStore:({imageVignette:t})=>t}},finetuneOptions:[["brightness",t=>t.finetuneLabelBrightness],["contrast",t=>t.finetuneLabelContrast],["saturation",t=>t.finetuneLabelSaturation],["exposure",t=>t.finetuneLabelExposure],["temperature",t=>t.finetuneLabelTemperature],["gamma",t=>t.finetuneLabelGamma],!Ss()&&["clarity",t=>t.finetuneLabelClarity],["vignette",t=>t.finetuneLabelVignette]].filter(Boolean)},Tu=(t,e,o)=>{let n,i,r;const a=Math.floor(6*t),s=6*t-a,l=o*(1-e),c=o*(1-s*e),d=o*(1-(1-s)*e);switch(a%6){case 0:n=o,i=d,r=l;break;case 1:n=c,i=o,r=l;break;case 2:n=l,i=o,r=d;break;case 3:n=l,i=c,r=o;break;case 4:n=d,i=l,r=o;break;case 5:n=o,i=l,r=c}return[n,i,r]};function Iu(t){let e,o,n;return{c(){e=ei("div"),o=ei("span"),li(e,"class","PinturaColorPreview"),li(e,"title",t[0]),li(e,"style",n=`--color:${t[1]}`)},m(t,n){Qn(t,e,n),Yn(e,o)},p(t,[o]){1&o&&li(e,"title",t[0]),2&o&&n!==(n=`--color:${t[1]}`)&&li(e,"style",n)},i:Mn,o:Mn,d(t){t&&ti(e)}}}function Eu(t,e,o){let n,{color:i}=e,{title:r}=e;return t.$$set=t=>{"color"in t&&o(2,i=t.color),"title"in t&&o(0,r=t.title)},t.$$.update=()=>{4&t.$$.dirty&&o(1,n=i?co(i):"transparent")},[r,n,i]}class Lu extends ar{constructor(t){super(),rr(this,t,Eu,Iu,In,{color:2,title:0})}}function zu(t){let e,o;return{c(){e=ei("span"),o=ni(t[0])},m(t,n){Qn(t,e,n),Yn(e,o)},p(t,e){1&e[0]&&di(o,t[0])},d(t){t&&ti(e)}}}function Fu(t){let e,o,n,i;o=new Lu({props:{color:t[4],title:fc(t[8],t[10])}});let r=!t[9]&&zu(t);return{c(){e=ei("span"),or(o.$$.fragment),n=ii(),r&&r.c(),li(e,"slot","label"),li(e,"class","PinturaButtonLabel")},m(t,a){Qn(t,e,a),nr(o,e,null),Yn(e,n),r&&r.m(e,null),i=!0},p(t,n){const i={};16&n[0]&&(i.color=t[4]),1280&n[0]&&(i.title=fc(t[8],t[10])),o.$set(i),t[9]?r&&(r.d(1),r=null):r?r.p(t,n):(r=zu(t),r.c(),r.m(e,null))},i(t){i||(Vi(o.$$.fragment,t),i=!0)},o(t){Zi(o.$$.fragment,t),i=!1},d(t){t&&ti(e),ir(o),r&&r.d()}}}function Bu(t){let e,o,n,i,r,a,s,l,c,d,u,h,p;c=new dl({props:{class:"PinturaHuePicker",knobStyle:`background-color:${t[19]}`,onchange:t[24],value:t[14],min:0,max:1,step:.01}});let m=t[11]&&Ou(t);return{c(){e=ei("div"),o=ei("div"),n=ei("div"),i=ei("div"),l=ii(),or(c.$$.fragment),d=ii(),m&&m.c(),li(i,"role","button"),li(i,"aria-label","Saturation slider"),li(i,"class","PinturaPickerKnob"),li(i,"tabindex","0"),li(i,"style",r=`background-color:${t[18]};`),li(n,"class","PinturaPickerKnobController"),li(n,"style",a=`transform:translate(${t[22]}%,${t[21]}%)`),li(o,"class","PinturaSaturationPicker"),li(o,"style",s=`background-color: ${t[19]}`),li(e,"class","PinturaPicker")},m(r,a){Qn(r,e,a),Yn(e,o),Yn(o,n),Yn(n,i),t[32](o),Yn(e,l),nr(c,e,null),Yn(e,d),m&&m.m(e,null),u=!0,h||(p=[ai(i,"nudge",t[27]),Hn(el.call(null,i,{preventDefault:!0})),ai(o,"pointerdown",t[26])],h=!0)},p(t,l){(!u||262144&l[0]&&r!==(r=`background-color:${t[18]};`))&&li(i,"style",r),(!u||6291456&l[0]&&a!==(a=`transform:translate(${t[22]}%,${t[21]}%)`))&&li(n,"style",a),(!u||524288&l[0]&&s!==(s=`background-color: ${t[19]}`))&&li(o,"style",s);const d={};524288&l[0]&&(d.knobStyle=`background-color:${t[19]}`),16384&l[0]&&(d.value=t[14]),c.$set(d),t[11]?m?(m.p(t,l),2048&l[0]&&Vi(m,1)):(m=Ou(t),m.c(),Vi(m,1),m.m(e,null)):m&&(Hi(),Zi(m,1,1,(()=>{m=null})),Ui())},i(t){u||(Vi(c.$$.fragment,t),Vi(m),u=!0)},o(t){Zi(c.$$.fragment,t),Zi(m),u=!1},d(o){o&&ti(e),t[32](null),ir(c),m&&m.d(),h=!1,An(p)}}}function Ou(t){let e,o;return e=new dl({props:{class:"PinturaOpacityPicker",knobStyle:`background-color:${t[16]}`,trackStyle:`background-image:linear-gradient(to right,${t[17]},${t[18]})`,onchange:t[25],value:t[15],min:0,max:1,step:.01}}),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const n={};65536&o[0]&&(n.knobStyle=`background-color:${t[16]}`),393216&o[0]&&(n.trackStyle=`background-image:linear-gradient(to right,${t[17]},${t[18]})`),32768&o[0]&&(n.value=t[15]),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function Du(t){let e,o;return e=new Uc({props:{label:fc(t[10].labelColorPalette,t[10]),class:Ts(["PinturaColorPresets",t[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"]),hideLabel:!1,name:t[1],value:t[4],optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:t[2].map(t[33]),selectedIndex:t[3],optionMapper:t[7],optionLabelClass:t[6],onchange:t[34],$$slots:{option:[ju,({option:t})=>({45:t}),({option:t})=>[0,t?16384:0]],group:[_u,({option:t})=>({45:t}),({option:t})=>[0,t?16384:0]]},$$scope:{ctx:t}}}),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const n={};1024&o[0]&&(n.label=fc(t[10].labelColorPalette,t[10])),512&o[0]&&(n.class=Ts(["PinturaColorPresets",t[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"])),2&o[0]&&(n.name=t[1]),16&o[0]&&(n.value=t[4]),1028&o[0]&&(n.options=t[2].map(t[33])),8&o[0]&&(n.selectedIndex=t[3]),128&o[0]&&(n.optionMapper=t[7]),64&o[0]&&(n.optionLabelClass=t[6]),512&o[0]|49152&o[1]&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function _u(t){let e,o,n=t[45].label+"";return{c(){e=ei("span"),o=ni(n),li(e,"slot","group")},m(t,n){Qn(t,e,n),Yn(e,o)},p(t,e){16384&e[1]&&n!==(n=t[45].label+"")&&di(o,n)},d(t){t&&ti(e)}}}function Wu(t){let e,o,n=t[45].label+"";return{c(){e=ei("span"),o=ni(n),li(e,"class","PinturaButtonLabel")},m(t,n){Qn(t,e,n),Yn(e,o)},p(t,e){16384&e[1]&&n!==(n=t[45].label+"")&&di(o,n)},d(t){t&&ti(e)}}}function ju(t){let e,o,n,i;o=new Lu({props:{title:t[45].label,color:t[45].value}});let r=!t[9]&&Wu(t);return{c(){e=ei("span"),or(o.$$.fragment),n=ii(),r&&r.c(),li(e,"slot","option")},m(t,a){Qn(t,e,a),nr(o,e,null),Yn(e,n),r&&r.m(e,null),i=!0},p(t,n){const i={};16384&n[1]&&(i.title=t[45].label),16384&n[1]&&(i.color=t[45].value),o.$set(i),t[9]?r&&(r.d(1),r=null):r?r.p(t,n):(r=Wu(t),r.c(),r.m(e,null))},i(t){i||(Vi(o.$$.fragment,t),i=!0)},o(t){Zi(o.$$.fragment,t),i=!1},d(t){t&&ti(e),ir(o),r&&r.d()}}}function Nu(t){let e,o,n,i=t[13]&&Bu(t),r=t[12]&&Du(t);return{c(){e=ei("div"),i&&i.c(),o=ii(),r&&r.c(),li(e,"slot","details"),li(e,"class","PinturaColorPickerPanel")},m(t,a){Qn(t,e,a),i&&i.m(e,null),Yn(e,o),r&&r.m(e,null),n=!0},p(t,n){t[13]?i?(i.p(t,n),8192&n[0]&&Vi(i,1)):(i=Bu(t),i.c(),Vi(i,1),i.m(e,o)):i&&(Hi(),Zi(i,1,1,(()=>{i=null})),Ui()),t[12]?r?(r.p(t,n),4096&n[0]&&Vi(r,1)):(r=Du(t),r.c(),Vi(r,1),r.m(e,null)):r&&(Hi(),Zi(r,1,1,(()=>{r=null})),Ui())},i(t){n||(Vi(i),Vi(r),n=!0)},o(t){Zi(i),Zi(r),n=!1},d(t){t&&ti(e),i&&i.d(),r&&r.d()}}}function Hu(t){let e,o;return e=new dc({props:{buttonClass:Ts(["PinturaColorPickerButton",t[5]]),$$slots:{details:[Nu],label:[Fu]},$$scope:{ctx:t}}}),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const n={};32&o[0]&&(n.buttonClass=Ts(["PinturaColorPickerButton",t[5]])),8388575&o[0]|32768&o[1]&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function Uu(t,e,o){let n,i,r,a,s,l,c,d,u,h,p,m,{label:g}=e,{name:f}=e,{options:$=[]}=e,{selectedIndex:y=-1}=e,{value:b}=e,{buttonClass:x}=e,{optionLabelClass:v}=e,{optionMapper:C}=e,{onchange:M}=e,{title:k}=e,{hidePresetLabel:S=!0}=e,{locale:P}=e,{enableOpacity:R=!0}=e,{enablePresets:A=!0}=e,{enablePicker:T=!0}=e;const I=(t,e)=>{if(c=[t[0],t[1],t[2]],e){let e=((t,e,o)=>{let n=Math.max(t,e,o),i=n-Math.min(t,e,o),r=i&&(n==t?(e-o)/i:n==e?2+(o-t)/i:4+(t-e)/i);return[60*(r<0?r+6:r)/360,n&&i/n,n]})(...c);o(14,r=e[0]),o(29,a=e[1]),o(30,s=e[2]),o(15,l=ro(t[3])?t[3]:1)}o(16,d=co(t)),o(17,u=co([...c,0])),o(18,h=co([...c,1])),o(19,p=co(Tu(r,1,1)))},E=()=>{const t=[...Tu(r,a,s),l];I(t),M(t)},L=t=>{const e=3===t.length?[...t,1]:t;I(e,!0),M(e)},z=(t,e)=>{const n=Pr(t.x/e.width,0,1);var i;i=1-Pr(t.y/e.height,0,1),o(29,a=n),o(30,s=i),0===l&&o(15,l=1),E()};let F,B,O,D;const _=t=>{const e=ut(ot(t),D);z(dt(nt(O),e),B)},W=t=>{B=void 0,document.documentElement.removeEventListener("pointermove",_),document.documentElement.removeEventListener("pointerup",W)};return t.$$set=t=>{"label"in t&&o(0,g=t.label),"name"in t&&o(1,f=t.name),"options"in t&&o(2,$=t.options),"selectedIndex"in t&&o(3,y=t.selectedIndex),"value"in t&&o(4,b=t.value),"buttonClass"in t&&o(5,x=t.buttonClass),"optionLabelClass"in t&&o(6,v=t.optionLabelClass),"optionMapper"in t&&o(7,C=t.optionMapper),"onchange"in t&&o(28,M=t.onchange),"title"in t&&o(8,k=t.title),"hidePresetLabel"in t&&o(9,S=t.hidePresetLabel),"locale"in t&&o(10,P=t.locale),"enableOpacity"in t&&o(11,R=t.enableOpacity),"enablePresets"in t&&o(12,A=t.enablePresets),"enablePicker"in t&&o(13,T=t.enablePicker)},t.$$.update=()=>{16&t.$$.dirty[0]|1&t.$$.dirty[1]&&(!b||m&&Ir(b,m)||(o(31,m=[...b]),I(b,!0))),536870912&t.$$.dirty[0]&&o(22,n=100*a),1073741824&t.$$.dirty[0]&&o(21,i=100-100*s)},[g,f,$,y,b,x,v,C,k,S,P,R,A,T,r,l,d,u,h,p,F,i,n,L,t=>{o(14,r=t),0===l&&o(15,l=1),E()},t=>{o(15,l=t),E()},t=>{t.stopPropagation(),B=kt(F.offsetWidth,F.offsetHeight),O=(t=>tt(t.offsetX,t.offsetY))(t),D=ot(t),z(O,B),document.documentElement.addEventListener("pointermove",_),document.documentElement.addEventListener("pointerup",W)},t=>{B=kt(F.offsetWidth,F.offsetHeight);const e=n/100*B.width,o=i/100*B.height;z({x:e+t.detail.x,y:o+t.detail.y},B)},M,a,s,m,function(t){Si[t?"unshift":"push"]((()=>{F=t,o(20,F)}))},([t,e])=>[t,w(e)?e(P):e],t=>L(t.value)]}class Vu extends ar{constructor(t){super(),rr(this,t,Uu,Hu,In,{label:0,name:1,options:2,selectedIndex:3,value:4,buttonClass:5,optionLabelClass:6,optionMapper:7,onchange:28,title:8,hidePresetLabel:9,locale:10,enableOpacity:11,enablePresets:12,enablePicker:13},null,[-1,-1])}}var Zu=t=>t.charAt(0).toUpperCase()+t.slice(1);let Gu=null;var qu=()=>{if(null===Gu)if(l())try{Gu=!1===document.fonts.check("16px TestNonExistingFont")}catch(t){Gu=!1}else Gu=!1;return Gu};const Xu=(t,e)=>o=>o[e?`${e}${Zu(t)}`:t],Yu=t=>[t,`${t}`],Ku=(t,e)=>o=>[t[o],Xu(o,e)],Ju=[1,.2549,.2118],Qu="0.5%",th=[1,1,1,0],eh={eraser:()=>({eraseRadius:0}),path:()=>({points:[]}),line:()=>({x1:0,y1:0,x2:0,y2:0,disableErase:!1}),rectangle:()=>({x:0,y:0,width:0,height:0}),ellipse:()=>({x:0,y:0,rx:0,ry:0}),text:()=>({x:0,y:0,text:"Text"})},oh=(t,e={},o)=>{if(!eh[t])return;const{position:n="relative",inputMode:i="drag"}=o||{};return[{...eh[t](),...e},{position:n,inputMode:i}]},nh=(t,e,o)=>[t,e||Xu(t,"shapeLabelTool"),{icon:Xu(t,"shapeIconTool"),...o}],ih=()=>({transparent:[1,1,1,0],white:[1,1,1],silver:[.8667,.8667,.8667],gray:[.6667,.6667,.6667],black:[0,0,0],navy:[0,.1216,.2471],blue:[0,.4549,.851],aqua:[.498,.8588,1],teal:[.2235,.8,.8],olive:[.2392,.6,.4392],green:[.1804,.8,.251],yellow:[1,.8627,0],orange:[1,.5216,.1059],red:[1,.2549,.2118],maroon:[.5216,.0784,.2941],fuchsia:[.9412,.0706,.7451],purple:[.6941,.051,.7882]}),rh=()=>({extraSmall:"2%",small:"4%",mediumSmall:"8%",medium:"10%",mediumLarge:"15%",large:"20%",extraLarge:"25%"}),ah=()=>({extraSmall:"40%",small:"60%",mediumSmall:"100%",medium:"120%",mediumLarge:"140%",large:"180%",extraLarge:"220%"}),sh=()=>({extraSmall:"0.25%",small:"0.5%",mediumSmall:"1%",medium:"1.75%",mediumLarge:"2.5%",large:"3.5%",extraLarge:"5%"}),lh=()=>["bar","arrow","arrowSolid","circle","circleSolid","square","squareSolid"],ch=()=>[["Helvetica, Arial, Verdana, 'Droid Sans', sans-serif","Sans Serif"],["'Arial Black', 'Avenir-Black', 'Arial Bold'","Black"],["'Arial Narrow', 'Futura-CondensedMedium'","Narrow"],["'Trebuchet MS'","Humanist"],["Georgia, 'Avenir-Black', 'Times New Roman', 'Droid Serif', serif","Serif"],["Palatino","Old-Style"],["'Times New Roman', 'TimesNewRomanPSMT'","Transitional"],["Menlo, Monaco, 'Lucida Console', monospace","Monospaced"],["'Courier New', monospace","Slab Serif"]],dh=()=>["left","center","right"],uh=()=>[["normal","bold"],["italic","normal"],["italic","bold"]],hh=t=>Object.keys(t).map(Ku(t,"shapeTitleColor")),ph=t=>Object.keys(t).map(Ku(t,"labelSize")),mh=t=>Object.keys(t).map(Ku(t,"labelSize")),gh=t=>Object.keys(t).map(Ku(t,"labelSize")),fh=t=>[...t],$h=t=>t.map((t=>[t,e=>e[`shapeLabelFontStyle${t.filter((t=>"normal"!==t)).map(Zu).join("")}`]])),yh=t=>t.map((t=>[Id(t),e=>e[`shapeTitleLineDecoration${Zu(t)}`],{icon:e=>e[`shapeIconLineDecoration${Zu(t)}`]}])),bh=t=>t.map((t=>[t,e=>e[`shapeTitleTextAlign${Zu(t)}`],{hideLabel:!0,icon:e=>e[`shapeIconTextAlign${Zu(t)}`]}])),xh=(t,e)=>{const{defaultKey:o,defaultValue:n,defaultOptions:i}=e||{},r=[];return o&&(r[0]=[n,t=>t[o],{...i}]),[...r,...t]},vh=t=>t.split(",").map((t=>t.trim())).some((t=>document.fonts.check(`16px ${t}`))),wh=(t,e={})=>[Vu,{title:t=>t.labelColor,options:xh(t),...e}],Ch=(t={})=>[gd,{...t}],Mh="PinturaFontTest",kh=(t,e={defaultKey:"labelDefault"})=>[id,{title:t=>t.shapeTitleFontFamily,onload:({options:t=[]})=>{qu()&&t.map((([t])=>t)).filter(Boolean).filter((t=>!vh(t))).forEach((t=>{const e=`${Mh}-${t.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase()}`;document.getElementById(e)||document.body.append(h("span",{textContent:" ",id:e,class:Mh,style:`font-family:${t};font-size:0;color:transparent;`}))}))},ondestroy:()=>{qu()&&document.querySelectorAll(".PinturaFontTest").forEach((t=>t.remove()))},optionLabelStyle:t=>`font-family: ${t}`,options:xh(t,e),optionFilter:t=>{if(!qu())return!0;const[e]=t;return!e||vh(e)}}],Sh=(t,e={})=>[Vu,{title:t=>t.shapeTitleBackgroundColor,options:xh(t),...e}],Ph=(t,e={})=>[Vu,{title:t=>t.shapeTitleStrokeColor,options:xh(t),buttonClass:"PinturaColorPickerButtonStroke",onchange:(t,o)=>{const n=o.strokeWidth;(ro(n)||v(n)?parseFloat(n):0)>0||(o.strokeWidth=e&&e.defaultStrokeWidth||"0.5%")},...e}],Rh=(t,e,o)=>[id,{title:t=>t[e],options:xh(t,{defaultKey:"labelNone",defaultOptions:{icon:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H14"/></g>'}}),optionIconStyle:o}],Ah=t=>Rh(t,"shapeTitleLineStart","transform: scaleX(-1)"),Th=t=>Rh(t,"shapeTitleLineEnd"),Ih=t=>[Vu,{title:t=>t.shapeTitleTextColor,options:xh(t)}],Eh=t=>[id,{title:t=>t.shapeTitleFontStyle,optionLabelStyle:t=>t&&`font-style:${t[0]};font-weight:${t[1]}`,options:xh(t,{defaultKey:"shapeLabelFontStyleNormal"})}],Lh=t=>{let e;return t.find((([t])=>"4%"===t))||(e={defaultKey:"labelAuto",defaultValue:"4%"}),[id,{title:t=>t.shapeTitleFontSize,options:xh(t,e)}]},zh=t=>[Uc,{title:t=>t.shapeTitleTextAlign,options:xh(t)}],Fh=t=>{let e;return t.find((([t])=>"120%"===t))||(e={defaultKey:"labelAuto",defaultValue:"120%"}),[id,{title:t=>t.shapeTitleLineHeight,options:xh(t,e)}]};function Bh(t){let e,o,n,i;const r=t[4].default,a=Fn(r,t,t[3],null);return{c(){e=ei("div"),a&&a.c(),li(e,"class",t[0])},m(r,s){Qn(r,e,s),a&&a.m(e,null),o=!0,n||(i=[ai(e,"measure",(function(){Tn(t[1]&&t[2])&&(t[1]&&t[2]).apply(this,arguments)})),Hn(vs.call(null,e))],n=!0)},p(n,[i]){t=n,a&&a.p&&(!o||8&i)&&Dn(a,r,t,t[3],o?On(r,t[3],i,null):_n(t[3]),null),(!o||1&i)&&li(e,"class",t[0])},i(t){o||(Vi(a,t),o=!0)},o(t){Zi(a,t),o=!1},d(t){t&&ti(e),a&&a.d(t),n=!1,An(i)}}}function Oh(t,e,o){let{$$slots:n={},$$scope:i}=e;const r=vi();let{class:a=null}=e,s=!1;return bi((()=>o(1,s=!0))),t.$$set=t=>{"class"in t&&o(0,a=t.class),"$$scope"in t&&o(3,i=t.$$scope)},[a,s,({detail:t})=>r("measure",t),i,n]}class Dh extends ar{constructor(t){super(),rr(this,t,Oh,Bh,In,{class:0})}}const _h=t=>({}),Wh=t=>({}),jh=t=>({}),Nh=t=>({}),Hh=t=>({}),Uh=t=>({});function Vh(t){let e,o;const n=t[4].header,i=Fn(n,t,t[3],Uh);return{c(){e=ei("div"),i&&i.c(),li(e,"class","PinturaUtilHeader")},m(t,n){Qn(t,e,n),i&&i.m(e,null),o=!0},p(t,e){i&&i.p&&(!o||8&e)&&Dn(i,n,t,t[3],o?On(n,t[3],e,Hh):_n(t[3]),Uh)},i(t){o||(Vi(i,t),o=!0)},o(t){Zi(i,t),o=!1},d(t){t&&ti(e),i&&i.d(t)}}}function Zh(t){let e,o;const n=t[4].footer,i=Fn(n,t,t[3],Wh);return{c(){e=ei("div"),i&&i.c(),li(e,"class","PinturaUtilFooter")},m(t,n){Qn(t,e,n),i&&i.m(e,null),o=!0},p(t,e){i&&i.p&&(!o||8&e)&&Dn(i,n,t,t[3],o?On(n,t[3],e,_h):_n(t[3]),Wh)},i(t){o||(Vi(i,t),o=!0)},o(t){Zi(i,t),o=!1},d(t){t&&ti(e),i&&i.d(t)}}}function Gh(t){let e,o,n,i,r,a,s=t[1]&&Vh(t);const l=t[4].main,c=Fn(l,t,t[3],Nh),d=c||function(t){let e,o;return e=new Dh({props:{class:"PinturaStage"}}),e.$on("measure",t[5]),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p:Mn,i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}(t);let u=t[2]&&Zh(t);return{c(){s&&s.c(),e=ii(),o=ei("div"),d&&d.c(),n=ii(),u&&u.c(),i=ii(),r=ri(),li(o,"class","PinturaUtilMain")},m(l,c){s&&s.m(l,c),Qn(l,e,c),Qn(l,o,c),d&&d.m(o,null),t[6](o),Qn(l,n,c),u&&u.m(l,c),Qn(l,i,c),Qn(l,r,c),a=!0},p(t,[o]){t[1]?s?(s.p(t,o),2&o&&Vi(s,1)):(s=Vh(t),s.c(),Vi(s,1),s.m(e.parentNode,e)):s&&(Hi(),Zi(s,1,1,(()=>{s=null})),Ui()),c&&c.p&&(!a||8&o)&&Dn(c,l,t,t[3],a?On(l,t[3],o,jh):_n(t[3]),Nh),t[2]?u?(u.p(t,o),4&o&&Vi(u,1)):(u=Zh(t),u.c(),Vi(u,1),u.m(i.parentNode,i)):u&&(Hi(),Zi(u,1,1,(()=>{u=null})),Ui())},i(t){a||(Vi(s),Vi(d,t),Vi(u),Vi(!1),a=!0)},o(t){Zi(s),Zi(d,t),Zi(u),Zi(!1),a=!1},d(a){s&&s.d(a),a&&ti(e),a&&ti(o),d&&d.d(a),t[6](null),a&&ti(n),u&&u.d(a),a&&ti(i),a&&ti(r)}}}function qh(t,e,o){let{$$slots:n={},$$scope:i}=e,{hasHeader:r=!!e.$$slots.header}=e,{hasFooter:a=!!e.$$slots.footer}=e,{root:s}=e;return t.$$set=t=>{o(7,e=Sn(Sn({},e),Wn(t))),"hasHeader"in t&&o(1,r=t.hasHeader),"hasFooter"in t&&o(2,a=t.hasFooter),"root"in t&&o(0,s=t.root),"$$scope"in t&&o(3,i=t.$$scope)},e=Wn(e),[s,r,a,i,n,function(e){Mi.call(this,t,e)},function(t){Si[t?"unshift":"push"]((()=>{s=t,o(0,s)}))}]}class Xh extends ar{constructor(t){super(),rr(this,t,qh,Gh,In,{hasHeader:1,hasFooter:2,root:0})}}function Yh(t){let e,o;return{c(){e=ei("div"),li(e,"class","PinturaRangeInputMeter"),li(e,"style",o=`transform: translateX(${t[9].x-t[11].x}px) translateY(${t[9].y-t[11].y}px)`)},m(o,n){Qn(o,e,n),e.innerHTML=t[7]},p(t,n){128&n[0]&&(e.innerHTML=t[7]),512&n[0]&&o!==(o=`transform: translateX(${t[9].x-t[11].x}px) translateY(${t[9].y-t[11].y}px)`)&&li(e,"style",o)},d(t){t&&ti(e)}}}function Kh(t){let e,o,n,i,r,a,s,l,c,d,u,h=t[9]&&Yh(t);return{c(){e=ei("div"),o=ei("span"),n=ii(),i=ei("button"),r=ni(t[1]),s=ii(),l=ei("div"),h&&h.c(),li(o,"class","PinturaRangeInputValue"),li(i,"class","PinturaRangeInputReset"),li(i,"type","button"),i.disabled=a=t[0]===t[2],li(l,"class","PinturaRangeInputInner"),li(l,"style",t[8]),li(l,"data-value-limited",t[5]),li(e,"class","PinturaRangeInput"),li(e,"tabindex","0")},m(a,p){Qn(a,e,p),Yn(e,o),o.innerHTML=t[3],Yn(e,n),Yn(e,i),Yn(i,r),Yn(e,s),Yn(e,l),h&&h.m(l,null),d||(u=[ai(i,"click",t[16]),ai(l,"interactionstart",t[12]),ai(l,"interactionupdate",t[14]),ai(l,"interactionend",t[15]),ai(l,"interactionrelease",t[13]),Hn(c=Cl.call(null,l,{inertia:t[6]})),ai(l,"measure",t[35]),Hn(vs.call(null,l)),ai(e,"wheel",t[18],{passive:!1}),ai(e,"nudge",t[19]),Hn(el.call(null,e,{direction:"horizontal",preventDefault:!0}))],d=!0)},p(t,e){8&e[0]&&(o.innerHTML=t[3]),2&e[0]&&di(r,t[1]),5&e[0]&&a!==(a=t[0]===t[2])&&(i.disabled=a),t[9]?h?h.p(t,e):(h=Yh(t),h.c(),h.m(l,null)):h&&(h.d(1),h=null),256&e[0]&&li(l,"style",t[8]),32&e[0]&&li(l,"data-value-limited",t[5]),c&&Tn(c.update)&&64&e[0]&&c.update.call(null,{inertia:t[6]})},i:Mn,o:Mn,d(t){t&&ti(e),h&&h.d(),d=!1,An(u)}}}function Jh(t,e,o){let n,i,a,s,l,c,d,u,h,{labelReset:p="Reset"}=e,{direction:m="x"}=e,{min:g=0}=e,{max:f=1}=e,{base:$=g}=e,{value:y=0}=e,{valueLabel:b=0}=e,{valueMin:x}=e,{valueMax:v}=e,{oninputstart:w=r}=e,{oninputmove:C=r}=e,{oninputend:M=r}=e,{elasticity:k=0}=e,{nudgeMultiplier:S}=e;const P=Ci("isAnimated");zn(t,P,(t=>o(6,u=t)));const R=(t,e,o)=>Math.ceil((t-o)/e)*e+o;let A,T,I;const E={x:2,y:0},L=(t,e,o)=>`M ${t-o} ${e} a ${o} ${o} 0 1 0 0 -1`;let z,F,B=!1,O={snap:!1,elastic:!1};const D=(t,e,o)=>{const n=t[m]+e[m],i=Pr(n,F[1][m],F[0][m]),r=k?i+Ml(n-i,k):i,a=o.elastic?r:i,s=tt(0,0);return s[m]=a,_.set(s,{hard:o.snap}),Pr(j(s,m),g,f)},_=cs();zn(t,_,(t=>o(9,h=t)));const W=(t,e)=>{const o=.5*(A[e]-s[e])-(ol(t,g,f)*s[e]-.5*s[e]);return{x:"x"===e?o:0,y:"y"===e?o:0}},j=(t,e)=>{const o=-(t[e]-.5*A[e])/s[e];return g+o*n},N=_.subscribe((t=>{t&&z&&C(Pr(j(t,m),g,f))})),H=t=>{const e=[W(null!=x?x:g,m),W(null!=v?v:f,m)],o={x:"x"===m?h.x+t:0,y:"y"===m?h.y+t:0},n=Pr(o[m],e[1][m],e[0][m]),i={...h,[m]:n};Nn(_,h=i,h);const r=Pr(j(i,m),g,f);w(),C(r),M(r)};return xi((()=>{N()})),t.$$set=t=>{"labelReset"in t&&o(1,p=t.labelReset),"direction"in t&&o(20,m=t.direction),"min"in t&&o(21,g=t.min),"max"in t&&o(22,f=t.max),"base"in t&&o(2,$=t.base),"value"in t&&o(0,y=t.value),"valueLabel"in t&&o(3,b=t.valueLabel),"valueMin"in t&&o(23,x=t.valueMin),"valueMax"in t&&o(24,v=t.valueMax),"oninputstart"in t&&o(25,w=t.oninputstart),"oninputmove"in t&&o(26,C=t.oninputmove),"oninputend"in t&&o(27,M=t.oninputend),"elasticity"in t&&o(28,k=t.elasticity),"nudgeMultiplier"in t&&o(29,S=t.nudgeMultiplier)},t.$$.update=()=>{if(6291456&t.$$.dirty[0]&&o(31,n=f-g),10485760&t.$$.dirty[0]&&o(33,i=null!=x?Math.max(x,g):g),20971520&t.$$.dirty[0]&&o(32,a=null!=v?Math.min(v,f):f),6291460&t.$$.dirty[0]&&o(34,l=ol($,g,f)),16&t.$$.dirty[0]|8&t.$$.dirty[1]&&A){const t=.5*A.y;let e,n=40*l,i="",r=A.y,a="";for(let o=0;o<=40;o++){const r=E.x+10*o,s=t;i+=L(r,s,o%5==0?2:.75)+" ",e=r+E.x,o===n&&(a=`<path d="M${r} ${s-4} l2 3 l-2 -1 l-2 1 z"/>`)}o(7,T=`<svg width="${e}" height="${r}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${e} ${r}" aria-hidden="true" focusable="false">\n        ${a}\n        <rect rx="4" ry="4" y="${t-4}"" height="8"/>\n        <path fill-rule="evenodd" d="${i.trim()}"/></svg>`),o(30,I={x:e-2*E.x,y:r})}1073741840&t.$$.dirty[0]&&(s=A&&I),6291456&t.$$.dirty[0]|6&t.$$.dirty[1]&&o(5,c=i!==g||a!==f),32&t.$$.dirty[0]|6&t.$$.dirty[1]&&o(8,d=c?function(t,e){const o=ol(t,g,f),n=ol(e,g,f);return`--range-mask-from:${100*K(R(o,.025,0)-.0125)}%;--range-mask-to:${100*K(R(n,.025,0)-.0125)}%`}(i,a):""),1048657&t.$$.dirty[0]|1&t.$$.dirty[1]&&n&&A&&A.x&&A.y&&_.set(W(y,m),{hard:!1===u})},[y,p,$,b,A,c,u,T,d,h,P,E,()=>{B=!1,z=Ln(_),F=[W(null!=x?x:g,m),W(null!=v?v:f,m)],w()},()=>{B=!0},({detail:t})=>{O.snap=!B,O.elastic=!B,D(z,t.translation,O)},({detail:t})=>{O.snap=!1,O.elastic=!1;const e=D(z,t.translation,O);if(z=void 0,F=void 0,Math.abs(e-$)<.01)return M($);M(e)},()=>{o(0,y=Pr($,i,a)),w(),M(y)},_,t=>{t.preventDefault(),t.stopPropagation();const e=8*Rl(t);H(e)},({detail:t})=>{H(t[m]*Math.abs(S||8))},m,g,f,x,v,w,C,M,k,S,I,n,a,i,l,t=>o(4,A=(t=>tt(t.width,t.height))(t.detail))]}class Qh extends ar{constructor(t){super(),rr(this,t,Jh,Kh,In,{labelReset:1,direction:20,min:21,max:22,base:2,value:0,valueLabel:3,valueMin:23,valueMax:24,oninputstart:25,oninputmove:26,oninputend:27,elasticity:28,nudgeMultiplier:29},null,[-1,-1])}}function tp(t){let e,o,n,i,r;const a=t[7].default,s=Fn(a,t,t[6],null);return{c(){e=ei("div"),o=ei("div"),s&&s.c(),li(o,"class","PinturaToolbarInner"),li(e,"class","PinturaToolbar"),li(e,"data-layout",t[1]),li(e,"data-overflow",t[0])},m(a,l){Qn(a,e,l),Yn(e,o),s&&s.m(o,null),n=!0,i||(r=[ai(o,"measure",t[3]),Hn(vs.call(null,o)),ai(e,"measure",t[2]),Hn(vs.call(null,e))],i=!0)},p(t,[o]){s&&s.p&&(!n||64&o)&&Dn(s,a,t,t[6],n?On(a,t[6],o,null):_n(t[6]),null),(!n||2&o)&&li(e,"data-layout",t[1]),(!n||1&o)&&li(e,"data-overflow",t[0])},i(t){n||(Vi(s,t),n=!0)},o(t){Zi(s,t),n=!1},d(t){t&&ti(e),s&&s.d(t),i=!1,An(r)}}}function ep(t,e,o){let n,i,{$$slots:r={},$$scope:a}=e,s=0,l=0,c=0;const d=()=>{o(0,i="compact"===n&&s>c?"overflow":void 0)};return t.$$set=t=>{"$$scope"in t&&o(6,a=t.$$scope)},t.$$.update=()=>{48&t.$$.dirty&&o(1,n=l>c?"compact":"default")},[i,n,({detail:t})=>{const{width:e}=t;o(5,c=e),d()},({detail:t})=>{const{width:e}=t;e>l&&o(4,l=e),s=e,i||d()},l,c,a,r]}class op extends ar{constructor(t){super(),rr(this,t,ep,tp,In,{})}}var np={[N]:t=>({x:t.x,y:t.y}),[G]:t=>({x:t.x+t.width,y:t.y}),[H]:t=>({x:t.x+t.width,y:t.y}),[q]:t=>({x:t.x+t.width,y:t.y+t.height}),[U]:t=>({x:t.x,y:t.y+t.height}),[X]:t=>({x:t.x,y:t.y+t.height}),[V]:t=>({x:t.x,y:t.y}),[Z]:t=>({x:t.x,y:t.y})};function ip(t,e,o){const n=t.slice();return n[14]=e[o].key,n[15]=e[o].translate,n[16]=e[o].scale,n[17]=e[o].type,n[18]=e[o].opacity,n}function rp(t,e){let o,n,i,r,a,s,l,c;return{key:t,first:null,c(){o=ei("div"),li(o,"role","button"),li(o,"aria-label",n=`Drag ${e[17]} ${e[14]}`),li(o,"tabindex",i="edge"===e[17]?-1:0),li(o,"class","PinturaRectManipulator"),li(o,"data-direction",r=e[14]),li(o,"data-shape",a="edge"===e[17]?"edge":`${e[0]}`),li(o,"style",s=`transform: translate3d(${e[15].x}px, ${e[15].y}px, 0) scale(${e[16].x}, ${e[16].y}); opacity: ${e[18]}`),this.first=o},m(t,n){Qn(t,o,n),l||(c=[ai(o,"nudge",(function(){Tn(e[6](e[14]))&&e[6](e[14]).apply(this,arguments)})),Hn(el.call(null,o,{preventDefault:!0})),ai(o,"interactionstart",(function(){Tn(e[5]("resizestart",e[14]))&&e[5]("resizestart",e[14]).apply(this,arguments)})),ai(o,"interactionupdate",(function(){Tn(e[5]("resizemove",e[14]))&&e[5]("resizemove",e[14]).apply(this,arguments)})),ai(o,"interactionend",(function(){Tn(e[5]("resizeend",e[14]))&&e[5]("resizeend",e[14]).apply(this,arguments)})),Hn(Cl.call(null,o))],l=!0)},p(t,l){e=t,2&l&&n!==(n=`Drag ${e[17]} ${e[14]}`)&&li(o,"aria-label",n),2&l&&i!==(i="edge"===e[17]?-1:0)&&li(o,"tabindex",i),2&l&&r!==(r=e[14])&&li(o,"data-direction",r),3&l&&a!==(a="edge"===e[17]?"edge":`${e[0]}`)&&li(o,"data-shape",a),2&l&&s!==(s=`transform: translate3d(${e[15].x}px, ${e[15].y}px, 0) scale(${e[16].x}, ${e[16].y}); opacity: ${e[18]}`)&&li(o,"style",s)},d(t){t&&ti(o),l=!1,An(c)}}}function ap(t){let e,o=[],n=new Map,i=t[1];const r=t=>t[14];for(let e=0;e<i.length;e+=1){let a=ip(t,i,e),s=r(a);n.set(s,o[e]=rp(s,a))}return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=ri()},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);Qn(t,e,n)},p(t,[a]){99&a&&(i=t[1],o=Ji(o,a,r,1,t,i,n,e.parentNode,Yi,rp,e,ip))},i:Mn,o:Mn,d(t){for(let e=0;e<o.length;e+=1)o[e].d(t);t&&ti(e)}}}function sp(t,e,o){let n,i,r,a,{rect:s=null}=e,{visible:l=!1}=e,{style:c}=e;const d=Ci("isAnimated");zn(t,d,(t=>o(11,a=t)));const u=cs(void 0,{precision:1e-4,stiffness:.2,damping:.4});zn(t,u,(t=>o(10,r=t)));const h=cs(0,{precision:.001});let p;zn(t,h,(t=>o(9,i=t)));const m=vi();return t.$$set=t=>{"rect"in t&&o(7,s=t.rect),"visible"in t&&o(8,l=t.visible),"style"in t&&o(0,c=t.style)},t.$$.update=()=>{2304&t.$$.dirty&&u.set(l?1:.5,{hard:!1===a}),2304&t.$$.dirty&&h.set(l?1:0,{hard:!1===a}),1664&t.$$.dirty&&o(1,n=Object.keys(j).map(((t,e)=>{const o=j[t],n=np[o](s),a=1===o.length?"edge":"corner",l="corner"===a;return{key:o,type:a,scale:{x:/^(t|b)$/.test(o)?s.width:l?Pr(r,.5,1.25):1,y:/^(r|l)$/.test(o)?s.height:l?Pr(r,.5,1.25):1},translate:{x:n.x,y:n.y},opacity:i}})))},[c,n,d,u,h,(t,e)=>({detail:o})=>{p&&e!==p||"resizestart"!==t&&void 0===p||("resizestart"===t&&(p=e),"resizeend"===t&&(p=void 0),m(t,{direction:e,translation:o&&o.translation}))},t=>({detail:e})=>{m("resizestart",{direction:t,translation:{x:0,y:0}}),m("resizemove",{direction:t,translation:e}),m("resizeend",{direction:t,translation:{x:0,y:0}})},s,l,i,r,a]}class lp extends ar{constructor(t){super(),rr(this,t,sp,ap,In,{rect:7,visible:8,style:0})}}var cp=t=>{function e(e,o){t.dispatchEvent(new CustomEvent(e,{detail:o}))}const o=o=>{o.preventDefault(),t.addEventListener("gesturechange",n),t.addEventListener("gestureend",i),e("gesturedown")},n=t=>{t.preventDefault(),e("gestureupdate",t.scale)},i=t=>{e("gestureup",t.scale),t.preventDefault(),r()},r=()=>{t.removeEventListener("gesturechange",n),t.removeEventListener("gestureend",i)};return t.addEventListener("gesturestart",o),{destroy:()=>{r(),t.removeEventListener("gesturestart",o)}}},dp={[N]:U,[H]:V,[U]:N,[V]:H,[Z]:q,[G]:X,[q]:Z,[X]:G},up=t=>{const e=t===V||t===H,o=t===N||t===U;return[t===H||t===G||t===q,t===V||t===X||t===Z,t===N||t===G||t===Z,t===U||t===q||t===X,e,o,e||o]},hp=(t,e,o,n={})=>{const{target:i,translate:r}=e,{aspectRatio:a,minSize:s,maxSize:l}=n,c=Y[dp[i]],d=dt(tt(t.x,t.y),tt(c[0]*t.width,c[1]*t.height)),u=Y[i],h=dt(Ot(t),tt(u[0]*t.width,u[1]*t.height)),[p,m,g,f,$,y,b]=up(i);let x=r.x,v=r.y;$?v=0:y&&(x=0);const w=pp(d,i,o,{aspectRatio:a,minSize:s,maxSize:l});let[C,M,k,S]=ae(t);if(p?S=d.x:m&&(M=d.x),f?C=d.y:g&&(k=d.y),p){const t=w.inner.x+w.inner.width,e=w.outer.x+w.outer.width;M=Pr(h.x+x,t,e)}else if(m){const t=w.outer.x,e=w.inner.x;S=Pr(h.x+x,t,e)}if(f){const t=w.inner.y+w.inner.height,e=w.outer.y+w.outer.height;k=Pr(h.y+v,t,e)}else if(g){const t=w.outer.y,e=w.inner.y;C=Pr(h.y+v,t,e)}if(a)if(b){let t=M-S,e=k-C;$?(e=t/a,C=d.y-.5*e,k=d.y+.5*e):y&&(t=e*a,S=d.x-.5*t,M=d.x+.5*t)}else{const t=tt(h.x+x-d.x,h.y+v-d.y);i===G?(t.x=Math.max(0,t.x),t.y=Math.min(0,t.y)):i===q?(t.x=Math.max(0,t.x),t.y=Math.max(0,t.y)):i===X?(t.x=Math.min(0,t.x),t.y=Math.max(0,t.y)):i===Z&&(t.x=Math.min(0,t.x),t.y=Math.min(0,t.y));const e=at(t),o=at(tt(w.inner.width,w.inner.height)),n=at(tt(w.outer.width,w.outer.height)),r=Pr(e,o,n),s=tt(a,1),l=ht(st(s),r);i===G?(M=d.x+l.x,C=d.y-l.y):i===q?(M=d.x+l.x,k=d.y+l.y):i===X?(S=d.x-l.x,k=d.y+l.y):i===Z&&(S=d.x-l.x,C=d.y-l.y)}return Ht(S,C,M-S,k-C)};const pp=(t,e,o,n)=>{const{aspectRatio:i,minSize:r,maxSize:a}=n,s=e===H||e===G||e===q,l=e===V||e===X||e===Z,c=e===N||e===G||e===Z,d=e===U||e===q||e===X,u=e===V||e===H,h=e===N||e===U,p=Ot(o);s?(p.x=t.x,p.width-=t.x):l&&(p.width=t.x),d?(p.y=t.y,p.height-=t.y):c&&(p.height=t.y);const m=(g=Math.min(p.width,a.width),f=Math.min(p.height,a.height),Bt(0,0,g,f));var g,f;if(i)if(u){const e=Math.min(t.y,o.height-t.y);m.height=Math.min(2*e,m.height)}else if(h){const e=Math.min(t.x,o.width-t.x);m.width=Math.min(2*e,m.width)}const $=i?Ct(re(m,i)):m,y=i?Ct(ie(_t(r),i)):r;let b,x,v,w;s?b=t.x:l&&(x=t.x),d?v=t.y:c&&(w=t.y),s?x=b+y.width:l&&(b=x-y.width),d?w=v+y.height:c&&(v=w-y.height),u?(v=t.y-.5*y.height,w=t.y+.5*y.height):h&&(b=t.x-.5*y.width,x=t.x+.5*y.width);const C=jt([tt(b,v),tt(x,w)]);return s?x=b+$.width:l&&(b=x-$.width),d?w=v+$.height:c&&(v=w-$.height),u?(v=t.y-.5*$.height,w=t.y+.5*$.height):h&&(b=t.x-.5*$.width,x=t.x+.5*$.width),{inner:C,outer:jt([tt(b,v),tt(x,w)])}};var mp=(t,e,o={})=>{const{target:n,translate:i}=e,{aspectRatio:r}=o,a=Y[dp[n]],s=dt(Ot(t),tt(a[0]*t.width,a[1]*t.height)),l=Y[n],c=dt(Ot(t),tt(l[0]*t.width,l[1]*t.height)),[d,u,h,p,m,g,f]=up(n);let $=i.x,y=i.y;m?y=0:g&&($=0);let[b,x,v,w]=ae(t);if(d?w=s.x:u&&(x=s.x),p?b=s.y:h&&(v=s.y),d?x=c.x+$:u&&(w=c.x+$),p?v=c.y+y:h&&(b=c.y+y),r)if(f){let t=x-w,e=v-b;m?(e=t/r,b=s.y-.5*e,v=s.y+.5*e):g&&(t=e*r,w=s.x-.5*t,x=s.x+.5*t)}else{const t=tt(c.x+$-s.x,c.y+y-s.y);n===G?(t.x=Math.max(0,t.x),t.y=Math.min(0,t.y)):n===q?(t.x=Math.max(0,t.x),t.y=Math.max(0,t.y)):n===X?(t.x=Math.min(0,t.x),t.y=Math.max(0,t.y)):n===Z&&(t.x=Math.min(0,t.x),t.y=Math.min(0,t.y));const e=at(t),o=tt(r,1),i=ht(st(o),e);n===G?(x=s.x+i.x,b=s.y-i.y):n===q?(x=s.x+i.x,v=s.y+i.y):n===X?(w=s.x-i.x,v=s.y+i.y):n===Z&&(w=s.x-i.x,b=s.y-i.y)}return Ht(w,b,x-w,v-b)},gp=t=>180*t/Math.PI;function fp(t){let e,o,n;return o=new Qh({props:{elasticity:t[5],min:t[9],max:t[10],value:t[11],valueMin:Math.max(t[9],t[0]),valueMax:Math.min(t[10],t[1]),labelReset:t[6],base:t[12],valueLabel:`${Math.round(gp(t[11]))}&deg;`,oninputstart:t[2],oninputmove:t[17],oninputend:t[18]}}),{c(){e=ei("div"),or(o.$$.fragment),li(e,"class","PinturaImageRotator")},m(t,i){Qn(t,e,i),nr(o,e,null),n=!0},p(t,[e]){const n={};32&e&&(n.elasticity=t[5]),512&e&&(n.min=t[9]),1024&e&&(n.max=t[10]),2048&e&&(n.value=t[11]),513&e&&(n.valueMin=Math.max(t[9],t[0])),1026&e&&(n.valueMax=Math.min(t[10],t[1])),64&e&&(n.labelReset=t[6]),4096&e&&(n.base=t[12]),2048&e&&(n.valueLabel=`${Math.round(gp(t[11]))}&deg;`),4&e&&(n.oninputstart=t[2]),392&e&&(n.oninputmove=t[17]),400&e&&(n.oninputend=t[18]),o.$set(n)},i(t){n||(Vi(o.$$.fragment,t),n=!0)},o(t){Zi(o.$$.fragment,t),n=!1},d(t){t&&ti(e),ir(o)}}}function $p(t,e,o){let n,i,a,s,l,c,d,{rotation:u}=e,{valueMin:h}=e,{valueMax:p}=e,{oninputstart:m=r}=e,{oninputmove:g=r}=e,{oninputend:f=r}=e,{elasticity:$=0}=e,{labelReset:y}=e,{rotationMin:b}=e,{rotationMax:x}=e;return t.$$set=t=>{"rotation"in t&&o(13,u=t.rotation),"valueMin"in t&&o(0,h=t.valueMin),"valueMax"in t&&o(1,p=t.valueMax),"oninputstart"in t&&o(2,m=t.oninputstart),"oninputmove"in t&&o(3,g=t.oninputmove),"oninputend"in t&&o(4,f=t.oninputend),"elasticity"in t&&o(5,$=t.elasticity),"labelReset"in t&&o(6,y=t.labelReset),"rotationMin"in t&&o(14,b=t.rotationMin),"rotationMax"in t&&o(15,x=t.rotationMax)},t.$$.update=()=>{16384&t.$$.dirty&&o(9,n=b+1e-9),32768&t.$$.dirty&&o(10,i=x-1e-9),1536&t.$$.dirty&&o(12,a=n+.5*(i-n)),32768&t.$$.dirty&&o(16,s=2*x),8192&t.$$.dirty&&o(8,l=Math.sign(u)),73728&t.$$.dirty&&o(7,c=Math.round(Math.abs(u)/s)*s),8576&t.$$.dirty&&o(11,d=u-l*c)},[h,p,m,g,f,$,y,c,l,n,i,d,a,u,b,x,s,t=>g(l*c+t),t=>f(l*c+t)]}class yp extends ar{constructor(t){super(),rr(this,t,$p,fp,In,{rotation:13,valueMin:0,valueMax:1,oninputstart:2,oninputmove:3,oninputend:4,elasticity:5,labelReset:6,rotationMin:14,rotationMax:15})}}function bp(t,e){var o=(t/300).toFixed(1),n=(e/300).toFixed(1);return inputedSize.width>0&&inputedSize.height>0&&Math.abs(t/e-inputedSize.width/inputedSize.height)<.01&&o>inputedSize.width&&n>inputedSize.height?"Print: "+inputedSize.width+'" x '+inputedSize.height+'"':"Print: "+(t/300).toFixed(1)+'" x '+(e/300).toFixed(1)+'"'}function xp(t,e){return"Largest Print: "+(t/300).toFixed(1)+'" x '+(e/300).toFixed(1)+'"'}function vp(t,e){var o=getRatioLabel(t/e);if(0!=o.widthLable&&0!=o.heightLable)return"Ratio: "+o.widthLable+":"+o.heightLable}function wp(t){let e,o,n,i,r,a,s,l,c,d,u,h,p;return{c(){e=ei("div"),n=ei("p"),o=ei("span"),a=ni("Resolution: "),c=ni(vp(t[0],t[1])),i=ei("span"),r=ei("span"),d=ni(t[0]),u=ni(" x "),h=ni(t[1]),s=ni(bp(t[0],t[1])),l=ni(xp(t[0],t[1])),li(e,"class","PinturaImageInfo"),li(o,"style","padding-left:10px;justify-content:right"),li(i,"style","padding-right:10px; margin:0"),li(r,"style","margin:0"),p=ei("p")},m(t,m){Qn(t,e,m),Yn(e,n),Yn(n,c),Yn(n,o),Yn(o,a),Yn(o,d),Yn(o,u),Yn(o,h),Yn(e,p),Yn(i,s),Yn(p,i),Yn(r,l),Yn(p,r)},p(t,[e]){1&e&&di(d,t[0]),2&e&&di(h,t[1]),e&&di(s,bp(t[0],t[1])),e&&di(l,xp(t[0],t[1])),e&&di(c,vp(t[0],t[1]))},i:Mn,o:Mn,d(t){t&&ti(e)}}}function Cp(t,e,o){let{width:n}=e,{height:i}=e;return t.$$set=t=>{"width"in t&&o(0,n=t.width),"height"in t&&o(1,i=t.height)},[n,i]}class Mp extends ar{constructor(t){super(),rr(this,t,Cp,wp,In,{width:0,height:1})}}function kp(t){let e,o;return e=new Uc({props:{class:"PinturaPresetListFilter",layout:"row",options:t[8],selectedIndex:t[7],onchange:t[10]}}),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const n={};256&o&&(n.options=t[8]),128&o&&(n.selectedIndex=t[7]),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function Sp(t){let e,o;return e=new id({props:{icon:t[0],label:t[1],labelClass:t[2],hideLabel:t[3],options:t[9],selectedIndex:t[4],onchange:t[5],optionMapper:t[6],$$slots:{controls:[kp]},$$scope:{ctx:t}}}),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,[o]){const n={};1&o&&(n.icon=t[0]),2&o&&(n.label=t[1]),4&o&&(n.labelClass=t[2]),8&o&&(n.hideLabel=t[3]),512&o&&(n.options=t[9]),16&o&&(n.selectedIndex=t[4]),32&o&&(n.onchange=t[5]),64&o&&(n.optionMapper=t[6]),262528&o&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}const Pp='fill="none" stroke="currentColor"';function Rp(t,e,o){let n,i,a,{icon:s}=e,{label:l}=e,{labelClass:c}=e,{hideLabel:d}=e,{options:u}=e,{selectedIndex:h}=e,{onchange:p}=e,{optionMapper:m}=e,{filter:g="landscape"}=e,{onfilterchange:f=r}=e;const $=(t,e,o,n,i)=>`\n    <rect ${Pp} x="${t}" y="${e}" width="${o}" height="${n}" rx="${i}"/>`,y=(t,e)=>`<path ${Pp} d="M${t} ${e} l2 2 l3 -4"/>`;return t.$$set=t=>{"icon"in t&&o(0,s=t.icon),"label"in t&&o(1,l=t.label),"labelClass"in t&&o(2,c=t.labelClass),"hideLabel"in t&&o(3,d=t.hideLabel),"options"in t&&o(12,u=t.options),"selectedIndex"in t&&o(4,h=t.selectedIndex),"onchange"in t&&o(5,p=t.onchange),"optionMapper"in t&&o(6,m=t.optionMapper),"filter"in t&&o(11,g=t.filter),"onfilterchange"in t&&o(13,f=t.onfilterchange)},t.$$.update=()=>{6144&t.$$.dirty&&o(9,n=((t,e)=>(t||[]).map((t=>v(t[0])?(t[1]=t[1].map(e),t):e(t))))(u,(t=>e=>{const[o,n,i={}]=e;return ro(o)&&(i.hidden="landscape"===t?o<1:o>1),[o,n,i]})(g))),2048&t.$$.dirty&&o(7,i="landscape"===g?0:1),128&t.$$.dirty&&o(8,a=[["landscape","Landscape",{hideLabel:!0,icon:$(2,6,19,12,2)+(0===i?y(9,12):"")}],["portrait","Portrait",{hideLabel:!0,icon:$(5,3,13,18,2)+(1===i?y(9,12):"")}]])},[s,l,c,d,h,p,m,i,a,n,t=>{o(11,g=t.value),f(t.value)},g,u,f]}class Ap extends ar{constructor(t){super(),rr(this,t,Rp,Sp,In,{icon:0,label:1,labelClass:2,hideLabel:3,options:12,selectedIndex:4,onchange:5,optionMapper:6,filter:11,onfilterchange:13})}}const Tp=t=>ct(t,(t=>K(t,6))),Ip=t=>le(t,(t=>K(t,6))),Ep=(t,e,o=1e-4)=>Math.abs(t-e)<o;function Lp(t){let e,o;return e=new Sd({props:{items:t[11]}}),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const n={};2048&o[0]&&(n.items=t[11]),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function zp(t){let e,o,n;return o=new op({props:{$$slots:{default:[Lp]},$$scope:{ctx:t}}}),{c(){e=ei("div"),or(o.$$.fragment),li(e,"slot","header")},m(t,i){Qn(t,e,i),nr(o,e,null),n=!0},p(t,e){const n={};2048&e[0]|2&e[7]&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){n||(Vi(o.$$.fragment,t),n=!0)},o(t){Zi(o.$$.fragment,t),n=!1},d(t){t&&ti(e),ir(o)}}}function Fp(t){let e,o;return e=new $l({props:{onclick:t[88],label:t[4].cropLabelButtonRecenter,icon:t[4].cropIconButtonRecenter,class:"PinturaButtonCenter",disabled:!t[9],hideLabel:!0,style:`opacity: ${t[29]}; transform: translate3d(${t[30].x}px, ${t[30].y}px, 0)`}}),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const n={};16&o[0]&&(n.label=t[4].cropLabelButtonRecenter),16&o[0]&&(n.icon=t[4].cropIconButtonRecenter),512&o[0]&&(n.disabled=!t[9]),1610612736&o[0]&&(n.style=`opacity: ${t[29]}; transform: translate3d(${t[30].x}px, ${t[30].y}px, 0)`),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function Bp(t){let e,o;return e=new lp({props:{rect:t[8],visible:t[12],style:t[1]}}),e.$on("resizestart",t[68]),e.$on("resizemove",t[69]),e.$on("resizeend",t[70]),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const n={};256&o[0]&&(n.rect=t[8]),4096&o[0]&&(n.visible=t[12]),2&o[0]&&(n.style=t[1]),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function Op(t){let e,o;return e=new Mp({props:{width:Math.round(t[13].width),height:Math.round(t[13].height)}}),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const n={};8192&o[0]&&(n.width=Math.round(t[13].width)),8192&o[0]&&(n.height=Math.round(t[13].height)),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function Dp(t){let e,o,n,i,r,a,s,l,c=t[21]&&t[10]&&Fp(t),d=t[21]&&Bp(t),u=t[22]&&Op(t);return{c(){e=ei("div"),o=ei("div"),c&&c.c(),n=ii(),d&&d.c(),r=ii(),u&&u.c(),li(o,"class","PinturaStage"),li(e,"slot","main")},m(h,p){Qn(h,e,p),Yn(e,o),c&&c.m(o,null),Yn(o,n),d&&d.m(o,null),t[161](o),Yn(e,r),u&&u.m(e,null),a=!0,s||(l=[Hn(vs.call(null,o)),ai(o,"measure",t[159]),ai(o,"wheel",(function(){Tn(t[2]&&t[87])&&(t[2]&&t[87]).apply(this,arguments)}),{passive:!1}),ai(o,"interactionstart",t[74]),ai(o,"interactionupdate",t[75]),ai(o,"interactionrelease",t[77]),ai(o,"interactionend",t[76]),Hn(i=Cl.call(null,o,{drag:!0,inertia:!0,pinch:t[2],shouldStartInteraction:qp,getEventPosition:t[162]})),ai(o,"gesturedown",t[84]),ai(o,"gestureupdate",t[85]),ai(o,"gestureup",t[86]),Hn(cp.call(null,o))],s=!0)},p(r,a){(t=r)[21]&&t[10]?c?(c.p(t,a),2098176&a[0]&&Vi(c,1)):(c=Fp(t),c.c(),Vi(c,1),c.m(o,n)):c&&(Hi(),Zi(c,1,1,(()=>{c=null})),Ui()),t[21]?d?(d.p(t,a),2097152&a[0]&&Vi(d,1)):(d=Bp(t),d.c(),Vi(d,1),d.m(o,null)):d&&(Hi(),Zi(d,1,1,(()=>{d=null})),Ui()),i&&Tn(i.update)&&16777220&a[0]&&i.update.call(null,{drag:!0,inertia:!0,pinch:t[2],shouldStartInteraction:qp,getEventPosition:t[162]}),t[22]?u?(u.p(t,a),4194304&a[0]&&Vi(u,1)):(u=Op(t),u.c(),Vi(u,1),u.m(e,null)):u&&(Hi(),Zi(u,1,1,(()=>{u=null})),Ui())},i(t){a||(Vi(c),Vi(d),Vi(u),a=!0)},o(t){Zi(c),Zi(d),Zi(u),a=!1},d(o){o&&ti(e),c&&c.d(),d&&d.d(),t[161](null),u&&u.d(),s=!1,An(l)}}}function _p(t){let e,o,n,i;const r=[{class:"PinturaControlList"},{tabs:t[7]},t[18]];let a={$$slots:{default:[Wp,({tab:t})=>({217:t}),({tab:t})=>[0,0,0,0,0,0,0,t?1:0]]},$$scope:{ctx:t}};for(let t=0;t<r.length;t+=1)a=Sn(a,r[t]);e=new Ds({props:a}),e.$on("select",t[160]);const s=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[17]},t[18]];let l={$$slots:{default:[Hp,({panel:t})=>({216:t}),({panel:t})=>[0,0,0,0,0,0,t?1073741824:0]]},$$scope:{ctx:t}};for(let t=0;t<s.length;t+=1)l=Sn(l,s[t]);return n=new Ys({props:l}),{c(){or(e.$$.fragment),o=ii(),or(n.$$.fragment)},m(t,r){nr(e,t,r),Qn(t,o,r),nr(n,t,r),i=!0},p(t,o){const i=262272&o[0]?Qi(r,[r[0],128&o[0]&&{tabs:t[7]},262144&o[0]&&tr(t[18])]):{};3&o[7]&&(i.$$scope={dirty:o,ctx:t}),e.$set(i);const a=393216&o[0]?Qi(s,[s[0],s[1],131072&o[0]&&{panels:t[17]},262144&o[0]&&tr(t[18])]):{};511721496&o[0]|1073741824&o[6]|2&o[7]&&(a.$$scope={dirty:o,ctx:t}),n.$set(a)},i(t){i||(Vi(e.$$.fragment,t),Vi(n.$$.fragment,t),i=!0)},o(t){Zi(e.$$.fragment,t),Zi(n.$$.fragment,t),i=!1},d(t){ir(e,t),t&&ti(o),ir(n,t)}}}function Wp(t){let e,o,n=t[217].label+"";return{c(){e=ei("span"),o=ni(n)},m(t,n){Qn(t,e,n),Yn(e,o)},p(t,e){1&e[7]&&n!==(n=t[217].label+"")&&di(o,n)},d(t){t&&ti(e)}}}function jp(t){let e,o;return e=new Qh({props:{elasticity:t[25]*t[43],base:Gp,min:t[23],max:Zp,valueMin:t[27][0],valueMax:t[27][1],value:t[28],labelReset:t[4].labelReset,valueLabel:`${Math.round(100*t[28])}%`,oninputstart:t[81],oninputmove:t[82],oninputend:t[83]}}),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const n={};33554432&o[0]&&(n.elasticity=t[25]*t[43]),8388608&o[0]&&(n.min=t[23]),134217728&o[0]&&(n.valueMin=t[27][0]),134217728&o[0]&&(n.valueMax=t[27][1]),268435456&o[0]&&(n.value=t[28]),16&o[0]&&(n.labelReset=t[4].labelReset),268435456&o[0]&&(n.valueLabel=`${Math.round(100*t[28])}%`),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function Np(t){let e,o;return e=new yp({props:{elasticity:t[25]*t[43],rotation:t[14],labelReset:t[4].labelReset,valueMin:t[26][0],valueMax:t[26][1],rotationMin:-t[3],rotationMax:t[3],oninputstart:t[71],oninputmove:t[72],oninputend:t[73]}}),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const n={};33554432&o[0]&&(n.elasticity=t[25]*t[43]),16384&o[0]&&(n.rotation=t[14]),16&o[0]&&(n.labelReset=t[4].labelReset),67108864&o[0]&&(n.valueMin=t[26][0]),67108864&o[0]&&(n.valueMax=t[26][1]),8&o[0]&&(n.rotationMin=-t[3]),8&o[0]&&(n.rotationMax=t[3]),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function Hp(t){let e,o,n,i;const r=[Np,jp],a=[];function s(t,e){return t[216]===t[93]+"-rotation"?0:t[216]===t[93]+"-zoom"?1:-1}return~(e=s(t))&&(o=a[e]=r[e](t)),{c(){o&&o.c(),n=ri()},m(t,o){~e&&a[e].m(t,o),Qn(t,n,o),i=!0},p(t,i){let l=e;e=s(t),e===l?~e&&a[e].p(t,i):(o&&(Hi(),Zi(a[l],1,1,(()=>{a[l]=null})),Ui()),~e?(o=a[e],o?o.p(t,i):(o=a[e]=r[e](t),o.c()),Vi(o,1),o.m(n.parentNode,n)):o=null)},i(t){i||(Vi(o),i=!0)},o(t){Zi(o),i=!1},d(t){~e&&a[e].d(t),t&&ti(n)}}}function Up(t){let e,o,n=t[19]&&_p(t);return{c(){e=ei("div"),n&&n.c(),li(e,"slot","footer"),li(e,"style",t[16])},m(t,i){Qn(t,e,i),n&&n.m(e,null),o=!0},p(t,i){t[19]?n?(n.p(t,i),524288&i[0]&&Vi(n,1)):(n=_p(t),n.c(),Vi(n,1),n.m(e,null)):n&&(Hi(),Zi(n,1,1,(()=>{n=null})),Ui()),(!o||65536&i[0])&&li(e,"style",t[16])},i(t){o||(Vi(n),o=!0)},o(t){Zi(n),o=!1},d(t){t&&ti(e),n&&n.d()}}}function Vp(t){let e,o,n;function i(e){t[163](e)}let r={hasHeader:t[20],$$slots:{footer:[Up],main:[Dp],header:[zp]},$$scope:{ctx:t}};return void 0!==t[15]&&(r.root=t[15]),e=new Xh({props:r}),Si.push((()=>er(e,"root",i))),e.$on("measure",t[164]),{c(){or(e.$$.fragment)},m(t,o){nr(e,t,o),n=!0},p(t,n){const i={};1048576&n[0]&&(i.hasHeader=t[20]),2146402302&n[0]|2&n[7]&&(i.$$scope={dirty:n,ctx:t}),!o&&32768&n[0]&&(o=!0,i.root=t[15],zi((()=>o=!1))),e.$set(i)},i(t){n||(Vi(e.$$.fragment,t),n=!0)},o(t){Zi(e.$$.fragment,t),n=!1},d(t){ir(e,t)}}}const Zp=1,Gp=0,qp=(t,e)=>t.target===e;function Xp(t,e,o){let n,i,r,a,s,l,c,d,u,h,p,m,g,f,$,y,b,x,v,w,C,M,S,P,R,A,T,I,E,L,z,F,j,N,H,U,V,Z,G,q,X,Y,J,Q,et,ot,rt,pt,mt,ft,$t,yt,bt,wt,Mt,St,Lt,zt,Ft,Dt,Wt,jt,Qt,te,ee,ce,de,ue,pe,me,ge,$e,ye=Mn,be=()=>(ye(),ye=En(xe,(t=>o(12,E=t))),xe);t.$$.on_destroy.push((()=>ye()));let{isActive:xe}=e;be();let{stores:ve}=e,{cropImageSelectionCornerStyle:we="circle"}=e,{cropWillRenderImageSelectionGuides:Ce=((t,e)=>{const o="rotate"==t;return{rows:o?5:3,cols:o?5:3,opacity:.25*e}})}=e,{cropAutoCenterImageSelectionTimeout:Me}=e,{cropEnableZoomMatchImageAspectRatio:ke=!0}=e,{cropEnableRotateMatchImageAspectRatio:Se="never"}=e,{cropEnableRotationInput:Pe=!0}=e,{cropEnableZoom:Re=!0}=e,{cropEnableZoomInput:Ae=!0}=e,{cropEnableZoomAutoHide:Te=!0}=e,{cropEnableImageSelection:Ie=!0}=e,{cropEnableInfoIndicator:Ee=!1}=e,{cropEnableZoomTowardsWheelPosition:Le=!0}=e,{cropEnableLimitWheelInputToCropSelection:ze=!0}=e,{cropEnableCenterImageSelection:Fe=!0}=e,{cropEnableButtonRotateLeft:Be=!0}=e,{cropEnableButtonRotateRight:Oe=!1}=e,{cropEnableButtonFlipHorizontal:De=!0}=e,{cropEnableButtonFlipVertical:_e=!1}=e,{cropSelectPresetOptions:We}=e,{cropEnableSelectPreset:je=!0}=e,{cropEnableFilterMatchAspectRatio:Ne=!0}=e,{cropSelectPresetFilter:He=!1}=e,{cropEnableButtonToggleCropLimit:Ue=!1}=e,{cropWillRenderTools:Ve=O}=e,{cropActiveTransformTool:Ze="rotation"}=e,{cropMinimizeToolbar:Ge="auto"}=e,{cropInteractionFocus:qe="image"}=e,{cropRotationRange:Xe=_}=e,{locale:Ye={}}=e;const Ke=Ci("isAnimated");zn(t,Ke,(t=>o(138,L=t)));const Je=Ci("elasticityMultiplier");zn(t,Je,(t=>o(25,de=t)));const Qe=Ci("redrawTrigger");zn(t,Qe,(t=>o(158,ce=t)));const to=Ci("imageIsStatic");zn(t,to,(t=>o(144,Z=t)));const eo=Ci("imageStaticVisualCorners");zn(t,eo,(t=>o(181,Lt=t)));let oo="idle";const no=cr();zn(t,no,(t=>o(155,Qt=t)));const io=()=>void 0===St,ro=t=>1/t,ao=t=>{Ne&&He!==t&&(o(95,He=t),St&&1!==St&&lo()&&Nn(Uo,St=ro(St),St))},lo=()=>{if(1===St||!n)return!1;const t=ro(St);return!!mc(Qt).find((([e])=>e===t))},co=(t,e,o)=>W(o)?e.width===Math.round(t.height)||e.height===Math.round(t.width):e.width===Math.round(t.width)||e.height===Math.round(t.height),uo=t=>{if("never"!==Se&&(io()||"always"===Se&&lo())&&((t,e,o)=>{const n=It(At(vt(e),o),(t=>Math.abs(Math.round(t)))),i=Rt(n),r=Ut(t);return lt(i,r)})(G,pt,mt)&&co(G,pt,mt)){Nn(Io,mt+=t,mt);const e=W(mt),o=e?pt.height:pt.width,n=e?pt.width:pt.height;Nn(Wo,G=Ht(0,0,o,n),G),io()||Nn(Uo,St=B(o,n),St)}else Nn(Io,mt+=t,mt)},{history:ho,env:po,isInteracting:mo,isInteractingFraction:go,isTransformingImage:fo,rootRect:$o,stageRect:yo,utilRect:bo,utilRectPadded:xo,rootLineColor:vo,allowPan:wo,allowZoom:Co,rangeInputElasticity:Mo,presentationScalar:ko,utilTools:So,imagePreviewModifiers:Po,imageOutlineOpacity:Ro,imageFlipX:Ao,imageFlipY:To,imageRotation:Io,imageRotationRange:Eo,imageOutputSize:Lo,imageSelectionRect:zo,imageSelectionRectSnapshot:Fo,imageSelectionRectIntent:Bo,imageSelectionRectPresentation:Oo,imageCropRectIntent:Do,imageCropRectOrigin:_o,imageCropRect:Wo,imageCropMinSize:jo,imageCropMaxSize:No,imageCropRange:Ho,imageCropAspectRatio:Uo,imageCropLimitToImage:Vo,imageSize:Zo,imageScalar:Go,imageOverlayMarkup:qo,stagePadded:Xo,stageRecenter:Yo}=ve;let Ko,Jo,Qo;zn(t,po,(t=>o(139,z=t))),zn(t,mo,(t=>o(143,V=t))),zn(t,fo,(t=>o(175,ot=t))),zn(t,$o,(t=>o(24,yt=t))),zn(t,yo,(t=>o(150,et=t))),zn(t,xo,(t=>o(147,Y=t))),zn(t,ko,(t=>o(146,X=t))),zn(t,So,(t=>o(184,Dt=t))),zn(t,Po,(t=>o(174,H=t))),zn(t,Ao,(t=>o(157,ee=t))),zn(t,To,(t=>o(156,te=t))),zn(t,Io,(t=>o(14,mt=t))),zn(t,Eo,(t=>o(26,ue=t))),zn(t,Lo,(t=>o(185,Wt=t))),zn(t,zo,(t=>o(149,Q=t))),zn(t,Fo,(t=>o(148,J=t))),zn(t,Bo,(t=>o(182,zt=t))),zn(t,Oo,(t=>o(142,U=t))),zn(t,Do,(t=>o(177,bt=t))),zn(t,_o,(t=>o(179,Mt=t))),zn(t,Wo,(t=>o(13,G=t))),zn(t,jo,(t=>o(153,$t=t))),zn(t,No,(t=>o(183,Ft=t))),zn(t,Ho,(t=>o(178,wt=t))),zn(t,Uo,(t=>o(180,St=t))),zn(t,Vo,(t=>o(152,ft=t))),zn(t,Zo,(t=>o(151,pt=t))),zn(t,Go,(t=>o(145,q=t))),zn(t,qo,(t=>o(173,j=t))),zn(t,Xo,(t=>o(141,N=t)));const tn=(t,e)=>{const o={target:t,translate:e};let n,i=mp(J,o,{aspectRatio:St});if(Z){if(i=hp(J,o,Y,{aspectRatio:St,minSize:Jo,maxSize:Qo}),i=((t,e,o)=>{const[n,i,r,a]=ae(t),s={...t};if(n<e.y&&(t.height=t.height-(e.y-n),t.y=e.y),i>e.x+e.width&&(t.width=e.x+e.width-t.x),r>e.y+e.height&&(t.height=e.y+e.height-t.y),a<e.x&&(t.width=t.width-(e.x-a),t.x=e.x),o){const e=Math.min(1,s.width/t.width,s.height/t.height);return Xt(s,e)}return t})(i,{...Y,x:0,y:0},St),!ft)return{boundsLimited:i,boundsIntent:i};let t=((t,e,o,n,i={})=>{const{aspectRatio:r}=i;t=Ip(t),n=n.map(Tp);const a=qt(t,dp[o.target]),s=ct(a,(t=>K(t,6))),l=r?ie(i.minSize,r):i.minSize,c=r?re(i.maxSize,r):i.maxSize,d=qt(e,o.target);if(gt(d,a)<1){e=Ot(t);const o=Math.min(l.width/t.width,l.height/t.height);Zt(e,o,a)}e=Gt(Ot(e),l,c,a);let u=Ot(e);e=Ip(e);const h=fe(n,1),p=se(t),m=se(e),g=p.findIndex((t=>lt(ct(t,(t=>K(t,6))),s))),f=t=>h.map((e=>he(e,t))).filter(Boolean).pop();if(r){const e=m.map(((t,e)=>{if(e===g)return;const o=tt(a.x-t.x,a.y-t.y);st(o),ht(o,.5);const n=tt(a.x-o.x,a.y-o.y),i=Et(n,Tp(t)),r=f(i);if(!r)return;const s=p[e];return{intersection:r,cornerDist:gt(a,s),intersectionDist:gt(a,r)}})).filter(Boolean);if(e.length){const o=e.reduce(((t,e)=>{const o=e.intersectionDist/e.cornerDist;return o<t?o:t}),Number.MAX_SAFE_INTEGER);u=Ot(t),Zt(u,o,a)}}else{const t=1===o.target.length,i=!(n[0].y===n[1].y||n[0].x===n[1].x),r=p.map(((e,o)=>{if(o===g)return;const n=m[o],r=!Ep(n.x,s.x)&&!Ep(n.y,s.y);if(!t&&!i&&r)return;if(t&&(Ep(n.x,s.x)||Ep(n.y,s.y)))return;const l=nt(t?e:a),c=ut(nt(l),n);st(c),ht(c,.5),t?dt(l,c):ut(l,c);const d=Et(l,n);return f(d)||void 0})).filter(Boolean);if(r.length){const[t,n,i,l]=up(o.target);let[c,d,h,p]=ae(e);r.forEach((({x:e,y:o})=>{const r=K(e,6),a=K(o,6);i&&!Ep(a,s.y)&&(c=Math.max(c,o)),t&&!Ep(r,s.x)&&(d=Math.min(d,e)),l&&!Ep(a,s.y)&&(h=Math.min(h,o)),n&&!Ep(r,s.x)&&(p=Math.max(p,e))})),u=Bt(($=[c,d,h,p])[3],$[0],$[1]-$[3],$[2]-$[0]),Zt(u,.9999,a)}}var $;return Gt(u,l,c,a),u})(J,i,o,Lt,{aspectRatio:St,minSize:Jo,maxSize:Qo});return{boundsLimited:t,boundsIntent:t}}const r=Ct(Yt(Ot(i),X));if(r.width<$t.width||r.height<$t.height){const o=e.y<0,i=e.x>0,a=e.x<0,s=e.y>0,l="t"===t&&o||"r"===t&&i||"b"===t&&s||"l"===t&&a||"tr"===t&&(i||o)||"tl"===t&&(a||o)||"br"===t&&(i||s)||"bl"===t&&(a||s),c=Jt(r),d=kr(pt,mt,c);if(l&&(d.width<$t.width||d.height<$t.height)){if(0!==mt){const t=Math.sign(mt),e=Math.round(Math.abs(mt)/D)*D,o=mt-t*e,n=e/D%2==1,i=n?pt.height:pt.width,a=n?pt.width:pt.height,s=Math.abs(o),l=Math.sin(s),c=Math.cos(s);if(r.width<$t.width){r.width=$t.width;const t=i-(c*r.width+l*r.height),e=a-(l*r.width+c*r.height);t<e?r.height=(i-c*r.width)/l:e<t&&(r.height=(a-l*r.width)/c)}if(r.height<$t.height){r.height=$t.height;const t=i-(c*r.width+l*r.height),e=a-(l*r.width+c*r.height);t<e?r.width=(i-l*r.height)/c:e<t&&(r.width=(a-c*r.height)/l)}}else r.width<$t.width&&(r.width=$t.width,r.height=pt.height),r.height<$t.height&&(r.height=$t.height,r.width=pt.width);n=Jt(r)}}return n&&(i=mp(J,o,{aspectRatio:n||St})),{boundsLimited:hp(J,o,Y,{aspectRatio:St||n,minSize:Jo,maxSize:Qo}),boundsIntent:i}};let en,on;const nn=({translation:t,scalar:e})=>{Z&&(e=1,t=it(nt(t)));const o=Math.min(Q.width/G.width,Q.height/G.height),n=ht(nt(t),1/o);let i;if(on){const e=ut(nt(on),t);on=t,i=Vt(Ot(G),e)}else i=Vt(Ot(en),it(nt(n))),void 0!==e&&Zt(i,1/e);Nn(Do,bt=i,bt),Nn(Wo,G=i,G)},rn=dr([Ho,Wo],(([t,e],o)=>{if(!e)return;const[n,i]=t,r=Jt(e);o([Ct(le(ie(n,r),K)),Ct(le(re(i,r),K))])}));zn(t,rn,(t=>o(176,rt=t)));const an=dr([Zo,Vo,jo,No,Ho,Io],(([t,e,o,n,i,r],a)=>{if(!t)return;const s=i[0],l=i[1];let c,d;e?(c=((t,e,o)=>W(o)?1-1/Math.min(t.height/e.width,t.width/e.height):1-1/Math.min(t.width/e.width,t.height/e.height))(t,l,r),d=Math.min(s.width/o.width,s.height/o.height)):(c=-1,d=1),a([c,d].map((t=>K(t))))}));zn(t,an,(t=>o(27,pe=t)));const sn=dr([Zo,Wo,Ho,Io],(([t,e,o,n],i)=>{if(!t||!e)return i(0);let r;const a=o[0],s=o[1],l=e.width,c=e.height,d=Jt(e),u=W(n)?kt(t.height,t.width):t,h=re(u,d);if(l<=h.width||c<=h.height){const t=h.width-a.width,e=h.height-a.height;r=0===t||0===e?1:1-Math.min((l-a.width)/t,(c-a.height)/e)}else{const t=s.width-h.width,e=s.height-h.height,o=re({width:t,height:e},d);r=-Math.min((l-h.width)/o.width,(c-h.height)/o.height)}i(r)}));zn(t,sn,(t=>o(28,me=t)));const ln=t=>{const e=Jt(en);let o,n,i;const r=W(mt)?kt(pt.height,pt.width):pt,a=re(r,e);if(t>=0){const r=a.width-wt[0].width,s=a.height-wt[0].height;o=a.width-r*t,n=a.height-s*t,i=ie({width:o,height:n},e)}else{const r=wt[1].width-a.width,s=wt[1].height-a.height;o=a.width+r*-t,n=a.height+s*-t,i=re({width:o,height:n},e)}o=i.width,n=i.height;const s=en.x+.5*en.width-.5*o,l=en.y+.5*en.height-.5*n;Nn(Wo,G={x:s,y:l,width:o,height:n},G)};let cn;const dn=t=>{const e=Zt(Ot(cn),1/t);Nn(Do,bt=e,bt),Nn(Wo,G=e,G)};let un;vi();const hn=()=>{Yo.set({})};let pn;const mn=cs(0,{precision:1e-4});zn(t,mn,(t=>o(29,ge=t)));const gn=cs();zn(t,gn,(t=>o(30,$e=t)));const fn=dr([Uo,Lo,no],(([t,e,o],i)=>{if(!n)return;const r=mc(o),a=[...r].map((t=>t[0])).sort(((t,e)=>so(t[0])&&!so(e[0])?1:-1)).find((o=>{if(so(o)&&e){const[n,i]=o,r=e.width===n&&e.height===i,a=t===B(n,i);return r&&a}return o===t}));if(!a)return i(void 0);i(r.map((t=>t[0])).findIndex((t=>so(t)?Ir(t,a):t===a)))}));zn(t,fn,(t=>o(154,jt=t)));const $n=(t,e)=>{if(!n||-1===t||void 0===t)return;const o=mc(e)[t][0];return o?so(o)?B(o[0],o[1]):o:void 0},yn=dr([vo,Oo,go],(([t,e,o],n)=>{const{rows:i,cols:r,opacity:a}=Ce(oo,o);if(!e||a<=0)return n([]);const{x:s,y:l,width:c,height:d}=e,u=c/r,h=d/i,p=[];for(let e=1;e<=i-1;e++){const o=l+h*e;p.push({id:`image-selection-guide-row-${e}`,points:[tt(s,o),tt(s+c,o)],opacity:a,strokeWidth:1,strokeColor:t})}for(let e=1;e<=r-1;e++){const o=s+u*e;p.push({id:`image-selection-guide-col-${e}`,points:[tt(o,l),tt(o,l+d)],opacity:a,strokeWidth:1,strokeColor:t})}n(p)}));zn(t,yn,(t=>o(140,F=t)));const bn=`crop-${k()}`;let xn,vn,wn=bn+"-zoom",Cn=wn;const kn=cs(L?20:0);return zn(t,kn,(t=>o(137,I=t))),t.$$set=t=>{"isActive"in t&&be(o(0,xe=t.isActive)),"stores"in t&&o(97,ve=t.stores),"cropImageSelectionCornerStyle"in t&&o(1,we=t.cropImageSelectionCornerStyle),"cropWillRenderImageSelectionGuides"in t&&o(98,Ce=t.cropWillRenderImageSelectionGuides),"cropAutoCenterImageSelectionTimeout"in t&&o(99,Me=t.cropAutoCenterImageSelectionTimeout),"cropEnableZoomMatchImageAspectRatio"in t&&o(100,ke=t.cropEnableZoomMatchImageAspectRatio),"cropEnableRotateMatchImageAspectRatio"in t&&o(101,Se=t.cropEnableRotateMatchImageAspectRatio),"cropEnableRotationInput"in t&&o(102,Pe=t.cropEnableRotationInput),"cropEnableZoom"in t&&o(2,Re=t.cropEnableZoom),"cropEnableZoomInput"in t&&o(103,Ae=t.cropEnableZoomInput),"cropEnableZoomAutoHide"in t&&o(104,Te=t.cropEnableZoomAutoHide),"cropEnableImageSelection"in t&&o(105,Ie=t.cropEnableImageSelection),"cropEnableInfoIndicator"in t&&o(106,Ee=t.cropEnableInfoIndicator),"cropEnableZoomTowardsWheelPosition"in t&&o(107,Le=t.cropEnableZoomTowardsWheelPosition),"cropEnableLimitWheelInputToCropSelection"in t&&o(108,ze=t.cropEnableLimitWheelInputToCropSelection),"cropEnableCenterImageSelection"in t&&o(109,Fe=t.cropEnableCenterImageSelection),"cropEnableButtonRotateLeft"in t&&o(110,Be=t.cropEnableButtonRotateLeft),"cropEnableButtonRotateRight"in t&&o(111,Oe=t.cropEnableButtonRotateRight),"cropEnableButtonFlipHorizontal"in t&&o(112,De=t.cropEnableButtonFlipHorizontal),"cropEnableButtonFlipVertical"in t&&o(113,_e=t.cropEnableButtonFlipVertical),"cropSelectPresetOptions"in t&&o(114,We=t.cropSelectPresetOptions),"cropEnableSelectPreset"in t&&o(115,je=t.cropEnableSelectPreset),"cropEnableFilterMatchAspectRatio"in t&&o(116,Ne=t.cropEnableFilterMatchAspectRatio),"cropSelectPresetFilter"in t&&o(95,He=t.cropSelectPresetFilter),"cropEnableButtonToggleCropLimit"in t&&o(117,Ue=t.cropEnableButtonToggleCropLimit),"cropWillRenderTools"in t&&o(118,Ve=t.cropWillRenderTools),"cropActiveTransformTool"in t&&o(119,Ze=t.cropActiveTransformTool),"cropMinimizeToolbar"in t&&o(120,Ge=t.cropMinimizeToolbar),"cropInteractionFocus"in t&&o(121,qe=t.cropInteractionFocus),"cropRotationRange"in t&&o(3,Xe=t.cropRotationRange),"locale"in t&&o(4,Ye=t.locale)},t.$$.update=()=>{4096&t.$$.dirty[0]|268435456&t.$$.dirty[3]&&to.set("selection"===qe&&E),2097152&t.$$.dirty[3]&&o(128,n=We&&Array.isArray(We)&&We.length),2097152&t.$$.dirty[3]|16&t.$$.dirty[4]&&no.set(n?We:[]),4096&t.$$.dirty[0]&&E&&Ro.set(1),4096&t.$$.dirty[0]&&wo.set(!E),4096&t.$$.dirty[0]&&Co.set(!E),32768&t.$$.dirty[4]&&o(123,p="overlay"===z.layoutMode),1077936128&t.$$.dirty[3]&&o(127,v=je&&!p),41943040&t.$$.dirty[4]&&o(136,l=Y&&Q&&oe(Y,Q)),33558528&t.$$.dirty[4]&&o(134,c=!(!Q||!l)),33559552&t.$$.dirty[4]&&o(132,d=c&&Kt(Q,l,(t=>K(t,5)))),16400&t.$$.dirty[0]|52297732&t.$$.dirty[3]|2013298968&t.$$.dirty[4]|15&t.$$.dirty[5]&&o(11,i=ce&&Ve([v&&n&&[!1===He?"Dropdown":Ap,"select-preset",{icon:fc(Ye.cropIconSelectPreset,Ye,$n(jt,Qt)),label:fc(Ye.cropLabelSelectPreset,Ye,$n(jt,Qt)),labelClass:"PinturaToolbarContentWide",options:Qt,filter:He,onfilterchange:ao,selectedIndex:jt,onchange:({value:t})=>{var e;so(t)?(Nn(Uo,St=B(t[0],t[1]),St),Nn(Lo,Wt=xt((e=t)[0],e[1]),Wt)):Nn(Uo,St=t,St),d&&hn(),ho.write()},optionMapper:t=>{let e=!1;const o=so(t.value)?t.value[0]/t.value[1]:t.value;if(o){const t=kr(pt,mt,o);e=t.width<$t.width||t.height<$t.height}return t.icon=((t,e={})=>{const{width:o=24,height:n=24,bounds:i=16,radius:r=3}=e;let a,s,l,c,d=so(t)?B(t[0],t[1]):t,u=!!d;return d=u?d:1,l=d>1?i:d*i,c=l/d,a=Math.round(.5*(o-l)),s=Math.round(.5*(n-c)),`<rect fill="${u?"currentColor":"none"}" stroke="${u?"none":"currentColor"}" stroke-width="${o/16}" stroke-dasharray="${[o/12,o/6].join(" ")}" x="${a}" y="${s}" width="${l}" height="${c}" rx="${r}"/>`})(t.value,{bounds:14}),{...t,disabled:e}}}],Ue&&["Dropdown","select-crop-limit",{icon:fc(Ye.cropIconCropBoundary,Ye,ft),label:Ye.cropLabelCropBoundary,labelClass:"PinturaToolbarContentWide",onchange:({value:t})=>{Nn(Vo,ft=t,ft),ho.write()},options:[[!0,Ye.cropLabelCropBoundaryEdge,{icon:fc(Ye.cropIconCropBoundary,Ye,!0)}],[!1,Ye.cropLabelCropBoundaryNone,{icon:fc(Ye.cropIconCropBoundary,Ye,!1)}]]}],Be&&["Button","rotate-left",{label:Ye.cropLabelButtonRotateLeft,labelClass:"PinturaToolbarContentWide",icon:Ye.cropIconButtonRotateLeft,onclick:()=>{uo(-Math.PI/2),ho.write()}}],Oe&&["Button","rotate-right",{label:Ye.cropLabelButtonRotateRight,labelClass:"PinturaToolbarContentWide",icon:Ye.cropIconButtonRotateRight,onclick:()=>{uo(Math.PI/2),ho.write()}}],De&&["Button","flip-horizontal",{label:Ye.cropLabelButtonFlipHorizontal,labelClass:"PinturaToolbarContentWide",icon:Ye.cropIconButtonFlipHorizontal,onclick:()=>{W(mt)?Nn(To,te=!te,te):Nn(Ao,ee=!ee,ee),ho.write()}}],_e&&["Button","flip-vertical",{label:Ye.cropLabelButtonFlipVertical,labelClass:"PinturaToolbarContentWide",icon:Ye.cropIconButtonFlipVertical,onclick:()=>{W(mt)?Nn(Ao,ee=!ee,ee):Nn(To,te=!te,te),ho.write()}}]].filter(Boolean),z,(()=>Qe.set({}))).filter(Boolean)),6144&t.$$.dirty[0]|1207959552&t.$$.dirty[3]|32768&t.$$.dirty[4]&&Nn(So,Dt=E&&"never"!==Ge&&("always"===Ge||"short"===z.verticalSpace||p)?i.map((([t,e,o])=>Array.isArray(o)?[t,e,o]:[t,e,{...o,hideLabel:!0}])):[],Dt),268435456&t.$$.dirty[4]&&o(23,r=ft?0:-1),75497472&t.$$.dirty[4]&&o(129,a=Y&&tt(-(et.x-Y.x),-(et.y-Y.y))),262176&t.$$.dirty[4]&&o(130,s=U&&tt(Kl(U.x+.5*U.width+a.x),Kl(U.y+.5*U.height+a.y))),16777216&t.$$.dirty[4]&&o(133,u=null!=J),8392704&t.$$.dirty[4]&&o(135,h=Y&&l&&(l.height===Y.height||l.width===Y.width)),6293504&t.$$.dirty[4]&&o(131,m=!h&&X<1&&q<1),1920&t.$$.dirty[4]&&o(9,g=c&&!u&&(!d||m)),8192&t.$$.dirty[0]|1073750016&t.$$.dirty[3]&&o(22,f=Ee&&!!G&&!p),262176&t.$$.dirty[4]&&o(8,b=U&&a&&{x:U.x+a.x,y:U.y+a.y,width:U.width,height:U.height}),256&t.$$.dirty[0]|1073745920&t.$$.dirty[3]&&o(21,$=Ie&&!!b&&!p),65600&t.$$.dirty[3]|1048640&t.$$.dirty[4]&&o(10,y=Fe&&!!s&&!Me&&!Z),512&t.$$.dirty[0]|536870976&t.$$.dirty[3]|524288&t.$$.dirty[4]&&g&&Me&&!V&&(clearTimeout(pn),o(122,pn=setTimeout(hn,Me))),536870912&t.$$.dirty[3]|524288&t.$$.dirty[4]&&V&&clearTimeout(pn),1536&t.$$.dirty[0]|16384&t.$$.dirty[4]&&mn.set(y&&g?1:0,{hard:!1===L}),16448&t.$$.dirty[4]&&gn.set(s,{hard:!1===L}),4096&t.$$.dirty[0]|131072&t.$$.dirty[4]&&(E&&!N?(Nn(Po,H.crop={maskOpacity:.85,maskMarkupOpacity:.85},H),Po.set(H)):(delete H.crop,Po.set(H))),65536&t.$$.dirty[4]&&F&&(()=>{const t=j.filter((t=>!/^image\-selection\-guide/.test(t.id)));Nn(qo,j=E?[...t,...F]:t,j)})(),32768&t.$$.dirty[4]&&o(126,x="short"!==z.verticalSpace),1207959552&t.$$.dirty[3]|4&t.$$.dirty[4]&&o(20,w="never"===Ge&&!p||x&&"always"!==Ge),4&t.$$.dirty[0]|1024&t.$$.dirty[3]&&o(125,C=Re&&Ae),2048&t.$$.dirty[3]|6&t.$$.dirty[4]&&o(124,M=Te?x&&C:C),512&t.$$.dirty[3]|1&t.$$.dirty[4]&&o(19,S=Pe||M),1&t.$$.dirty[4]&&(M||o(5,Cn=wn)),32&t.$$.dirty[0]&&o(18,P={name:bn,selected:Cn}),16&t.$$.dirty[0]|512&t.$$.dirty[3]|1&t.$$.dirty[4]&&o(7,R=[M&&{id:bn+"-zoom",label:Ye.cropLabelTabZoom},Pe&&{id:bn+"-rotation",label:Ye.cropLabelTabRotation}].filter(Boolean)),128&t.$$.dirty[0]&&o(17,A=R.map((t=>t.id))),64&t.$$.dirty[0]|1073741824&t.$$.dirty[3]&&vn&&!vn.children.length&&p&&vn.dispatchEvent(new CustomEvent("measure",{detail:vn.rect})),4096&t.$$.dirty[0]|16384&t.$$.dirty[4]&&L&&kn.set(E?0:20),8192&t.$$.dirty[4]&&o(16,T=I?`transform: translateY(${I}px)`:void 0)},[xe,we,Re,Xe,Ye,Cn,vn,R,b,g,y,i,E,G,mt,xn,T,A,P,S,w,$,f,r,yt,de,ue,pe,me,ge,$e,Ke,Je,Qe,to,eo,no,po,mo,fo,$o,yo,xo,Mo,ko,So,Po,Ao,To,Io,Eo,Lo,zo,Fo,Bo,Oo,Do,_o,Wo,jo,No,Ho,Uo,Vo,Zo,Go,qo,Xo,()=>{oo="select",Nn(mo,V=!0,V),Nn(Fo,J=Ot(Q),J),Ko=X,Jo=Pt(vt($t),Ko),Qo=Pt(vt(Ft),Ko)},({detail:t})=>{const{boundsLimited:e,boundsIntent:o}=tn(t.direction,t.translation);Nn(fo,ot=!0,ot),Nn(Bo,zt=o,zt),Nn(zo,Q=e,Q)},({detail:t})=>{const{boundsLimited:e}=tn(t.direction,t.translation);Nn(fo,ot=!1,ot),Nn(mo,V=!1,V),Nn(Bo,zt=void 0,zt),at(t.translation)&&(Nn(zo,Q=e,Q),ho.write()),Nn(Fo,J=void 0,J),oo=void 0},()=>{oo="rotate",Nn(mo,V=!0,V),Nn(_o,Mt=Ot(G),Mt)},t=>{Nn(fo,ot=!0,ot),Nn(Io,mt=t,mt)},t=>{Nn(fo,ot=!1,ot),Nn(mo,V=!1,V),Nn(Io,mt=t,mt),ho.write(),Nn(_o,Mt=void 0,Mt)},()=>{oo="pan",on=void 0,Nn(mo,V=!0,V),en=Ot(G)},({detail:t})=>{Nn(fo,ot=!0,ot),nn(t)},({detail:t})=>{Nn(fo,ot=!1,ot),Nn(mo,V=!1,V),(at(t.translation)>0||0!==t.scalar)&&(nn(t),ho.write()),Nn(Do,bt=void 0,bt),en=void 0},({detail:{translation:t}})=>{Z&&(t=it(nt(t))),on=t,Nn(mo,V=!1,V)},rn,an,sn,()=>{oo="zoom",Nn(mo,V=!0,V),en=Ot(G)},t=>{Nn(fo,ot=!1,ot),ln(t)},t=>{ln(t),ho.write(),Nn(fo,ot=!1,ot),Nn(mo,V=!1,V),en=void 0},()=>{oo="zoom",en||(cn=Ot(G),Nn(mo,V=!0,V))},({detail:t})=>{cn&&(Nn(fo,ot=!0,ot),dn(t))},({detail:t})=>{cn&&(Nn(fo,ot=!1,ot),Nn(mo,V=!1,V),dn(t),Nn(Do,bt=void 0,bt),cn=void 0,ho.write())},t=>{const e=Vd(t,yt,et);if(ze&&!ne(Q,e))return;oo="zoom",Nn(mo,V=!0,V),Nn(fo,ot=!0,ot),t.preventDefault(),t.stopPropagation();const o=Rl(t),n=1+o/100,i=Ot(G),r=1===Math.min(G.width/$t.width,G.height/$t.height);if(ke&&ft){const t=co(G,pt,mt);if(io()&&t&&o>0&&d){Nn(mo,V=!1,V),Nn(fo,ot=!1,ot);const t=W(mt)?_t({height:pt.width,width:pt.height}):_t(pt);if(Kt(i,t))return;if(clearTimeout(un),Kt(ho.state.crop,t))return;return Nn(Wo,G=t,G),void ho.write()}}let a=Ut(G);if(Le&&"selection"!==qe&&o<0&&!r){const t=ut(nt(e),Q),o=Math.min(Q.width/G.width,Q.height/G.height),n=Zt(Ot(Q),1.1);a=ne(n,e)?dt(Ot(G),ht(t,1/o)):a}let s=Zt(Ot(G),n,a);if(Tt(rt[1],s)||(s=Nt(Ut(s),rt[1])),Tt(s,rt[0])||(s=Nt(Ut(s),rt[0])),Kt(i,s,K))return Nn(mo,V=!1,V),void Nn(fo,ot=!1,ot);Nn(Wo,G=le(s,(t=>K(t,5))),G),Nn(mo,V=!1,V),Nn(fo,ot=!1,ot),clearTimeout(un),un=setTimeout((()=>{ho.write()}),500)},hn,mn,gn,fn,yn,bn,kn,He,"crop",ve,Ce,Me,ke,Se,Pe,Ae,Te,Ie,Ee,Le,ze,Fe,Be,Oe,De,_e,We,je,Ne,Ue,Ve,Ze,Ge,qe,pn,p,M,C,x,v,n,a,s,m,d,u,c,h,l,I,L,z,F,N,U,V,Z,q,X,Y,J,Q,et,pt,ft,$t,jt,Qt,te,ee,ce,function(e){Mi.call(this,t,e)},({detail:t})=>o(5,Cn=t),function(t){Si[t?"unshift":"push"]((()=>{vn=t,o(6,vn)}))},t=>Ud(t),function(t){xn=t,o(15,xn)},function(e){Mi.call(this,t,e)}]}var Yp={util:["crop",class extends ar{constructor(t){super(),rr(this,t,Xp,Vp,In,{name:96,isActive:0,stores:97,cropImageSelectionCornerStyle:1,cropWillRenderImageSelectionGuides:98,cropAutoCenterImageSelectionTimeout:99,cropEnableZoomMatchImageAspectRatio:100,cropEnableRotateMatchImageAspectRatio:101,cropEnableRotationInput:102,cropEnableZoom:2,cropEnableZoomInput:103,cropEnableZoomAutoHide:104,cropEnableImageSelection:105,cropEnableInfoIndicator:106,cropEnableZoomTowardsWheelPosition:107,cropEnableLimitWheelInputToCropSelection:108,cropEnableCenterImageSelection:109,cropEnableButtonRotateLeft:110,cropEnableButtonRotateRight:111,cropEnableButtonFlipHorizontal:112,cropEnableButtonFlipVertical:113,cropSelectPresetOptions:114,cropEnableSelectPreset:115,cropEnableFilterMatchAspectRatio:116,cropSelectPresetFilter:95,cropEnableButtonToggleCropLimit:117,cropWillRenderTools:118,cropActiveTransformTool:119,cropMinimizeToolbar:120,cropInteractionFocus:121,cropRotationRange:3,locale:4},null,[-1,-1,-1,-1,-1,-1,-1,-1])}get name(){return this.$$.ctx[96]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),Di()}get stores(){return this.$$.ctx[97]}set stores(t){this.$$set({stores:t}),Di()}get cropImageSelectionCornerStyle(){return this.$$.ctx[1]}set cropImageSelectionCornerStyle(t){this.$$set({cropImageSelectionCornerStyle:t}),Di()}get cropWillRenderImageSelectionGuides(){return this.$$.ctx[98]}set cropWillRenderImageSelectionGuides(t){this.$$set({cropWillRenderImageSelectionGuides:t}),Di()}get cropAutoCenterImageSelectionTimeout(){return this.$$.ctx[99]}set cropAutoCenterImageSelectionTimeout(t){this.$$set({cropAutoCenterImageSelectionTimeout:t}),Di()}get cropEnableZoomMatchImageAspectRatio(){return this.$$.ctx[100]}set cropEnableZoomMatchImageAspectRatio(t){this.$$set({cropEnableZoomMatchImageAspectRatio:t}),Di()}get cropEnableRotateMatchImageAspectRatio(){return this.$$.ctx[101]}set cropEnableRotateMatchImageAspectRatio(t){this.$$set({cropEnableRotateMatchImageAspectRatio:t}),Di()}get cropEnableRotationInput(){return this.$$.ctx[102]}set cropEnableRotationInput(t){this.$$set({cropEnableRotationInput:t}),Di()}get cropEnableZoom(){return this.$$.ctx[2]}set cropEnableZoom(t){this.$$set({cropEnableZoom:t}),Di()}get cropEnableZoomInput(){return this.$$.ctx[103]}set cropEnableZoomInput(t){this.$$set({cropEnableZoomInput:t}),Di()}get cropEnableZoomAutoHide(){return this.$$.ctx[104]}set cropEnableZoomAutoHide(t){this.$$set({cropEnableZoomAutoHide:t}),Di()}get cropEnableImageSelection(){return this.$$.ctx[105]}set cropEnableImageSelection(t){this.$$set({cropEnableImageSelection:t}),Di()}get cropEnableInfoIndicator(){return this.$$.ctx[106]}set cropEnableInfoIndicator(t){this.$$set({cropEnableInfoIndicator:t}),Di()}get cropEnableZoomTowardsWheelPosition(){return this.$$.ctx[107]}set cropEnableZoomTowardsWheelPosition(t){this.$$set({cropEnableZoomTowardsWheelPosition:t}),Di()}get cropEnableLimitWheelInputToCropSelection(){return this.$$.ctx[108]}set cropEnableLimitWheelInputToCropSelection(t){this.$$set({cropEnableLimitWheelInputToCropSelection:t}),Di()}get cropEnableCenterImageSelection(){return this.$$.ctx[109]}set cropEnableCenterImageSelection(t){this.$$set({cropEnableCenterImageSelection:t}),Di()}get cropEnableButtonRotateLeft(){return this.$$.ctx[110]}set cropEnableButtonRotateLeft(t){this.$$set({cropEnableButtonRotateLeft:t}),Di()}get cropEnableButtonRotateRight(){return this.$$.ctx[111]}set cropEnableButtonRotateRight(t){this.$$set({cropEnableButtonRotateRight:t}),Di()}get cropEnableButtonFlipHorizontal(){return this.$$.ctx[112]}set cropEnableButtonFlipHorizontal(t){this.$$set({cropEnableButtonFlipHorizontal:t}),Di()}get cropEnableButtonFlipVertical(){return this.$$.ctx[113]}set cropEnableButtonFlipVertical(t){this.$$set({cropEnableButtonFlipVertical:t}),Di()}get cropSelectPresetOptions(){return this.$$.ctx[114]}set cropSelectPresetOptions(t){this.$$set({cropSelectPresetOptions:t}),Di()}get cropEnableSelectPreset(){return this.$$.ctx[115]}set cropEnableSelectPreset(t){this.$$set({cropEnableSelectPreset:t}),Di()}get cropEnableFilterMatchAspectRatio(){return this.$$.ctx[116]}set cropEnableFilterMatchAspectRatio(t){this.$$set({cropEnableFilterMatchAspectRatio:t}),Di()}get cropSelectPresetFilter(){return this.$$.ctx[95]}set cropSelectPresetFilter(t){this.$$set({cropSelectPresetFilter:t}),Di()}get cropEnableButtonToggleCropLimit(){return this.$$.ctx[117]}set cropEnableButtonToggleCropLimit(t){this.$$set({cropEnableButtonToggleCropLimit:t}),Di()}get cropWillRenderTools(){return this.$$.ctx[118]}set cropWillRenderTools(t){this.$$set({cropWillRenderTools:t}),Di()}get cropActiveTransformTool(){return this.$$.ctx[119]}set cropActiveTransformTool(t){this.$$set({cropActiveTransformTool:t}),Di()}get cropMinimizeToolbar(){return this.$$.ctx[120]}set cropMinimizeToolbar(t){this.$$set({cropMinimizeToolbar:t}),Di()}get cropInteractionFocus(){return this.$$.ctx[121]}set cropInteractionFocus(t){this.$$set({cropInteractionFocus:t}),Di()}get cropRotationRange(){return this.$$.ctx[3]}set cropRotationRange(t){this.$$set({cropRotationRange:t}),Di()}get locale(){return this.$$.ctx[4]}set locale(t){this.$$set({locale:t}),Di()}}]};function Kp(t){let e,o,n,i,r,a,s,l=t[76],c=(w(t[76].label)?t[76].label(t[2]):t[76].label)+"";function d(...e){return t[51](t[76],...e)}const u=()=>t[52](o,l),h=()=>t[52](null,l);return{c(){e=ei("div"),o=ei("div"),n=ii(),i=ei("span"),r=ni(c),li(o,"class",em),li(e,"slot","option"),li(e,"class","PinturaFilterOption")},m(t,l){Qn(t,e,l),Yn(e,o),u(),Yn(e,n),Yn(e,i),Yn(i,r),a||(s=[ai(o,"measure",d),Hn(vs.call(null,o))],a=!0)},p(e,o){l!==(t=e)[76]&&(h(),l=t[76],u()),4&o[0]|16384&o[2]&&c!==(c=(w(t[76].label)?t[76].label(t[2]):t[76].label)+"")&&di(r,c)},d(t){t&&ti(e),h(),a=!1,An(s)}}}function Jp(t){let e,o;return e=new Uc({props:{locale:t[2],layout:"row",options:t[3],selectedIndex:t[12],onchange:t[32],$$slots:{option:[Kp,({option:t})=>({76:t}),({option:t})=>[0,0,t?16384:0]]},$$scope:{ctx:t}}}),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const n={};4&o[0]&&(n.locale=t[2]),8&o[0]&&(n.options=t[3]),4096&o[0]&&(n.selectedIndex=t[12]),1028&o[0]|49152&o[2]&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function Qp(t){let e,o,n,i,r,a,s,l;function c(e){t[54](e)}function d(e){t[55](e)}function u(e){t[56](e)}let h={elasticity:t[13]*t[19],onscroll:t[53],$$slots:{default:[Jp]},$$scope:{ctx:t}};return void 0!==t[4]&&(h.maskFeatherStartOpacity=t[4]),void 0!==t[5]&&(h.maskFeatherEndOpacity=t[5]),void 0!==t[6]&&(h.maskFeatherSize=t[6]),o=new El({props:h}),Si.push((()=>er(o,"maskFeatherStartOpacity",c))),Si.push((()=>er(o,"maskFeatherEndOpacity",d))),Si.push((()=>er(o,"maskFeatherSize",u))),o.$on("measure",t[57]),{c(){e=ei("div"),or(o.$$.fragment),li(e,"slot","footer"),li(e,"style",t[11])},m(n,i){Qn(n,e,i),nr(o,e,null),a=!0,s||(l=[ai(e,"transitionend",t[30]),ai(e,"measure",t[58]),Hn(vs.call(null,e,{observePosition:!0}))],s=!0)},p(t,s){const l={};8192&s[0]&&(l.elasticity=t[13]*t[19]),128&s[0]&&(l.onscroll=t[53]),5132&s[0]|32768&s[2]&&(l.$$scope={dirty:s,ctx:t}),!n&&16&s[0]&&(n=!0,l.maskFeatherStartOpacity=t[4],zi((()=>n=!1))),!i&&32&s[0]&&(i=!0,l.maskFeatherEndOpacity=t[5],zi((()=>i=!1))),!r&&64&s[0]&&(r=!0,l.maskFeatherSize=t[6],zi((()=>r=!1))),o.$set(l),(!a||2048&s[0])&&li(e,"style",t[11])},i(t){a||(Vi(o.$$.fragment,t),a=!0)},o(t){Zi(o.$$.fragment,t),a=!1},d(t){t&&ti(e),ir(o),s=!1,An(l)}}}function tm(t){let e,o;return e=new Xh({props:{$$slots:{footer:[Qp]},$$scope:{ctx:t}}}),e.$on("measure",t[59]),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const n={};16380&o[0]|32768&o[2]&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}let em="PinturaFilterPreview";function om(t,e,o){let n,i,r,a,s,l,c,d,u,h,p,m,g,f,$,y,b,x,v,C,M=Mn,k=()=>(M(),M=En(A,(t=>o(43,d=t))),A),S=Mn,P=()=>(S(),S=En(R,(t=>o(49,b=t))),R);t.$$.on_destroy.push((()=>M())),t.$$.on_destroy.push((()=>S()));let{isActive:R}=e;P();let{isActiveFraction:A}=e;k();let{stores:T}=e,{locale:I}=e,{filterFunctions:E}=e,{filterOptions:L}=e;const z=Ci("elasticityMultiplier");zn(t,z,(t=>o(13,C=t)));const{history:F,interfaceImages:B,stageRectBase:O,utilRect:D,animation:_,scrollElasticity:W,imageSize:j,imagePreview:N,imageCropRect:H,imageRotation:U,imageFlipX:V,imageFlipY:Z,imageBackgroundColor:G,imageGamma:q,imageColorMatrix:X,allowPan:Y,allowZoom:K,enableZoomControls:J}=T;zn(t,B,(t=>o(60,u=t))),zn(t,O,(t=>o(48,y=t))),zn(t,D,(t=>o(47,$=t))),zn(t,_,(t=>o(50,x=t))),zn(t,j,(t=>o(62,p=t))),zn(t,N,(t=>o(42,c=t))),zn(t,G,(t=>o(61,h=t))),zn(t,q,(t=>o(44,m=t))),zn(t,X,(t=>o(40,s=t)));const Q=cr({});zn(t,Q,(t=>o(46,f=t)));const et=(t,e)=>Nn(Q,f[t.value]=e,f),ot=dr(Q,(t=>{if(!t[void 0])return;const e=t[void 0];return v&&St(v,e)?v:vt(e)}));zn(t,ot,(t=>o(63,v=t)));const rt=dr([R,ot,H,j,U,V,Z],(([t,e,o,n,i,r,a],s)=>{if(!t||!e||!n)return g;const l=_t(n),c=Ut(l),d=Sr(n,o,i),u=Ut(d),h=ut(nt(c),u),p=it(nt(h)),m=Math.max(e.width/o.width,e.height/o.height);s({origin:p,translation:h,rotation:{x:a?Math.PI:0,y:r?Math.PI:0,z:i},scale:m})}));zn(t,rt,(t=>o(45,g=t)));const at=cs(x?20:0);let st;zn(t,at,(t=>o(39,a=t)));const lt={};let ct,dt,ht,pt,mt,gt,ft={x:0,y:0};const $t=cr([]);zn(t,$t,(t=>o(41,l=t)));const yt=t=>{const e={...t,data:c,size:p,offset:{...t.offset},mask:{...t.mask},backgroundColor:h};return e.opacity=d,e.offset.y+=a,e.mask.y+=a,e.id="filter",e},bt=()=>u.filter((t=>"filter"!==t.id));return xi((()=>{B.set([])})),t.$$set=t=>{"isActive"in t&&P(o(0,R=t.isActive)),"isActiveFraction"in t&&k(o(1,A=t.isActiveFraction)),"stores"in t&&o(34,T=t.stores),"locale"in t&&o(2,I=t.locale),"filterFunctions"in t&&o(35,E=t.filterFunctions),"filterOptions"in t&&o(3,L=t.filterOptions)},t.$$.update=()=>{if(262144&t.$$.dirty[1]&&Y.set(b),262144&t.$$.dirty[1]&&K.set(b),262144&t.$$.dirty[1]&&J.set(b),8&t.$$.dirty[0]&&o(38,n=mc(L)),640&t.$$.dirty[1]&&o(12,i=((t,e)=>{if(!t||!t.filter||!e)return 0;const o=t.filter;return e.findIndex((([t])=>{if(!E[t])return!1;const e=E[t]();return Ir(e,o)}))})(s,n)),786432&t.$$.dirty[1]&&x&&at.set(b?0:20),512&t.$$.dirty[0]|458752&t.$$.dirty[1]&&b&&$&&y&&gt&&o(37,mt={x:y.x-$.x,y:y.y-$.y+gt.y}),496&t.$$.dirty[0]|58096&t.$$.dirty[1]&&g&&mt&&ft&&pt&&st){const t=mt.x+pt.x+ft.x,e=mt.y,o=pt.x+mt.x,i=o+pt.width;$t.set(n.map((([n],r)=>{const a=f[n],l=ft.x+a.x,c=l+a.width;if(c<0||l>pt.width)return!1;const d=t+a.x,u=e+a.y,h=(t=>({origin:nt(t.origin),translation:nt(t.translation),rotation:{...t.rotation},scale:t.scale}))(g);h.offset=tt(.5*a.width+d,.5*a.height+u),h.maskOpacity=1,h.mask=Ht(d+0,u,a.width+0,a.height),h.maskFeather=[1,0,1,0,1,i,1,i],l<ht&&ct<1&&(h.maskFeather[0]=ct,h.maskFeather[1]=o,h.maskFeather[2]=1,h.maskFeather[3]=o+ht),c>pt.width-ht&&dt<1&&(h.maskFeather[4]=dt,h.maskFeather[5]=i-ht,h.maskFeather[6]=1,h.maskFeather[7]=i),h.maskCornerRadius=st[n];let p=s&&Object.keys(s).filter((t=>"filter"!=t)).map((t=>s[t]))||[];return w(E[n])&&p.push(E[n]()),h.colorMatrix=p.length?wn(p):void 0,h.gamma=m,h})).filter(Boolean))}if(7424&t.$$.dirty[1])if(d>0&&l){const t=[...bt(),...l.map(yt)];B.set(t)}else B.set(bt());256&t.$$.dirty[1]&&o(11,r=a?`transform: translateY(${a}px)`:void 0)},[R,A,I,L,ct,dt,ht,ft,pt,gt,lt,r,i,C,z,B,O,D,_,W,j,N,G,q,X,Q,et,ot,rt,at,t=>{t.target.className===em&&o(36,st=Object.keys(lt).reduce(((t,e)=>{const o=lt[e],n=getComputedStyle(o),i=["top-left","top-right","bottom-left","bottom-right"].map((t=>n.getPropertyValue(`border-${t}-radius`))).map(Pl).map((t=>1.25*t));return t[e]=i,t}),{}))},$t,({value:t})=>{Nn(X,s={...s,filter:w(E[t])?E[t]():void 0},s),F.write()},"filter",T,E,st,mt,n,a,s,l,c,d,m,g,f,$,y,b,x,(t,e)=>et(t,e.detail),function(t,e){Si[t?"unshift":"push"]((()=>{lt[e.value]=t,o(10,lt)}))},t=>o(7,ft=t),function(t){ct=t,o(4,ct)},function(t){dt=t,o(5,dt)},function(t){ht=t,o(6,ht)},t=>o(8,pt=t.detail),t=>o(9,gt=t.detail),function(e){Mi.call(this,t,e)}]}var nm={util:["filter",class extends ar{constructor(t){super(),rr(this,t,om,tm,In,{name:33,isActive:0,isActiveFraction:1,stores:34,locale:2,filterFunctions:35,filterOptions:3},null,[-1,-1,-1])}get name(){return this.$$.ctx[33]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),Di()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),Di()}get stores(){return this.$$.ctx[34]}set stores(t){this.$$set({stores:t}),Di()}get locale(){return this.$$.ctx[2]}set locale(t){this.$$set({locale:t}),Di()}get filterFunctions(){return this.$$.ctx[35]}set filterFunctions(t){this.$$set({filterFunctions:t}),Di()}get filterOptions(){return this.$$.ctx[3]}set filterOptions(t){this.$$set({filterOptions:t}),Di()}}]};function im(t){let e,o,n=t[42].label+"";return{c(){e=ei("span"),o=ni(n)},m(t,n){Qn(t,e,n),Yn(e,o)},p(t,e){2048&e[1]&&n!==(n=t[42].label+"")&&di(o,n)},d(t){t&&ti(e)}}}function rm(t){let e,o;const n=[{class:"PinturaControlList"},{tabs:t[1]},t[5]];let i={$$slots:{default:[im,({tab:t})=>({42:t}),({tab:t})=>[0,t?2048:0]]},$$scope:{ctx:t}};for(let t=0;t<n.length;t+=1)i=Sn(i,n[t]);return e=new Ds({props:i}),e.$on("select",t[24]),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const i=34&o[0]?Qi(n,[n[0],2&o[0]&&{tabs:t[1]},32&o[0]&&tr(t[5])]):{};6144&o[1]&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function am(t){let e,o;const n=[t[7][t[41]]];let i={};for(let t=0;t<n.length;t+=1)i=Sn(i,n[t]);return e=new Qh({props:i}),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const i=128&o[0]|1024&o[1]?Qi(n,[tr(t[7][t[41]])]):{};e.$set(i)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function sm(t){let e,o,n,i,r;o=new El({props:{elasticity:t[6]*t[9],class:"PinturaControlListScroller",$$slots:{default:[rm]},$$scope:{ctx:t}}});const a=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[4]},t[5]];let s={$$slots:{default:[am,({panel:t})=>({41:t}),({panel:t})=>[0,t?1024:0]]},$$scope:{ctx:t}};for(let t=0;t<a.length;t+=1)s=Sn(s,a[t]);return i=new Ys({props:s}),{c(){e=ei("div"),or(o.$$.fragment),n=ii(),or(i.$$.fragment),li(e,"slot","footer"),li(e,"style",t[3])},m(t,a){Qn(t,e,a),nr(o,e,null),Yn(e,n),nr(i,e,null),r=!0},p(t,n){const s={};64&n[0]&&(s.elasticity=t[6]*t[9]),38&n[0]|4096&n[1]&&(s.$$scope={dirty:n,ctx:t}),o.$set(s);const l=48&n[0]?Qi(a,[a[0],a[1],16&n[0]&&{panels:t[4]},32&n[0]&&tr(t[5])]):{};128&n[0]|5120&n[1]&&(l.$$scope={dirty:n,ctx:t}),i.$set(l),(!r||8&n[0])&&li(e,"style",t[3])},i(t){r||(Vi(o.$$.fragment,t),Vi(i.$$.fragment,t),r=!0)},o(t){Zi(o.$$.fragment,t),Zi(i.$$.fragment,t),r=!1},d(t){t&&ti(e),ir(o),ir(i)}}}function lm(t){let e,o;return e=new Xh({props:{$$slots:{footer:[sm]},$$scope:{ctx:t}}}),e.$on("measure",t[25]),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const n={};254&o[0]|4096&o[1]&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function cm(t,e,o){let n,i,r,a,s,l,c,d,u,h,p,m=Mn,g=()=>(m(),m=En($,(t=>o(21,c=t))),$);t.$$.on_destroy.push((()=>m()));let{stores:f}=e,{isActive:$}=e;g();let{locale:y={}}=e,{finetuneControlConfiguration:b}=e,{finetuneOptions:x}=e,{finetuneNudgePrecision:v}=e;const{history:C,animation:M,scrollElasticity:S,rangeInputElasticity:P,imageColorMatrix:R,imageConvolutionMatrix:A,imageGamma:T,imageVignette:I,imageNoise:E,allowPan:L,allowZoom:z,enableZoomControls:F}=f;zn(t,M,(t=>o(22,d=t)));const B={imageColorMatrix:R,imageConvolutionMatrix:A,imageGamma:T,imageVignette:I,imageNoise:E},D=Ci("elasticityMultiplier");zn(t,D,(t=>o(6,h=t)));const _=`finetune-${k()}`,W=cr({});zn(t,W,(t=>o(23,u=t)));const j=cr({});zn(t,j,(t=>o(7,p=t)));let N=[];const H=cs(d?20:0);return zn(t,H,(t=>o(20,l=t))),t.$$set=t=>{"stores"in t&&o(15,f=t.stores),"isActive"in t&&g(o(0,$=t.isActive)),"locale"in t&&o(16,y=t.locale),"finetuneControlConfiguration"in t&&o(17,b=t.finetuneControlConfiguration),"finetuneOptions"in t&&o(18,x=t.finetuneOptions),"finetuneNudgePrecision"in t&&o(19,v=t.finetuneNudgePrecision)},t.$$.update=()=>{var e;2097152&t.$$.dirty[0]&&L.set(c),2097152&t.$$.dirty[0]&&z.set(c),2097152&t.$$.dirty[0]&&F.set(c),327680&t.$$.dirty[0]&&o(1,n=x?x.map((([t,e])=>({id:t,label:w(e)?e(y):e}))):[]),2&t.$$.dirty[0]&&o(2,i=n.length&&n[0].id),4&t.$$.dirty[0]&&o(5,r={name:_,selected:i}),2&t.$$.dirty[0]&&o(4,a=n.map((t=>t.id))),131072&t.$$.dirty[0]&&b&&(e=b,N&&N.forEach((t=>t())),N=a.map((t=>{const{getStore:o,getValue:n=O}=e[t];return o(B).subscribe((e=>{const o=null!=e?n(e):e;Nn(W,u={...u,[t]:o},u)}))}))),8519680&t.$$.dirty[0]&&b&&u&&Nn(j,p=Object.keys(u).reduce(((t,e)=>{const{base:o,min:n,max:i,getLabel:r,getStore:a,setValue:s=((t,e)=>t.set(e))}=b[e],l=a(B),c=null!=u[e]?u[e]:o;return t[e]={base:o,min:n,max:i,value:c,valueLabel:r?r(c,n,i,i-n):Math.round(100*c),oninputmove:t=>{s(l,t)},oninputend:t=>{s(l,t),C.write()},elasticity:h*P,labelReset:y.labelReset,nudgeMultiplier:v},t}),{}),p),6291456&t.$$.dirty[0]&&d&&H.set(c?0:20),1048576&t.$$.dirty[0]&&o(3,s=l?`transform: translateY(${l}px)`:void 0)},[$,n,i,s,a,r,h,p,M,S,D,W,j,H,"finetune",f,y,b,x,v,l,c,d,u,({detail:t})=>o(2,i=t),function(e){Mi.call(this,t,e)}]}var dm={util:["finetune",class extends ar{constructor(t){super(),rr(this,t,cm,lm,In,{name:14,stores:15,isActive:0,locale:16,finetuneControlConfiguration:17,finetuneOptions:18,finetuneNudgePrecision:19},null,[-1,-1])}get name(){return this.$$.ctx[14]}get stores(){return this.$$.ctx[15]}set stores(t){this.$$set({stores:t}),Di()}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),Di()}get locale(){return this.$$.ctx[16]}set locale(t){this.$$set({locale:t}),Di()}get finetuneControlConfiguration(){return this.$$.ctx[17]}set finetuneControlConfiguration(t){this.$$set({finetuneControlConfiguration:t}),Di()}get finetuneOptions(){return this.$$.ctx[18]}set finetuneOptions(t){this.$$set({finetuneOptions:t}),Di()}get finetuneNudgePrecision(){return this.$$.ctx[19]}set finetuneNudgePrecision(t){this.$$set({finetuneNudgePrecision:t}),Di()}}]};function um(t,e,o){const n=t.slice();return n[9]=e[o],n}function hm(t,e){let o,n,i,r,a,s,l,c=fc(e[9].componentProps.title,e[1])+"";const d=[e[9].componentProps];var u=e[9].component;function h(t){let e={};for(let t=0;t<d.length;t+=1)e=Sn(e,d[t]);return{props:e}}return u&&(a=new u(h())),{key:t,first:null,c(){o=ei("li"),n=ei("span"),i=ni(c),r=ii(),a&&or(a.$$.fragment),s=ii(),li(n,"class","PinturaShapeStyleLabel"),li(o,"class","PinturaShapeStyle"),this.first=o},m(t,e){Qn(t,o,e),Yn(o,n),Yn(n,i),Yn(o,r),a&&nr(a,o,null),Yn(o,s),l=!0},p(t,n){e=t,(!l||3&n)&&c!==(c=fc(e[9].componentProps.title,e[1])+"")&&di(i,c);const r=1&n?Qi(d,[tr(e[9].componentProps)]):{};if(u!==(u=e[9].component)){if(a){Hi();const t=a;Zi(t.$$.fragment,1,0,(()=>{ir(t,1)})),Ui()}u?(a=new u(h()),or(a.$$.fragment),Vi(a.$$.fragment,1),nr(a,o,s)):a=null}else u&&a.$set(r)},i(t){l||(a&&Vi(a.$$.fragment,t),l=!0)},o(t){a&&Zi(a.$$.fragment,t),l=!1},d(t){t&&ti(o),a&&ir(a)}}}function pm(t){let e,o,n=[],i=new Map,r=t[0];const a=t=>t[9].id;for(let e=0;e<r.length;e+=1){let o=um(t,r,e),s=a(o);i.set(s,n[e]=hm(s,o))}return{c(){e=ei("ul");for(let t=0;t<n.length;t+=1)n[t].c();li(e,"class","PinturaShapeStyleList")},m(t,i){Qn(t,e,i);for(let t=0;t<n.length;t+=1)n[t].m(e,null);o=!0},p(t,o){3&o&&(r=t[0],Hi(),n=Ji(n,o,a,1,t,r,i,e,Ki,hm,null,um),Ui())},i(t){if(!o){for(let t=0;t<r.length;t+=1)Vi(n[t]);o=!0}},o(t){for(let t=0;t<n.length;t+=1)Zi(n[t]);o=!1},d(t){t&&ti(e);for(let t=0;t<n.length;t+=1)n[t].d()}}}function mm(t){let e,o,n;return o=new El({props:{class:"PinturaShapeStyles",elasticity:t[2],$$slots:{default:[pm]},$$scope:{ctx:t}}}),{c(){e=ei("div"),or(o.$$.fragment),li(e,"style",t[3])},m(t,i){Qn(t,e,i),nr(o,e,null),n=!0},p(t,[i]){const r={};4&i&&(r.elasticity=t[2]),4099&i&&(r.$$scope={dirty:i,ctx:t}),o.$set(r),(!n||8&i)&&li(e,"style",t[3])},i(t){n||(Vi(o.$$.fragment,t),n=!0)},o(t){Zi(o.$$.fragment,t),n=!1},d(t){t&&ti(e),ir(o)}}}function gm(t,e,o){let n,i,r,{isActive:a=!1}=e,{controls:s=[]}=e,{locale:l}=e,{scrollElasticity:c}=e;const d=Ci("isAnimated");zn(t,d,(t=>o(8,r=t)));const u=cs(0,{stiffness:.25,damping:.9});return zn(t,u,(t=>o(7,i=t))),t.$$set=t=>{"isActive"in t&&o(6,a=t.isActive),"controls"in t&&o(0,s=t.controls),"locale"in t&&o(1,l=t.locale),"scrollElasticity"in t&&o(2,c=t.scrollElasticity)},t.$$.update=()=>{320&t.$$.dirty&&u.set(a?1:0,{hard:!1===r}),192&t.$$.dirty&&o(3,n=`opacity:${i};${a?"":"pointer-events:none;"}${i<=0?"visibility:hidden":""}`)},[s,l,c,n,d,u,a,i,r]}class fm extends ar{constructor(t){super(),rr(this,t,gm,mm,In,{isActive:6,controls:0,locale:1,scrollElasticity:2})}}function $m(t,e,o){const n=t.slice();return n[12]=e[o].key,n[3]=e[o].controls,n[13]=e[o].isActive,n}function ym(t,e){let o,n,i;return n=new fm({props:{isActive:e[13],controls:e[3],locale:e[1],scrollElasticity:e[2]}}),{key:t,first:null,c(){o=ri(),or(n.$$.fragment),this.first=o},m(t,e){Qn(t,o,e),nr(n,t,e),i=!0},p(t,o){e=t;const i={};16&o&&(i.isActive=e[13]),16&o&&(i.controls=e[3]),2&o&&(i.locale=e[1]),4&o&&(i.scrollElasticity=e[2]),n.$set(i)},i(t){i||(Vi(n.$$.fragment,t),i=!0)},o(t){Zi(n.$$.fragment,t),i=!1},d(t){t&&ti(o),ir(n,t)}}}function bm(t){let e,o,n,i=[],r=new Map,a=t[4];const s=t=>t[12];for(let e=0;e<a.length;e+=1){let o=$m(t,a,e),n=s(o);r.set(n,i[e]=ym(n,o))}return{c(){e=ei("div");for(let t=0;t<i.length;t+=1)i[t].c();li(e,"class",o=Ts(["PinturaShapeStyleEditor",t[0]]))},m(t,o){Qn(t,e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);n=!0},p(t,[l]){22&l&&(a=t[4],Hi(),i=Ji(i,l,s,1,t,a,r,e,Ki,ym,null,$m),Ui()),(!n||1&l&&o!==(o=Ts(["PinturaShapeStyleEditor",t[0]])))&&li(e,"class",o)},i(t){if(!n){for(let t=0;t<a.length;t+=1)Vi(i[t]);n=!0}},o(t){for(let t=0;t<i.length;t+=1)Zi(i[t]);n=!1},d(t){t&&ti(e);for(let t=0;t<i.length;t+=1)i[t].d()}}}function xm(t,e,o){let n,i,r,{class:a}=e,{controls:s={}}=e,{shape:l}=e,{onchange:c}=e,{locale:d}=e,{scrollElasticity:u}=e;const h=[];return t.$$set=t=>{"class"in t&&o(0,a=t.class),"controls"in t&&o(3,s=t.controls),"shape"in t&&o(5,l=t.shape),"onchange"in t&&o(6,c=t.onchange),"locale"in t&&o(1,d=t.locale),"scrollElasticity"in t&&o(2,u=t.scrollElasticity)},t.$$.update=()=>{8&t.$$.dirty&&o(8,n=Object.keys(s).filter((t=>s[t]))),288&t.$$.dirty&&o(7,i=l&&Object.keys(l).length&&n&&Ho(l)?(t=>{const e=n.filter((e=>e.split("_").every((e=>ao(t,e)&&Ho(t,e))))).map((e=>{const o=e.split("_"),n=o.length>1?o.map((e=>t[e])):t[e];let[i,r]=s[e];if(v(i))if(s[i]){const t={...r};[i,r]=s[i],r={...r,...t}}else{if("Dropdown"!==i)return;i=id}const a=w(r.options)?r.options(t):r.options;return{id:e,component:i,componentProps:{...r,options:a,locale:d,value:n,optionLabelClass:"PinturaButtonLabel",onchange:n=>{const i=y(n)&&!so(n)?n.value:n;r.onchange&&r.onchange(i,t);const a=o.length>1?o.reduce(((t,e,o)=>({...t,[e]:Array.isArray(i)?i[o]:i})),{}):{[e]:i};c(a)}}}})).filter(Boolean);return e})(l):[]),160&t.$$.dirty&&o(4,r=((t,e)=>{let o=h.find((e=>e.key===t));return o||(o={key:t,controls:e},h.push(o)),h.forEach((t=>t.isActive=!1)),o.controls=e,o.isActive=!0,h})(l&&Object.keys(l).length?Object.keys(l).join("_"):"none",i||[]))},[a,d,u,s,r,l,c,i,n]}class vm extends ar{constructor(t){super(),rr(this,t,xm,bm,In,{class:0,controls:3,shape:5,onchange:6,locale:1,scrollElasticity:2})}}const{document:wm}=Xi;function Cm(t){let e,o,n,i,r,a=(t[14](t[33].value)||"")+"",s=(w(t[33].label)?t[33].label(t[1]):t[33].label)+"";return{c(){e=ei("div"),o=new hi(!1),n=ii(),i=ei("span"),r=ni(s),o.a=n,li(e,"slot","option")},m(t,s){Qn(t,e,s),o.m(a,e),Yn(e,n),Yn(e,i),Yn(i,r)},p(t,e){4&e[1]&&a!==(a=(t[14](t[33].value)||"")+"")&&o.p(a),2&e[0]|4&e[1]&&s!==(s=(w(t[33].label)?t[33].label(t[1]):t[33].label)+"")&&di(r,s)},d(t){t&&ti(e)}}}function Mm(t){let e,o;return e=new Uc({props:{locale:t[1],class:"PinturaControlList",layout:"row",options:t[2],selectedIndex:t[11],onchange:t[12],$$slots:{option:[Cm,({option:t})=>({33:t}),({option:t})=>[0,t?4:0]]},$$scope:{ctx:t}}}),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const n={};2&o[0]&&(n.locale=t[1]),4&o[0]&&(n.options=t[2]),2&o[0]|12&o[1]&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function km(t){let e,o,n,i,r;return o=new vm({props:{locale:t[1],class:"PinturaControlPanels",shape:t[6],onchange:t[13],controls:t[3],scrollElasticity:t[5]}}),i=new El({props:{elasticity:t[9],$$slots:{default:[Mm]},$$scope:{ctx:t}}}),{c(){e=ei("div"),or(o.$$.fragment),n=ii(),or(i.$$.fragment),li(e,"slot","footer"),li(e,"style",t[4])},m(t,a){Qn(t,e,a),nr(o,e,null),Yn(e,n),nr(i,e,null),r=!0},p(t,n){const a={};2&n[0]&&(a.locale=t[1]),64&n[0]&&(a.shape=t[6]),8&n[0]&&(a.controls=t[3]),32&n[0]&&(a.scrollElasticity=t[5]),o.$set(a);const s={};6&n[0]|8&n[1]&&(s.$$scope={dirty:n,ctx:t}),i.$set(s),(!r||16&n[0])&&li(e,"style",t[4])},i(t){r||(Vi(o.$$.fragment,t),Vi(i.$$.fragment,t),r=!0)},o(t){Zi(o.$$.fragment,t),Zi(i.$$.fragment,t),r=!1},d(t){t&&ti(e),ir(o),ir(i)}}}function Sm(t){let e,o;return e=new Xh({props:{$$slots:{footer:[km]},$$scope:{ctx:t}}}),e.$on("measure",t[23]),{c(){or(e.$$.fragment)},m(t,n){nr(e,t,n),o=!0},p(t,o){const n={};126&o[0]|8&o[1]&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){o||(Vi(e.$$.fragment,t),o=!0)},o(t){Zi(e.$$.fragment,t),o=!1},d(t){ir(e,t)}}}function Pm(t,e,o){let n,i,r,a,s,l,c,d=Mn,u=()=>(d(),d=En(h,(t=>o(20,a=t))),h);t.$$.on_destroy.push((()=>d()));let{isActive:h}=e;u();let{stores:p}=e,{locale:m={}}=e,{frameStyles:g={}}=e,{frameOptions:f=[]}=e,{markupEditorShapeStyleControls:$}=e;const y=Ci("elasticityMultiplier");zn(t,y,(t=>o(22,c=t)));const{history:b,animation:x,scrollElasticity:w,imageFrame:C,allowPan:M,allowZoom:k,enableZoomControls:S}=p;zn(t,x,(t=>o(21,s=t))),zn(t,C,(t=>o(6,l=t)));let P,R=l?f.findIndex((([t])=>t===l.id)):0,A={};const T=cs(s?20:0);return zn(t,T,(t=>o(19,r=t))),t.$$set=t=>{"isActive"in t&&u(o(0,h=t.isActive)),"stores"in t&&o(17,p=t.stores),"locale"in t&&o(1,m=t.locale),"frameStyles"in t&&o(18,g=t.frameStyles),"frameOptions"in t&&o(2,f=t.frameOptions),"markupEditorShapeStyleControls"in t&&o(3,$=t.markupEditorShapeStyleControls)},t.$$.update=()=>{1048576&t.$$.dirty[0]&&M.set(a),1048576&t.$$.dirty[0]&&k.set(a),1048576&t.$$.dirty[0]&&S.set(a),4194304&t.$$.dirty[0]&&o(5,n=c*w),3145728&t.$$.dirty[0]&&s&&T.set(a?0:20),524288&t.$$.dirty[0]&&o(4,i=r?`transform: translateY(${r}px)`:void 0)},[h,m,f,$,i,n,l,y,x,w,C,R,({value:t})=>{const e=g[t];if(!e||!e.shape)return C.set(void 0),void b.write();const{shape:o}=e,n={id:t,...Io(o),...Object.keys(A).reduce(((t,e)=>o[e]?(t[e]=A[e],t):t),{})};C.set(n),b.write()},function(t){ao(t,"frameColor")&&(A.frameColor=t.frameColor),l&&(((t,e,o)=>{Object.keys(e).forEach((n=>((t,e,o,n)=>{if(!v(t[e]))return t[e]=o,t;const i=((t,e)=>{let o;return/^x|width|rx|fontSize|strokeWidth|cornerRadius/.test(t)?o=e.width:/^y|height|ry/.test(t)&&(o=e.height),o})(e,n);return t[e]=void 0===i?o:((t,e)=>t/e*100+"%")(o,i),t})(t,n,e[n],o)))})(l,t),C.set(l),clearTimeout(P),P=setTimeout((()=>{b.write()}),200))},t=>{const e=g[t];var o;if(e&&e.thumb)return o=e.thumb,/div/i.test(o)||/<svg /.test(o)?o:/rect|path|circle|line|<g>/i.test(o)?`<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" stroke-width="1" stroke="currentColor" fill="none" aria-hidden="true" focusable="false" stroke-linecap="round" stroke-linejoin="round">${o}</svg>`:`<img src="${o}" alt=""/>`},T,"frame",p,g,r,a,s,c,function(e){Mi.call(this,t,e)}]}var Rm={util:["frame",class extends ar{constructor(t){super(),rr(this,t,Pm,Sm,In,{name:16,isActive:0,stores:17,locale:1,frameStyles:18,frameOptions:2,markupEditorShapeStyleControls:3},null,[-1,-1])}get name(){return this.$$.ctx[16]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),Di()}get stores(){return this.$$.ctx[17]}set stores(t){this.$$set({stores:t}),Di()}get locale(){return this.$$.ctx[1]}set locale(t){this.$$set({locale:t}),Di()}get frameStyles(){return this.$$.ctx[18]}set frameStyles(t){this.$$set({frameStyles:t}),Di()}get frameOptions(){return this.$$.ctx[2]}set frameOptions(t){this.$$set({frameOptions:t}),Di()}get markupEditorShapeStyleControls(){return this.$$.ctx[3]}set markupEditorShapeStyleControls(t){this.$$set({markupEditorShapeStyleControls:t}),Di()}},({duration:t})=>!t]};const Am='<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"></path></path></g>',Tm='<path fill="none" d="M9 15 L12 9 L15 15 M10 13.5 h3" stroke="currentColor" stroke-width=".125em"/>';var Im={labelReset:"Reset",labelDefault:"Default",labelAuto:"Auto",labelNone:"None",labelEdit:"Edit",labelClose:"Close",labelSupportError:t=>`${t.join(", ")} not supported on this browser`,labelColor:"Color",labelWidth:"Width",labelSize:"Size",labelOffset:"Offset",labelAmount:"Amount",labelInset:"Inset",labelRadius:"Radius",labelColorPalette:"Color palette",labelSizeExtraSmall:"Extra small",labelSizeSmall:"Small",labelSizeMediumSmall:"Medium small",labelSizeMedium:"Medium",labelSizeMediumLarge:"Medium large",labelSizeLarge:"Large",labelSizeExtraLarge:"Extra large",labelButtonCancel:"Cancel",labelButtonUndo:"Undo",labelButtonRedo:"Redo",labelButtonRevert:"Revert",labelButtonExport:"Done",labelZoomIn:"Zoom in",labelZoomOut:"Zoom out",labelZoomFit:"Fit to view",labelZoomActual:"Actual size",iconZoomIn:'<path stroke="currentColor" stroke-width=".125em" d="M8 12 h8 M12 8 v8" />',iconZoomOut:'<path stroke="currentColor" stroke-width=".125em" d="M9 12 h6" />',iconSupportError:'<g fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><g><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></g>',iconButtonClose:Am,iconButtonRevert:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M7.388 18.538a8 8 0 10-2.992-9.03"/><path fill="currentColor" d="M2.794 11.696L2.37 6.714l5.088 3.18z"/><path d="M12 8v4M12 12l4 2"/></g>',iconButtonUndo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M10 8h4c2.485 0 5 2 5 5s-2.515 5-5 5h-4"/><path fill="currentColor" d="M5 8l4-3v6z"/></g>',iconButtonRedo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M14 8h-4c-2.485 0-5 2-5 5s2.515 5 5 5h4"/><path fill="currentColor" d="M19 8l-4-3v6z"/></g>',iconButtonExport:'<polyline points="20 6 9 17 4 12" fill="none" stroke="currentColor" stroke-width=".125em"></polyline>',iconButtonSelectImage:'<g fill="none" stroke="currentColor" stroke-width="0.0625em"><path d="M8 21 L15 11 L19 15"/><path d="M15 2 v5 h5"/><path d="M8 2 h8 l4 4 v12 q0 4 -4 4 h-8 q-4 0 -4 -4 v-12 q0 -4 4 -4z"/></g><circle fill="currentColor" cx="10" cy="8" r="1.5"/>',statusLabelButtonClose:"Close",statusIconButtonClose:Am,statusLabelLoadImage:t=>t&&t.task?t.error?"IMAGE_TOO_SMALL"===t.error.code?"Minimum image size is {minWidth} &times; {minHeight}":"Error loading image":"blob-to-bitmap"===t.task?"Preparing image&hellip;":"Loading image&hellip;":"Waiting for image",statusLabelProcessImage:t=>{if(t&&t.task)return"store"===t.task?t.error?"Error uploading image":"Uploading image&hellip;":t.error?"Error processing image":"Processing image&hellip;"}};const Em={shapeLabelButtonSelectSticker:"Select image",shapeIconButtonSelectSticker:'<g fill="none" stroke="currentColor" stroke-width="0.0625em"><path d="M8 21 L15 11 L19 15"/><path d="M15 2 v5 h5"/><path d="M8 2 h8 l4 4 v12 q0 4 -4 4 h-8 q-4 0 -4 -4 v-12 q0 -4 4 -4z"/></g><circle fill="currentColor" cx="10" cy="8" r="1.5"/>',shapeIconButtonFlipHorizontal:'<g stroke="currentColor" stroke-width=".125em"><path fill="none" d="M6 6.5h5v11H6z"/><path fill="currentColor" d="M15 6.5h3v11h-3z"/><path d="M11 4v16" fill="currentColor"/></g>',shapeIconButtonFlipVertical:'<g stroke="currentColor" stroke-width=".125em"><rect x="7" y="8" width="11" height="5" fill="none"/><rect x="7" y="17" width="11" height="2" fill="currentColor"/><line x1="5" y1="13" x2="20" y2="13"/></g>',shapeIconButtonRemove:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M7.5 7h9z"/><path d="M7.916 9h8.168a1 1 0 01.99 1.14l-.972 6.862a2 2 0 01-1.473 1.653c-.877.23-1.753.345-2.629.345-.876 0-1.752-.115-2.628-.345a2 2 0 01-1.473-1.653l-.973-6.862A1 1 0 017.916 9z" fill="currentColor"/><rect fill="currentColor" x="10" y="5" width="4" height="3" rx="1"/></g>',shapeIconButtonDuplicate:'<g fill="none" fill-rule="evenodd"><path d="M15 13.994V16a2 2 0 01-2 2H8a2 2 0 01-2-2v-5a2 2 0 012-2h2.142" stroke="currentColor" stroke-width=".125em"/><path d="M15 9V8a1 1 0 00-2 0v1h-1a1 1 0 000 2h1v1a1 1 0 002 0v-1h1a1 1 0 000-2h-1zm-4-4h6a2 2 0 012 2v6a2 2 0 01-2 2h-6a2 2 0 01-2-2V7a2 2 0 012-2z" fill="currentColor"/></g>',shapeIconButtonMoveToFront:'<g fill="none" fill-rule="evenodd"><rect fill="currentColor" x="11" y="13" width="8" height="2" rx="1"/><rect fill="currentColor" x="9" y="17" width="10" height="2" rx="1"/><path d="M11.364 8H10a5 5 0 000 10M12 6.5L14.5 8 12 9.5z" stroke="currentColor" stroke-width=".125em" stroke-linecap="round"/></g>',shapeIconButtonTextLayoutAutoWidth:`${Tm}`,shapeIconButtonTextLayoutAutoHeight:`<g fill="currentColor"><circle cx="4" cy="12" r="1.5"/><circle cx="20" cy="12" r="1.5"/></g>${Tm}`,shapeIconButtonTextLayoutFixedSize:`<g fill="currentColor"><circle cx="5" cy="6" r="1.5"/><circle cx="19" cy="6" r="1.5"/><circle cx="19" cy="19" r="1.5"/><circle cx="5" cy="19" r="1.5"/></g>${Tm}`,shapeTitleButtonTextLayoutAutoWidth:"Auto width",shapeTitleButtonTextLayoutAutoHeight:"Auto height",shapeTitleButtonTextLayoutFixedSize:"Fixed size",shapeTitleButtonFlipHorizontal:"Flip Horizontal",shapeTitleButtonFlipVertical:"Flip Vertical",shapeTitleButtonRemove:"Remove",shapeTitleButtonDuplicate:"Duplicate",shapeTitleButtonMoveToFront:"Move to front",shapeLabelInputText:"Edit text",shapeIconInputCancel:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"/></g>',shapeIconInputConfirm:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><polyline points="20 6 9 17 4 12"/></g>',shapeLabelInputCancel:"Cancel",shapeLabelInputConfirm:"Confirm",shapeLabelStrokeNone:"No outline",shapeLabelFontStyleNormal:"Normal",shapeLabelFontStyleBold:"Bold",shapeLabelFontStyleItalic:"Italic",shapeLabelFontStyleItalicBold:"Bold Italic",shapeTitleBackgroundColor:"Fill color",shapeTitleCornerRadius:"Corner radius",shapeTitleFontFamily:"Font",shapeTitleFontSize:"Font size",shapeTitleFontStyle:"Font style",shapeTitleLineHeight:"Line height",shapeTitleLineStart:"Start",shapeTitleLineEnd:"End",shapeTitleStrokeWidth:"Line width",shapeTitleStrokeColor:"Line color",shapeTitleLineDecorationBar:"Bar",shapeTitleLineDecorationCircle:"Circle",shapeTitleLineDecorationSquare:"Square",shapeTitleLineDecorationArrow:"Arrow",shapeTitleLineDecorationCircleSolid:"Circle solid",shapeTitleLineDecorationSquareSolid:"Square solid",shapeTitleLineDecorationArrowSolid:"Arrow solid",shapeIconLineDecorationBar:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M16,8 V16"/></g>',shapeIconLineDecorationCircle:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="none" stroke-width=".125em" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquare:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="none" stroke-width=".125em" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrow:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16 M13,7 l6,5 l-6,5" fill="none"/></g>',shapeIconLineDecorationCircleSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="currentColor" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquareSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="currentColor" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrowSolid:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M13,7 l6,5 l-6,5z" fill="currentColor"/></g>',shapeTitleColorTransparent:"Transparent",shapeTitleColorWhite:"White",shapeTitleColorSilver:"Silver",shapeTitleColorGray:"Gray",shapeTitleColorBlack:"Black",shapeTitleColorNavy:"Navy",shapeTitleColorBlue:"Blue",shapeTitleColorAqua:"Aqua",shapeTitleColorTeal:"Teal",shapeTitleColorOlive:"Olive",shapeTitleColorGreen:"Green",shapeTitleColorYellow:"Yellow",shapeTitleColorOrange:"Orange",shapeTitleColorRed:"Red",shapeTitleColorMaroon:"Maroon",shapeTitleColorFuchsia:"Fuchsia",shapeTitleColorPurple:"Purple",shapeTitleTextColor:"Font color",shapeTitleTextAlign:"Text align",shapeTitleTextAlignLeft:"Left align text",shapeTitleTextAlignCenter:"Center align text",shapeTitleTextAlignRight:"Right align text",shapeIconTextAlignLeft:'<g stroke-width=".125em" stroke="currentColor"><line x1="5" y1="8" x2="15" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="5" y1="16" x2="14" y2="16"/></g>',shapeIconTextAlignCenter:'<g stroke-width=".125em" stroke="currentColor"><line x1="7" y1="8" x2="17" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="8" y1="16" x2="16" y2="16"/></g>',shapeIconTextAlignRight:'<g stroke-width=".125em" stroke="currentColor"><line x1="9" y1="8" x2="19" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="11" y1="16" x2="19" y2="16"/></g>',shapeLabelToolMove:"Move",shapeLabelToolView:"View",shapeLabelToolSharpie:"Sharpie",shapeLabelToolEraser:"Eraser",shapeLabelToolPath:"Path",shapeLabelToolRectangle:"Rectangle",shapeLabelToolEllipse:"Ellipse",shapeLabelToolArrow:"Arrow",shapeLabelToolLine:"Line",shapeLabelToolText:"Text",shapeLabelToolPreset:"Stickers",shapeIconToolView:'<g stroke-width=".125em" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M10.98 9.703V2.567c0-1.19 1.19-1.785 1.784-1.785.595 0 1.784.595 1.784 1.785v3.568"/><path d="M14.548 9.703V4.35c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.594 1.784 1.784v2.973"/><path d="M18.116 10.244V7.271c0-1.19 1.19-1.784 1.784-1.784.595 0 1.785.595 1.785 1.784 0 1.19 0 8.92-1.19 12.488-1.19 3.569-10.704 4.758-13.678 0-2.973-4.757-2.973-4.757-4.163-6.541-1.189-1.784-1.153-2.974-.594-3.568.558-.595 1.784-1.19 2.973.594 1.277 1.916 2.07 2.907 2.379 2.974V5.487c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.595 1.784 1.784V8.46"/></g>',shapeIconToolMove:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M6 2 L6 19 L18 13 Z M13 18 L16 24" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolSharpie:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolEraser:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" fill="none"><g transform="translate(3, 15) rotate(-45)"><rect x="0" y="0" width="18" height="10" rx="3"/></g><line x1="11" y1="21" x2="18" y2="21"/><line x1="20" y1="21" x2="22" y2="21"/></g>',shapeIconToolPath:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none">\n    \n    <circle cx="21" cy="3" r="2"/>\n    <circle cx="9" cy="9" r="2"/>\n    <circle cx="3" cy="21" r="2"/>\n\n    <path d="M19 4 11 8 M8 11 4 19"/>\n    \n    </g>',shapeIconToolRectangle:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="2" y="2" width="20" height="20" rx="3"/></g>',shapeIconToolEllipse:'<g stroke-width=".125em" stroke="currentColor" fill="none"><circle cx="12" cy="12" r="11"/></g>',shapeIconToolArrow:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/><path d="m10 6 L21.5 1 L20 13.5" fill="currentColor" stroke="none"/></g>',shapeIconToolLine:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/></g>',shapeIconToolText:'<g stroke="none" fill="currentColor" transform="translate(6,0)"><path d="M8.14 20.085c.459 0 .901-.034 1.329-.102a8.597 8.597 0 001.015-.21v1.984c-.281.135-.695.247-1.242.336a9.328 9.328 0 01-1.477.133c-3.312 0-4.968-1.745-4.968-5.235V6.804H.344v-1.25l2.453-1.078L3.89.819h1.5v3.97h4.97v2.015H5.39v10.078c0 1.031.245 1.823.735 2.375s1.161.828 2.015.828z"/>',shapeIconToolPreset:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"></path><path d="M20 17c-3 3-5 5-8 5"></path></g>'};var Lm=(t,e)=>{const o=Object.getOwnPropertyDescriptors(t);Object.keys(o).forEach((n=>{o[n].get?Object.defineProperty(e,n,{get:()=>t[n],set:e=>t[n]=e}):e[n]=t[n]}))};l()&&HTMLElement;const zm="pintura-editor";const{document:Fm,window:Bm}=Xi,Om=(t,e,o,n)=>{const i=tt(e.x-t.x,e.y-t.y),r=st(i),a=5*o;let s;s=n?.5*a:Math.ceil(.5*(a-1));const l=ht(nt(r),s);return{anchor:nt(t),offset:l,normal:r,solid:n,size:a,sizeHalf:s}},Dm=({anchor:t,solid:e,normal:o,offset:n,size:i,sizeHalf:r,strokeWidth:a,strokeColor:s},l)=>{const c=t.x,d=t.y,u=ht(nt(o),i),h=tt(c+u.x,d+u.y);if(ht(u,.55),e){dt(l,n);const t=ht(nt(o),.5*r);return[{points:[tt(c-t.x,d-t.y),tt(h.x-u.y,h.y+u.x),tt(h.x+u.y,h.y-u.x)],pathClose:!0,backgroundColor:s}]}{const t=ht((t=>{const e=t.x;return t.x=-t.y,t.y=e,t})(nt(o)),.5),e=tt(c-t.x,d-t.y),n=tt(c+t.x,d+t.y);return[{points:[tt(h.x+u.y,h.y-u.x),e,tt(c,d),n,tt(h.x-u.y,h.y+u.x)],pathClose:!1,strokeWidth:a,strokeColor:s}]}},_m=({anchor:t,solid:e,offset:o,normal:n,sizeHalf:i,strokeWidth:r,strokeColor:a},s)=>(dt(s,o),e&&dt(s,it(nt(n))),[{x:t.x,y:t.y,rx:i,ry:i,backgroundColor:e?a:void 0,strokeWidth:e?void 0:r,strokeColor:e?void 0:a}]),Wm=({anchor:t,offset:e,strokeWidth:o,strokeColor:n})=>[{points:[tt(t.x-e.y,t.y+e.x),tt(t.x+e.y,t.y-e.x)],strokeWidth:o,strokeColor:n}],jm=({anchor:t,solid:e,offset:o,normal:n,sizeHalf:i,strokeWidth:r,strokeColor:a},s)=>{return dt(s,o),[{x:t.x-i,y:t.y-i,width:2*i,height:2*i,rotation:(l=n,Math.atan2(l.y,l.x)),backgroundColor:e?a:void 0,strokeWidth:e?void 0:r,strokeColor:e?void 0:a}];var l},Nm=(t,e)=>{const o=parseFloat(t)*e;return v(t)?`${o}%`:o},Hm=(t,e)=>v(t)?((t,e)=>parseFloat(t)/100*e)(t,e):t,Um=t=>[{...t,frameStyle:"line",frameInset:0,frameOffset:0,frameSize:t.frameSize?Nm(t.frameSize,2):"2.5%",frameRadius:t.frameRound?Nm(t.frameSize,2):0}],Vm=({width:t,height:e,frameImage:o,frameSize:n="15%",frameOutset:i=0,frameSlices:r={x1:.15,y1:.15,x2:.85,y2:.85}},{isPreview:a})=>{if(!o)return[];const s=Math.sqrt(t*e),l=Hm(n,s),c=a?l:Math.round(l),d=c,u=Hm(i,s),h=2*u,{x1:p,x2:m,y1:g,y2:f}=r,$={x0:0,y0:0,x1:c,y1:d,x2:t-c,y2:e-d,x3:t,y3:e,cw:c,ch:d,ew:t-c-c,eh:e-d-d},y=a?1:0,b=2*y,x=u>0,v={expandsCanvas:x,width:$.cw,height:$.ch,backgroundImage:o};return[{expandsCanvas:x,x:$.x1-y-u,y:$.y0-u,width:$.ew+b+h,height:$.ch,backgroundCorners:[{x:p,y:0},{x:m,y:0},{x:m,y:g},{x:p,y:g}],backgroundImage:o},{expandsCanvas:x,x:$.x1-y-u,y:$.y2+u,width:$.ew+b+h,height:$.ch,backgroundCorners:[{x:p,y:f},{x:m,y:f},{x:m,y:1},{x:p,y:1}],backgroundImage:o},{expandsCanvas:x,x:$.x0-u,y:$.y1-y-u,width:$.cw,height:$.eh+b+h,backgroundCorners:[{x:0,y:g},{x:p,y:g},{x:p,y:f},{x:0,y:f}],backgroundImage:o},{expandsCanvas:x,x:$.x2+u,y:$.y1-y-u,width:$.cw,height:$.eh+b+h,backgroundCorners:[{x:m,y:g},{x:1,y:g},{x:1,y:f},{x:m,y:f}],backgroundImage:o},{...v,x:$.x0-u,y:$.y0-u,backgroundCorners:[{x:0,y:0},{x:p,y:0},{x:p,y:g},{x:0,y:g}]},{...v,x:$.x2+u,y:$.y0-u,backgroundCorners:[{x:m,y:0},{x:1,y:0},{x:1,y:g},{x:m,y:g}]},{...v,x:$.x2+u,y:$.y2+u,backgroundCorners:[{x:m,y:f},{x:1,y:f},{x:1,y:1},{x:m,y:1}]},{...v,x:$.x0-u,y:$.y2+u,backgroundCorners:[{x:0,y:f},{x:p,y:f},{x:p,y:1},{x:0,y:1}]}]},Zm=({x:t,y:e,width:o,height:n,frameInset:i="3.5%",frameSize:r=".25%",frameColor:a=[1,1,1],frameOffset:s="5%",frameAmount:l=1,frameRadius:c=0,expandsCanvas:d=!1},{isPreview:u})=>{const h=Math.sqrt(o*n);let p=Hm(r,h);const m=Hm(i,h),g=Hm(s,h);let f=0;u||(p=Math.max(1,Math.round(p)),f=p%2==0?0:.5);const $=Hm(Nm(c,l),h);return new Array(l).fill(void 0).map(((i,r)=>{const s=g*r;let l=t+m+s,c=e+m+s,h=t+o-m-s,y=e+n-m-s;return u||(l=Math.round(l),c=Math.round(c),h=Math.round(h),y=Math.round(y)),{x:l+f,y:c+f,width:h-l,height:y-c,cornerRadius:$>0?$-s:0,strokeWidth:p,strokeColor:a,expandsCanvas:d}}))},Gm=({x:t,y:e,width:o,height:n,frameSize:i=".25%",frameOffset:r=0,frameInset:a="2.5%",frameColor:s=[1,1,1]},{isPreview:l})=>{const c=Math.sqrt(o*n);let d=Hm(i,c),u=Hm(a,c),h=Hm(r,c),p=0;l||(d=Math.max(1,Math.round(d)),u=Math.round(u),h=Math.round(h),p=d%2==0?0:.5);const m=h-u,g=t+u+p,f=e+u+p,$=t+o-u-p,y=e+n-u-p;return[{points:[tt(g+m,f),tt($-m,f)]},{points:[tt($,f+m),tt($,y-m)]},{points:[tt($-m,y),tt(g+m,y)]},{points:[tt(g,y-m),tt(g,f+m)]}].map((t=>(t.strokeWidth=d,t.strokeColor=s,t)))},qm=({x:t,y:e,width:o,height:n,frameSize:i=".25%",frameInset:r="2.5%",frameLength:a="2.5%",frameColor:s=[1,1,1]},{isPreview:l})=>{const c=Math.sqrt(o*n);let d=Hm(i,c),u=Hm(r,c),h=Hm(a,c),p=0;l||(d=Math.max(1,Math.round(d)),u=Math.round(u),h=Math.round(h),p=d%2==0?0:.5);const m=t+u+p,g=e+u+p,f=t+o-u-p,$=e+n-u-p;return[{points:[tt(m,g+h),tt(m,g),tt(m+h,g)]},{points:[tt(f-h,g),tt(f,g),tt(f,g+h)]},{points:[tt(f,$-h),tt(f,$),tt(f-h,$)]},{points:[tt(m+h,$),tt(m,$),tt(m,$-h)]}].map((t=>(t.strokeWidth=d,t.strokeColor=s,t)))},Xm=({x:t,y:e,width:o,height:n,frameColor:i=[1,1,1]},{isPreview:r})=>{const a=Math.sqrt(o*n),s=.1*a;let l=.2*a,c=0;const d=.5*s;return r?c=1:l=Math.ceil(l),i.length=3,[{id:"border",x:t-d+c,y:e-d+c,width:o+s-2*c,height:n+l-2*c,frameStyle:"line",frameInset:0,frameOffset:0,frameSize:s,frameColor:i,expandsCanvas:!0},{id:"chin",x:t-d,y:n-c,width:o+s,height:l,backgroundColor:i,expandsCanvas:!0}].filter(Boolean)},Ym=ya,Km=xa,Jm={markupEditorToolbar:((t=["move","view","sharpie","eraser","path","line","arrow","rectangle","ellipse","text","preset"])=>t.map((t=>v(t)?nh(t):Array.isArray(t)?y(t[1])?nh(t[0],void 0,t[1]):nh(t[0],t[1],t[2]):void 0)).filter(Boolean))(),markupEditorToolStyles:{sharpie:oh("path",{strokeWidth:Qu,strokeColor:[...Ju],disableErase:!1,disableResize:!0,disableMove:!0}),eraser:oh("eraser"),path:oh("path",{pathClose:void 0,strokeWidth:Qu,strokeColor:[...Ju],backgroundColor:[0,0,0,0]},{inputMode:"step"}),line:oh("line",{strokeColor:[...Ju],strokeWidth:Qu}),arrow:oh("line",{lineStart:"none",lineEnd:"arrow-solid",strokeColor:[...Ju],strokeWidth:Qu}),rectangle:oh("rectangle",{strokeColor:[...th],backgroundColor:[...Ju]}),ellipse:oh("ellipse",{strokeColor:[...th],backgroundColor:[...Ju]}),text:oh("text",{color:[...Ju],fontSize:"2%"}),...ug},markupEditorShapeStyleControls:((t={})=>{const{colorOptions:e=hh(ih()),lineEndStyleOptions:o=yh(lh()),fontFamilyOptions:n=fh(ch()),fontStyleOptions:i=$h(uh()),textAlignOptions:r=bh(dh())}=t;let{strokeWidthOptions:a=gh(sh()),fontSizeOptions:s=ph(rh()),lineHeightOptions:l=mh(ah())}=t;[s,l,a]=[s,l,a].map((t=>Array.isArray(t)&&t.every(ro)?t.map(Yu):t));const c={defaultColor:e&&wh(e),defaultNumber:Ch(),defaultPercentage:Ch({getValue:t=>parseFloat(t),setValue:t=>`${t}%`,step:.05,label:(t,e,o)=>`${Math.round(t/o*100)}%`,labelClass:"PinturaPercentageLabel"}),backgroundColor:e&&Sh(e),strokeColor:e&&Ph(e),strokeWidth:a&&(d=a,[id,{title:t=>t.shapeTitleStrokeWidth,options:t=>ao(t,"backgroundColor")?xh(d,{defaultKey:"shapeLabelStrokeNone"}):xh(d),onchange:(t,e)=>{if(!t)return;const o=e.strokeColor||[];if(o[3])return;const n=[...o];n[3]=1,e.strokeColor[3]=n}}]),lineStart:o&&Ah(o),lineEnd:o&&Th(o),color:e&&Ih(e),fontFamily:n&&kh(n),fontStyle_fontWeight:i&&Eh(i),fontSize:s&&Lh(s),lineHeight:l&&Fh(l),textAlign:r&&zh(r),cornerRadius:["defaultPercentage",{min:0,max:50,title:t=>t.shapeTitleCornerRadius}],frameColor:["defaultColor"],frameSize:["defaultPercentage",{min:.2,max:10,title:t=>t.labelSize}],frameInset:["defaultPercentage",{min:.5,max:10,title:t=>t.labelInset}],frameOffset:["defaultPercentage",{min:.5,max:10,title:t=>t.labelOffset}],frameRadius:["defaultPercentage",{min:.5,max:10,title:t=>t.labelRadius}],frameAmount:["defaultNumber",{min:1,max:5,step:1,title:t=>t.labelAmount}]};var d;return Object.entries(t).forEach((([t,e])=>{c[t]||(c[t]=e)})),c})()},Qm=Au,tg={filterFunctions:{chrome:()=>[1.398,-.316,.065,-.273,.201,-.051,1.278,-.08,-.273,.201,-.051,.119,1.151,-.29,.215,0,0,0,1,0],fade:()=>[1.073,-.015,.092,-.115,-.017,.107,.859,.184,-.115,-.017,.015,.077,1.104,-.115,-.017,0,0,0,1,0],pastel:()=>[.75,.25,.25,0,0,.25,.75,.25,0,0,.25,.25,.75,0,0,0,0,0,1,0],cold:()=>[1.1,0,0,0,-.1,0,1.1,0,0,-.1,0,0,1.2,0,-.1,0,0,0,1,0],warm:()=>[1.06,0,0,0,0,0,1.01,0,0,0,0,0,.93,0,0,0,0,0,1,0],monoDefault:()=>[.212,.715,.114,0,0,.212,.715,.114,0,0,.212,.715,.114,0,0,0,0,0,1,0],monoWash:()=>[.163,.518,.084,-.01,.208,.163,.529,.082,-.02,.21,.171,.529,.084,0,.214,0,0,0,1,0],monoNoir:()=>[.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,0,0,0,1,0],monoStark:()=>[.338,.991,.117,.093,-.196,.302,1.049,.096,.078,-.196,.286,1.016,.146,.101,-.196,0,0,0,1,0],sepiaDefault:()=>[.393,.768,.188,0,0,.349,.685,.167,0,0,.272,.533,.13,0,0,0,0,0,1,0],sepiaRust:()=>[.269,.764,.172,.05,.1,.239,.527,.152,0,.176,.186,.4,.119,0,.159,0,0,0,1,0],sepiaBlues:()=>[.289,.62,.185,0,.077,.257,.566,.163,0,.115,.2,.43,.128,0,.188,0,0,0,1,0],sepiaColor:()=>[.547,.764,.134,0,-.147,.281,.925,.12,0,-.135,.225,.558,.33,0,-.113,0,0,0,1,0]},filterOptions:[["Default",[[void 0,t=>t.labelDefault]]],["Classic",[["chrome",t=>t.filterLabelChrome],["fade",t=>t.filterLabelFade],["cold",t=>t.filterLabelCold],["warm",t=>t.filterLabelWarm],["pastel",t=>t.filterLabelPastel]]],["Monochrome",[["monoDefault",t=>t.filterLabelMonoDefault],["monoNoir",t=>t.filterLabelMonoNoir],["monoStark",t=>t.filterLabelMonoStark],["monoWash",t=>t.filterLabelMonoWash]]],["Sepia",[["sepiaDefault",t=>t.filterLabelSepiaDefault],["sepiaRust",t=>t.filterLabelSepiaRust],["sepiaBlues",t=>t.filterLabelSepiaBlues],["sepiaColor",t=>t.filterLabelSepiaColor]]]]},eg={frameStyles:{solidSharp:{shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%"},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%"/>'},solidRound:{shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%",frameRound:!0},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%" rx="12%"/>'},lineSingle:{shape:{frameColor:[1,1,1],frameStyle:"line",frameInset:"2.5%",frameSize:".3125%",frameRadius:0},thumb:'<div style="top:.5em;left:.5em;right:.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor"></div>'},lineMultiple:{shape:{frameColor:[1,1,1],frameStyle:"line",frameAmount:2,frameInset:"2.5%",frameSize:".3125%",frameOffset:"1.25%",frameRadius:0},thumb:'<div style="top:.75em;left:.75em;right:.75em;bottom:.75em; outline: 3px double"></div>'},edgeSeparate:{shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameOffset:"5%",frameSize:".3125%"},thumb:'<div style="top:.75em;left:.5em;bottom:.75em;border-left:1px solid"></div><div style="top:.75em;right:.5em;bottom:.75em;border-right:1px solid"></div><div style="top:.5em;left:.75em;right:.75em;border-top:1px solid"></div><div style="bottom:.5em;left:.75em;right:.75em;border-bottom:1px solid"></div>'},edgeCross:{shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameSize:".3125%"},thumb:'<div style="top:-.5em;left:.5em;right:.5em;bottom:-.5em; box-shadow: inset 0 0 0 1px currentColor"></div><div style="top:.5em;left:-.5em;right:-.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor"></div>'},edgeOverlap:{shape:{frameColor:[1,1,1],frameStyle:"edge",frameOffset:"1.5%",frameSize:".3125%"},thumb:'<div style="top:.3125em;left:.5em;bottom:.3125em;border-left:1px solid"></div><div style="top:.3125em;right:.5em;bottom:.3125em;border-right:1px solid"></div><div style="top:.5em;left:.3125em;right:.3125em;border-top:1px solid"></div><div style="bottom:.5em;left:.3125em;right:.3125em;border-bottom:1px solid"></div>'},hook:{shape:{frameColor:[1,1,1],frameStyle:"hook",frameInset:"2.5%",frameSize:".3125%",frameLength:"5%"},thumb:'<div style="top:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-top: 1px solid;"></div><div style="top:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-top: 1px solid;"></div><div style="bottom:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-bottom: 1px solid;"></div><div style="bottom:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-bottom: 1px solid;"></div>'},polaroid:{shape:{frameColor:[1,1,1],frameStyle:"polaroid"},thumb:'<rect stroke-width="20%" x="-5%" y="-5%" width="110%" height="96%"/>'}},frameOptions:[[void 0,t=>t.labelNone],["solidSharp",t=>t.frameLabelMatSharp],["solidRound",t=>t.frameLabelMatRound],["lineSingle",t=>t.frameLabelLineSingle],["lineMultiple",t=>t.frameLabelLineMultiple],["edgeCross",t=>t.frameLabelEdgeCross],["edgeSeparate",t=>t.frameLabelEdgeSeparate],["edgeOverlap",t=>t.frameLabelEdgeOverlap],["hook",t=>t.frameLabelCornerHooks],["polaroid",t=>t.frameLabelPolaroid]]},og=Im,ng=Em,ig={cropLabel:"Crop",cropIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M23 17H9a2 2 0 0 1-2-2v-5m0-3V1 M1 7h14a2 2 0 0 1 2 2v7m0 4v3"/></g>',cropIconButtonRecenter:'<path stroke="currentColor" fill="none" stroke-width="2" stroke-linejoin="bevel" d="M1.5 7.5v-6h6M1.5 16.5v6h6M22.5 16.5v6h-6M22.5 7.5v-6h-6"/><circle cx="12" cy="12" r="3.5" fill="currentColor" stroke="none"/>',cropIconButtonRotateLeft:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><rect x="3" rx="1" height="12" width="12" y="9"/><path d="M15 5h-1a5 5 0 015 5 1 1 0 002 0 7 7 0 00-7-7h-1.374l.747-.747A1 1 0 0011.958.84L9.603 3.194a1 1 0 000 1.415l2.355 2.355a1 1 0 001.415-1.414l-.55-.55H15z"/></g>',cropIconButtonRotateRight:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><path d="M11.177 5H10a5 5 0 00-5 5 1 1 0 01-2 0 7 7 0 017-7h1.374l-.747-.747A1 1 0 0112.042.84l2.355 2.355a1 1 0 010 1.415l-2.355 2.354a1 1 0 01-1.415-1.414l.55-.55z"/><rect rx="1" height="12" width="12" y="9" x="9"/></g>',cropIconButtonFlipVertical:'<g stroke="none" fill="currentColor"><path d="M19.993 12.143H7a1 1 0 0 1-1-1V5.994a1 1 0 0 1 1.368-.93l12.993 5.15a1 1 0 0 1-.368 1.93z"/><path d="M19.993 14a1 1 0 0 1 .368 1.93L7.368 21.078A1 1 0 0 1 6 20.148V15a1 1 0 0 1 1-1h12.993z" opacity=".6"/></g>',cropIconButtonFlipHorizontal:'<g stroke="none" fill="currentColor"><path d="M11.93 7.007V20a1 1 0 0 1-1 1H5.78a1 1 0 0 1-.93-1.368l5.15-12.993a1 1 0 0 1 1.929.368z"/><path d="M14 7.007V20a1 1 0 0 0 1 1h5.149a1 1 0 0 0 .93-1.368l-5.15-12.993A1 1 0 0 0 14 7.007z" opacity=".6"/></g>',cropIconSelectPreset:(t,e)=>{const[o,n,i]=e?[e<1?1:.3,1===e?.85:.5,e>1?1:.3]:[.2,.3,.4];return`<g fill="currentColor">\n            <rect opacity="${o}" x="2" y="4" width="10" height="18" rx="1"/>\n            <rect opacity="${n}" x="4" y="8" width="14" height="14" rx="1"/>\n            <rect opacity="${i}" x="6" y="12" width="17" height="10" rx="1"/>\n        </g>`},cropIconCropBoundary:(t,e)=>{const[o,n,i,r]=e?[.3,1,0,0]:[0,0,.3,1];return`<g fill="currentColor">\n            <rect opacity="${o}" x="2" y="3" width="20" height="20" rx="1"/>\n            <rect opacity="${n}" x="7" y="8" width="10" height="10" rx="1"/>\n            <rect opacity="${i}" x="4" y="8" width="14" height="14" rx="1"/>\n            <rect opacity="${r}" x="12" y="4" width="10" height="10" rx="1"/>\n        </g>`},cropLabelButtonRecenter:"Recenter",cropLabelButtonRotateLeft:"Rotate left",cropLabelButtonRotateRight:"Rotate right",cropLabelButtonFlipHorizontal:"Flip horizontal",cropLabelButtonFlipVertical:"Flip vertical",cropLabelSelectPreset:"Crop shape",cropLabelCropBoundary:"Crop boundary",cropLabelCropBoundaryEdge:"Edge of image",cropLabelCropBoundaryNone:"None",cropLabelTabRotation:"Rotation",cropLabelTabZoom:"Scale"},rg={filterLabel:"Filter",filterIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M18.347 9.907a6.5 6.5 0 1 0-1.872 3.306M3.26 11.574a6.5 6.5 0 1 0 2.815-1.417 M10.15 17.897A6.503 6.503 0 0 0 16.5 23a6.5 6.5 0 1 0-6.183-8.51"/></g>',filterLabelChrome:"Chrome",filterLabelFade:"Fade",filterLabelCold:"Cold",filterLabelWarm:"Warm",filterLabelPastel:"Pastel",filterLabelMonoDefault:"Mono",filterLabelMonoNoir:"Noir",filterLabelMonoWash:"Wash",filterLabelMonoStark:"Stark",filterLabelSepiaDefault:"Sepia",filterLabelSepiaBlues:"Blues",filterLabelSepiaRust:"Rust",filterLabelSepiaColor:"Color"},ag={finetuneLabel:"Finetune",finetuneIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M4 1v5.5m0 3.503V23M12 1v10.5m0 3.5v8M20 1v15.5m0 3.5v3M2 7h4M10 12h4M18 17h4"/></g>',finetuneLabelBrightness:"Brightness",finetuneLabelContrast:"Contrast",finetuneLabelSaturation:"Saturation",finetuneLabelExposure:"Exposure",finetuneLabelTemperature:"Temperature",finetuneLabelGamma:"Gamma",finetuneLabelClarity:"Clarity",finetuneLabelVignette:"Vignette"},sg={annotateLabel:"Annotate",annotateIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M17.086 2.914a2.828 2.828 0 1 1 4 4l-14.5 14.5-5.5 1.5 1.5-5.5 14.5-14.5z"/></g>'},lg={frameLabel:"Frame",frameIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">\n            <rect x="2" y="2" width="20" height="20" rx="4"/>\n            <rect x="6" y="6" width="12" height="12" rx="1"/>\n        </g>',frameLabelMatSharp:"Mat",frameLabelMatRound:"Bevel",frameLabelLineSingle:"Line",frameLabelLineMultiple:"Zebra",frameLabelEdgeSeparate:"Inset",frameLabelEdgeOverlap:"Plus",frameLabelEdgeCross:"Lumber",frameLabelCornerHooks:"Hook",frameLabelPolaroid:"Polaroid"},cg=(t,e={})=>{const o=v(t)?document.querySelector(t):t;if(!$e(o))return;e.class=e.class?`${zm} ${e.class}`:zm;const n=(t=>{const e={},{sub:o,pub:n}=go();l()&&null!==document.doctype||console.warn("Browser is in quirks mode, add <!DOCTYPE html> to page to fix render issues");const i=jr();Lm(i,e);const a=((t,e)=>{const o={},n=new xu({target:t,props:{stores:e,pluginComponents:Array.from(Pu)}});let i=!1;const r=()=>{i||(l()&&window.removeEventListener("pagehide",r),n&&(i=!0,n.$destroy()))};Mu||(Mu=new Set(Ks(xu).filter((t=>!wu.includes(t))))),Mu.forEach((t=>{Object.defineProperty(o,t,{get:()=>n[t],set:Cu.includes(t)?e=>{n[t]={...n[t],...e}}:e=>n[t]=e})})),Object.defineProperty(o,"previewImageData",{get:()=>n.imagePreviewCurrent}),ku.forEach((t=>{const e=Su[t],i=e[0];Object.defineProperty(o,t,{get:()=>n.pluginInterface[i][t],set:o=>{const i=e.reduce(((e,i)=>(e[i]={...n.pluginOptions[i],[t]:o},e)),{});n.pluginOptions={...n.pluginOptions,...i}}})})),Object.defineProperty(o,"element",{get:()=>n.root,set:()=>{}});const a=n.history;return br(o,{on:(t,e)=>{if(i)return()=>{};if(/undo|redo|revert/.test(t))return a.on(t,e);const o=[n.sub(t,e),n.$on(t,(t=>e(t instanceof CustomEvent&&!t.detail?void 0:t)))].filter(Boolean);return()=>o.forEach((t=>t()))},updateImagePreview:t=>{n.imagePreviewSrc=t},close:()=>!i&&n.pub("close"),destroy:r}),Object.defineProperty(o,"history",{get:()=>({undo:()=>a.undo(),redo:()=>a.redo(),revert:()=>a.revert(),get:()=>a.get(),getCollapsed:()=>a.get().splice(0,a.index+1),set:t=>a.set(t),write:t=>a.write(t),get length(){return a.length()},get index(){return a.index}})}),l()&&window.addEventListener("pagehide",r),o})(t,i.stores);Lm(a,e);const s=["loadImage","processImage","abortProcessImage","abortLoadImage"].map((t=>a.on(t,(e=>{const o=i[t](e&&e.detail);o instanceof Promise&&o.catch(r)})))),c=(t,e)=>{const n=o(t,e),r=i.on(t,e),s=a.on(t,e);return()=>{n(),r(),s()}};e.handleEvent=r;const d=Ru.map((t=>c(t,(o=>e.handleEvent(t,o)))));return br(e,{on:c,updateImage:t=>new Promise(((o,n)=>{const r=e.history.get(),a=e.imageState;i.loadImage(t).then((t=>{e.history.set(r),e.imageState=a,o(t)})).catch(n)})),close:()=>{n("close")},destroy:()=>{[...s,...d].forEach((t=>t())),a.destroy(),i.destroy(),n("destroy")}}),setTimeout((()=>n("init",e)),0),e})(o);return Object.assign(n,e)},dg=(t=[])=>(t=>{const e=(o,n={isPreview:!0})=>{const i=t.map((t=>{const i=t(o,n);if(i)return i.map((t=>e(t,n)))})).filter(Boolean).flat();return i.length?i.flat():o};return e})([((t={})=>(e,o)=>{if(!ao(e,"frameStyle"))return;const n=e.frameStyle,i=t[n];if(!i)return;const{frameStyle:r,...a}=e;return i(a,o)})({solid:Um,hook:qm,line:Zm,edge:Gm,polaroid:Xm,nine:Vm}),((t={})=>e=>{if(!ao(e,"lineStart")&&!ao(e,"lineEnd"))return;const o=[],{lineStart:n,lineEnd:i,strokeWidth:r,strokeColor:a}=e,s=tt(e.x1,e.y1),l=tt(e.x2,e.y2),c=[s,l];if(n){const[e,i]=n.split("-"),c=t[e];if(c){const t=Om(s,l,r,!!i);o.push(...c({...t,strokeColor:a,strokeWidth:r},s))}}if(i){const[e,n]=i.split("-"),c=t[e];if(c){const t=Om(l,s,r,!!n);o.push(...c({...t,strokeColor:a,strokeWidth:r},l))}}return[{points:c,strokeWidth:r,strokeColor:a},...o]})({arrow:Dm,circle:_m,square:jm,bar:Wm}),...t]);var ug;let hg,pg;const mg=(t,e,o=[])=>{const n=document.createElement(t),i=Object.getOwnPropertyDescriptors(n.__proto__);for(const t in e)"style"===t?n.style.cssText=e[t]:i[t]&&i[t].set||/textContent|innerHTML/.test(t)||"function"==typeof e[t]?n[t]=e[t]:n.setAttribute(t,e[t]);return o.forEach((t=>n.appendChild(t))),n},gg=()=>{var t=document.getElementsByName("cropinputtype");if(t[0].checked){const{expectedWidth:t,expectedHeight:i,ratioWidth:r,ratioHeight:a}=window;inputedSize.width=t.value,inputedSize.height=i.value,inputedRatio.width=t.value,inputedRatio.height=i.value;var e=300*parseFloat(t.value),o=300*parseFloat(i.value);if(hg.imageCropSize.width===e&&hg.imageCropSize.height===o)return;if(hg.imageCropSize.width>e&&hg.imageCropSize.height>o&&Math.abs(hg.imageCropAspectRatio-e/o)>.01)hg.imageCropAspectRatio=e/o;else{var n=hg.imageCrop;hg.imageCrop={x:n.x+(n.width-e)/2,y:n.y+(n.height-o)/2,width:e,height:o}}hg.history.write()}else t[1].checked&&(inputedRatio.width=ratioWidth.value,inputedRatio.height=ratioHeight.value,e=parseFloat(ratioWidth.value),(o=parseFloat(ratioHeight.value))>0&&(hg.imageCropAspectRatio=e/o),hg.history.write());setTimeout("expectedHeight.dispatchEvent(ke)",300)},fg=t=>{const{expectedWidth:e,expectedHeight:o,ratioWidth:n,ratioHeight:i}=window;var r=document.getElementsByName("cropinputtype");e.disabled=!r[0].checked,o.disabled=!r[0].checked,n.disabled=!r[1].checked,i.disabled=!r[1].checked,e.disabled||(e.focus(),e.select()),n.disabled||(n.focus(),n.select())};((...t)=>{t.filter((t=>!!t.util)).forEach((t=>{const[e,o,n=(()=>!0)]=t.util;Pu.has(e)||(Pu.set(e,{Component:o,isSupported:n}),Ks(o).filter((t=>!vu.includes(t))).forEach((t=>{ku.add(t),Su[t]?Su[t].push(e):Su[t]=[e]})))}))})(Yp,nm,dm,Rm);const $g=mg("form",{class:"export-form"},[mg("div",{style:"padding-bottom:0.25em"},[mg("span",{style:"width:6.8em;text-align:right;display:inline-block",textContent:"w"}),mg("span",{style:"width:4.3em;text-align:right;display:inline-block",textContent:"h"})]),mg("ul",{},[mg("li",{},[mg("label",{},[mg("input",{name:"cropinputtype",type:"radio",checked:"true",value:"size",onchange:t=>{fg()}}),mg("span",{class:"customizeinput",textContent:"Print size :"},[mg("input",{id:"expectedWidth",type:"number",min:0,max:100,step:.1,onkeydown:t=>{13==t.keyCode&&gg()}}),mg("span",{textContent:"x",style:"width: 1.5em;display: inline-block;text-align: right;margin: 0;"}),mg("input",{id:"expectedHeight",type:"number",min:0,max:100,step:.1,onkeydown:t=>{13==t.keyCode&&gg()}}),mg("span",{textContent:"inch"})])])]),mg("li",{},[mg("label",{},[mg("input",{name:"cropinputtype",type:"radio",value:"type",onchange:t=>{fg()}}),mg("span",{class:"customizeinput",textContent:"Print ratio:"},[mg("input",{id:"ratioWidth",type:"number",min:0,max:100,step:1,disabled:!0,onkeydown:t=>{13==t.keyCode&&gg()}}),mg("span",{textContent:":",style:"width: 1.5em;display: inline-block;text-align: right;margin: 0;"}),mg("input",{id:"ratioHeight",type:"number",min:0,max:100,step:1,disabled:!0,onkeydown:t=>{13==t.keyCode&&gg()}})])])])])]);{hg=cg(".inline-editor",{src:"./sample.jfif",imageCropAspectRatio:4/3,imageCrop:{x:400,y:300,width:1e3,height:720},cropSelectPresetFilter:"landscape",cropSelectPresetOptions:cropSelectOptions,cropWillRenderTools:(t,e)=>(pg=function(t,e,o,n){return Array.isArray(o)&&(n=o,o={}),["Panel","customize",o||{},n||[]]}(0,0,{buttonLabel:" ",buttonClass:"PinturaButtonHidden",onshow:t=>{const{expectedWidth:e,expectedHeight:o,ratioWidth:n,ratioHeight:i}=window;var r=(hg.imageCropSize.width/300).toFixed(1),a=(hg.imageCropSize.height/300).toFixed(1);inputedSize.width>0&&inputedSize.height>0&&r>inputedSize.width&&a>inputedSize.height?(e.value=inputedSize.width,o.value=inputedSize.height):(e.value=r,o.value=a);var s=hg.imageCropSize.width/hg.imageCropSize.height;if(!(!n.disabled&&n.value.length>0&&i.value.length>0&&s==n.value/i.value)){var l=getRatioLabel(s);0!=l.widthLable&&(n.value=l.widthLable),0!=l.heightLable&&(i.value=l.heightLable),0==n.value.length&&(n.value=e.value),0==i.value.length&&(i.value=o.value)}},root:$g}),[pg,...t]),cropEnableRotationInput:!0,cropEnableButtonRotateLeft:!0,cropEnableZoomInput:!0,cropImageSelectionCornerStyle:"hook",cropEnableSelectPreset:!0,cropEnableInfoIndicator:!0,hasCropSelectPresetOptions:!0,imageReader:Ym(),imageWriter:Km(),shapePreprocessor:dg(),enableBrowseImage:!0,...tg,...eg,...Qm,...Jm,locale:{...og,...ig,...ag,...rg,...sg,...lg,...ng}});const t=t=>{const e=document.createElement("a");e.style.display="none",e.href=URL.createObjectURL(t),e.download=t.name,document.body.appendChild(e),e.click(),setTimeout((()=>{URL.revokeObjectURL(e.href),e.parentNode.removeChild(e)}),0)};hg.on("load",(t=>console.log("inline result",t))),hg.on("process",(e=>{t(e.dest)}))}})();
//# sourceMappingURL=main.js.map